<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>Status &gt; GPON</title>
<meta http-equiv="Content-Language" content="English">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="pragma" content="no-cache">
<link rel="stylesheet" type="text/css" href="../css/style.css" media="screen">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="screen">
<script language="javascript" type="text/javascript" src="../js//menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>
<style type="text/css">
tr.rowt{background-color:#E0E0E0}
tr.rowh{background-color:#F0F0F0}
</style>

<script language="javascript" type="text/javascript">

//var testt = GetNavLang();
//alert ("lang " + testt);

function reloadPage()
{
	//window.location.replace("/cgi-bin/wwwctrl.cgi?action=sysinfo");
	//document.form_status2.submit();
	window.parent.contentfrm.location.replace(window.parent.contentfrm.location.href);
	timer = setTimeout("reloadPage()",30000);
}

function reloadw()
{
	timer = setTimeout("reloadPage()",30000);
}

function listPon()
{
document.write("<tr>");
document.write("<td class='t-row1'>PON</td>");
document.write("<td class='t-row1' id='pon_link'>" + fvt_meta_config('kv_pon_link') + "</td>");
document.write("<td class='t-row1' id='wan_speed'>" + fvt_meta_config('kv_pon_speed') + "</td>");
if (fvt_meta_config('kv_pon_link').substring(0, 2) == 'Up')
	document.write("<td class='t-row1' id='wan_time'>" + fvt_meta_config('kv_pon_time') + "</td>");
else
	document.write("<td class='t-row1' id='wan_time'>-</td>");

document.write("</tr>");
}

function listLan(Lan)
{
var lan_link="kv_lan"+Lan+"_link";
var lan_speed="kv_lan"+Lan+"_speed";
var lan_time="kv_lan"+Lan+"_time";

if (Lan%2 == 0)
	document.write("<tr>");
else
	document.write("<tr class='rowh'>");

document.write("<td class='t-row2'>ETH"+Lan+"</td>");
document.write("<td class='t-row2' id='lan"+Lan+"_link'>" + fvt_meta_config(lan_link) + "</td>");
document.write("<td class='t-row2' id='lan"+Lan+"_speed'>" + fvt_meta_config(lan_speed) + "</td>");
if (fvt_meta_config(lan_link).substring(0, 2) == 'Up')
	document.write("<td class='t-row2' id='lan"+Lan+"_time'>" + fvt_meta_config(lan_time) + "</td>");
else
	document.write("<td class='t-row2' id='lan"+Lan+"_time'>-</td>");

document.write("</tr>");
}

function listrouting()
{
var j;

//var WanNameA= new Array(8);
//var WanIntfA= new Array(8);
//for (j=0;j<8;j++)
//{
//WanNameA[j]=fvt_meta_config("wan"+j+"_if_name");
//WanIntfA[j]=fvt_meta_config("dev_wan"+j+"_interface");
//}

var i= 0;
var row= 0;
while ( i < 100)
	{
	var RT_Dest=fvt_meta_config("kv_RT_Dest_"+i);
	var RT_Nmask=fvt_meta_config("kv_RT_Nmask_"+i);
	var RT_GW=fvt_meta_config("kv_RT_GW_"+i);
	var RT_metric=fvt_meta_config("kv_RT_metric_"+i);
	var RT_Iface=fvt_meta_config("kv_RT_Iface_"+i);

	//var Index = WanIntfA.indexOf(RT_Iface);
	//var Wanname = WanNameA[Index];
	//if (typeof fvt_meta_config(RT_Dest) === 'undefined')
	if (RT_Dest == "")
		{
		break;
		}

	if (RT_Iface == "vwlan" || RT_Iface == "pon0.4090")
		{
		i++;
		continue;
		}

	if (row%2 == 0)
		document.write("<tr>");
	else
		document.write("<tr class='rowh'>");

	document.write("<td class='t-row2'>"+ RT_Dest +"</td>");
	document.write("<td class='t-row2'>"+ RT_Nmask +"</td>");
	if (RT_GW=="0.0.0.0") RT_GW= "";
	document.write("<td class='t-row2'>"+ RT_GW +"</td>");
	document.write("<td class='t-row2'>"+ RT_metric +"</td>");
	if (RT_Iface.match(/^br/)) RT_Iface= "Lan";
	if (RT_Iface.match(/^ppp/)) RT_Iface= "Wan";
	document.write("<td class='t-row2'>"+ RT_Iface +"</td>");

	document.write("</tr>");
	row++;
	i++;
	}

}

function init()
{
	if(fvt_meta_config('sess_level')=='user')
	{
		document.getElementById("route_table").style.display="none";
		document.getElementById("title1").style.display="inline";
		document.getElementById("title2").style.display="none";
	}
	else
	{
		document.getElementById("route_table").style.display="inline";
		document.getElementById("title1").style.display="none";
		document.getElementById("title2").style.display="inline";
	}
}
</script>

</head>

<body onload="reloadw();init();" leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#FFFFFF">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="interface_form" name="interface_form" method="post">

<fieldset>
	<div class="lv1_title" id="title1">Status&nbsp;&gt;&nbsp;Interface Status</div>
	<div class="lv1_title" id="title2">Status&nbsp;&gt;&nbsp;Interface Status / Routing Table</div>
</fieldset>

	<table cellpadding="0" cellspacing="10" width="550" border="0">
		<tbody>
			<tr></tr>
			<tr>
				<td colspan=2><div class="overview_title2">Interface Status:</div></td>
			</tr>
			<tr style="height:5px;">
				<td colspan="9">
				<div><hr class="hr2"></div>
				</td>
			</tr>
			<tr class="rowt">
				<td width="20%" class="t-title">Interface</td>
				<td width="20%" class="t-title">Status</td>
				<td width="30%" class="t-title">Rate</td>
				<td width="30%" class="t-title">Link Time (Sec.)</td>
			</tr>
			<tr style="height:5px;">
				<td colspan="9">
				<div><hr class="hr2"></div>
				</td>
			</tr>

			<script language="javascript" type="text/javascript">
				listPon();
				listLan(1);
				listLan(2);
				listLan(3);
				listLan(4);
			</script>
			<tr></tr>
		</tbody>
	</table>

	<div name="route_table" id="route_table">
	<table cellpadding="0" cellspacing="10" width="550" border="0">
		<tbody>
		<tr></tr>
			<tr>
				<td colspan=2><div class="overview_title2">Routing Table:</div></td>
			</tr>
			<tr style="height:5px;">
				<td colspan="9">
				<div><hr class="hr2"></div>
				</td>
			</tr>
			<tr class="rowt">
				<td width="25%" class="t-title">Destination IP</td>
				<td width="25%" class="t-title">Netmask</td>
				<td width="25%" class="t-title">Gateway</td>
				<td width="10%" class="t-title">Metric</td>
				<td width="15%" class="t-title">Interface</td>
			</tr>
			<tr style="height:5px;">
				<td colspan="9">
				<div><hr class="hr2"></div>
				</td>
			</tr>

			<script language="javascript" type="text/javascript">
				listrouting();
			</script>

		</tbody>
	</table>
	</div>
</body>
</html>

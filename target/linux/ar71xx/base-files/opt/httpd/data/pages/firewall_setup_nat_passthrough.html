<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>
<style type="text/css">
div.alg_title { color:#00008B; font-weight:bold; margin:0px; text-indent:2em; font-size:10pt; left:-10px; }
</style>
<script language="javascript" type="text/javascript">
var protocol;
//var xmlDoc =loadXml("Firewall.xml");
//var NodeLength = getNodeLength("NATPassthrough");

function check_process()
{
	var process="Success";
	if (process=="Existed")
	{
		alert("Please wait!!Another client is upgading firmware.");
	}
}

function isBridgeMode()
{
        var wan_type="";
        if (wan_type=="bridge")
                document.getElementById("add_applybtn").disabled=true;
}

function natfw_vpn()
{
//	alert("After applying changes, you shall reboot it.");
//	alert("After applying changes,you shall reboot it");
	fvt_form_submit();
	document.getElementById('id_apply_tr').style.display="none";
	document.getElementById('id_wait_progress').style.display="";
	document.natfw_vpn_form.submit();

}


function fvt_form_init()
{
	var form_name = 'natfw_vpn_form' ;
	if (form_name=='natfw_vpn_form' || form_name=='*') {

		if(fvt_meta_config('vpnpassthrough_ipsec')=='1')
		{
			document.getElementById("IPSECPassthrough_1").checked = true;
		}
		else
		{
			document.getElementById("IPSECPassthrough_0").checked = true;
		}

		if(fvt_meta_config('vpnpassthrough_l2tp')=='1')
		{
			document.getElementById("L2TPPassthrough_1").checked = true;
		}
		else
		{
			document.getElementById("L2TPPassthrough_0").checked = true;
		}

		if(fvt_meta_config('vpnpassthrough_pptp')=='1')
		{
			document.getElementById("PPTPPassthrough_1").checked = true;
		}
		else
		{
			document.getElementById("PPTPPassthrough_0").checked = true;
		}
		if(fvt_meta_config('vpnpassthrough_sip')=='1')
		{
			document.getElementById("SIPPassthrough_1").checked = true;
		}
		else
		{
			document.getElementById("SIPPassthrough_0").checked = true;
		}
		if(fvt_meta_config('vpnpassthrough_h323')=='1')
		{
			document.getElementById("H323Passthrough_1").checked = true;
		}
		else
		{
			document.getElementById("H323Passthrough_0").checked = true;
		}
		if(fvt_meta_config('vpnpassthrough_rtsp')=='1')
		{
			document.getElementById("RTSPPassthrough_1").checked = true;
		}
		else
		{
			document.getElementById("RTSPPassthrough_0").checked = true;
		}
	}
}

function fvt_form_submit() 	{
	var form_name = 'natfw_vpn_form' ;
	fvt_paramlist_clear();
	if (form_name=='natfw_vpn_form' || form_name=='*') {
		if (document.getElementById("IPSECPassthrough_1").checked)
		{
			fvt_paramlist_cat_str('vpnpassthrough_ipsec', '1');
		}
		else
		{
			fvt_paramlist_cat_str('vpnpassthrough_ipsec', '0');
		}

		if (document.getElementById("L2TPPassthrough_1").checked)
		{
			fvt_paramlist_cat_str('vpnpassthrough_l2tp', '1');
		}
		else
		{
			fvt_paramlist_cat_str('vpnpassthrough_l2tp', '0');
		}

		if (document.getElementById("PPTPPassthrough_1").checked)
		{
			fvt_paramlist_cat_str('vpnpassthrough_pptp', '1');
		}
		else
		{
			fvt_paramlist_cat_str('vpnpassthrough_pptp', '0');
		}
		if (document.getElementById("SIPPassthrough_1").checked)
		{
			fvt_paramlist_cat_str('vpnpassthrough_sip', '1');
		}
		else
		{
			fvt_paramlist_cat_str('vpnpassthrough_sip', '0');
		}
		if (document.getElementById("H323Passthrough_1").checked)
		{
			fvt_paramlist_cat_str('vpnpassthrough_h323', '1');
		}
		else
		{
			fvt_paramlist_cat_str('vpnpassthrough_h323', '0');
		}
		if (document.getElementById("RTSPPassthrough_1").checked)
		{
			fvt_paramlist_cat_str('vpnpassthrough_rtsp', '1');
		}
		else
		{
			fvt_paramlist_cat_str('vpnpassthrough_rtsp', '0');
		}
	}
	fvt_paramlist_presubmit(form_name);
}

</script>
</head>

<body align="left" onload="fvt_form_init();check_process();isBridgeMode();">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="id_natfw_vpn_form" name="natfw_vpn_form" method="post">
	<fieldset>
		<div class="lv1_title">Firewall Setup&nbsp;&gt;&nbsp;NAT ALG</div>
	</fieldset>
	<fieldset>
		<div class="lv5_new">
		Please note that these settings should only be configured with the help and guidance of your service provider.</div>
	</fieldset>
	<div style="margin:40px 0px;">
		<div class="lv3_title">
		<table><tbody>
		<tr>
			<td width="180px"><div class="alg_title">IPSec ALG:</div></td>
			<td width="100px">
				<input name="IPSECPassthrough" id="IPSECPassthrough_1" type="radio" class="radio">
				<label for="IPSECPassthrough_1">Enable&nbsp;&nbsp;</label></input>
			</td>
			<td>
				<input name="IPSECPassthrough" id="IPSECPassthrough_0" type="radio" class="radio">
				<label for="IPSECPassthrough_0">Disable</label></input>
			</td>
		</tr>
		<tr>
			<td><div class="alg_title">L2TP ALG:</div></td>
			<td>
				<input name="L2TPPassthrough" id="L2TPPassthrough_1" type="radio" class="radio">
				<label for="L2TPPassthrough_1">Enable&nbsp;&nbsp;</label></input>
			</td>
			<td>
				<input name="L2TPPassthrough" id="L2TPPassthrough_0" type="radio" class="radio">
				<label for="L2TPPassthrough_0">Disable</label></input>
			</td>
		</tr>
		<tr>
			<td><div class="alg_title">PPTP ALG:</div></td>
			<td>
				<input name="PPTPPassthrough" id="PPTPPassthrough_1" type="radio" class="radio">
				<label for="PPTPPassthrough_1">Enable&nbsp;&nbsp;</label></input>
			</td>
			<td>
				<input name="PPTPPassthrough" id="PPTPPassthrough_0" type="radio" class="radio">
				<label for="PPTPPassthrough_0">Disable</label></input>
			</td>
		</tr>
		<tr>
			<td><div class="alg_title">SIP ALG:</div></td>
			<td>
				<input name="SIPPassthrough" id="SIPPassthrough_1" type="radio" class="radio">
				<label for="SIPPassthrough_1">Enable&nbsp;&nbsp;</label></input>
			</td>
			<td>
				<input name="SIPPassthrough" id="SIPPassthrough_0" type="radio" class="radio">
				<label for="SIPPassthrough_0">Disable</label></input>
			</td>
		</tr>
		<tr>
			<td><div class="alg_title">H323 ALG:</div></td>
			<td>
				<input name="H323Passthrough" id="H323Passthrough_1" type="radio" class="radio">
				<label for="H323Passthrough_1">Enable&nbsp;&nbsp;</label></input>
			</td>
			<td>
				<input name="H323Passthrough" id="H323Passthrough_0" type="radio" class="radio">
				<label for="H323Passthrough_0">Disable</label></input>
			</td>
		</tr>
		<tr>
			<td><div class="alg_title">RTSP ALG:</div></td>
			<td>
				<input name="RTSPPassthrough" id="RTSPPassthrough_1" type="radio" class="radio">
				<label for="RTSPPassthrough_1">Enable&nbsp;&nbsp;</label></input>
			</td>
			<td>
				<input name="RTSPPassthrough" id="RTSPPassthrough_0" type="radio" class="radio">
				<label for="RTSPPassthrough_0">Disable</label></input>
			</td>
		</tr>
		</tbody></table>
		</div>

		<div style="margin-top:40px;">
			<table>
			<tr id="id_apply_tr">
				<td width="600px" align="center"><input type="button" onclick="natfw_vpn()" id="add_applybtn" name="applybtn" class="width_button"  value="Apply Changes" style="padding:0px 2px;width:auto;height:20px;"><td>
			</tr>
			<tr id="id_wait_progress" style="display:none">
				<td width="600px" align="center">
						<img src="../images/progress1.gif">
				</td>
			</tr>
			</table>
		</div>
	</div>
</form>
</td></tr>
</tbody></table>
</div>

<!--
<div>
	<table class="function">
		<tbody><tr>
			<td width="120"></td>
			<td id="refresh_btn" class="td_btn" onclick="RefreshStatus(0);" width="120">Refresh</td>
			<td id="auto_btn" class="td_btn" onclick="RefreshStatus(ui_refresh_time)" width="120">Auto</td>
			<td width="120"></td>

		</tr>
	</tbody></table>
</div>
-->
<br>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>

<script language="javascript" type="text/javascript">
var NavLang=GetNavLang();

if (NavLang == "ZH")
{
var vMaintenance = "裝置維護";
var vUtilities = "管理工具";
var vRestoreConf = "設定檔回復";
var vNotice5 = "如欲上傳一個事先儲存的設定檔到設備，請選擇檔案後，再按\"回復\"";
var vRestoreSetting = "回復設定";
var vRestore = "回復";
var vFileError = "檔案格式錯誤";
}
else
{
var vMaintenance = "Maintenance";
var vUtilities = "Utilities";
var vRestoreConf = "Restore Configuration";
var vNotice5 = "If you wan to restore previous backup settings, please choose the backup file, then press \"Restore\".";
var vRestoreSetting = "Restore Setting";
var vRestore = "Restore";
var vFileError = "File format error";
}

function restore_conf_error()
{
	var test="Success";
	if (test=="Fail")
	{
	//alert("Error:This file is not a configuration file!!");
		alert("Error:This file is not a configuration file!!");
	}
	else if (test=="Existed")
	{
	//alert("Error:This file is not a configuration file!!");
		alert("Please wait!!Another client is restoring configuration.");
	}
	//window.parent.topfrm.location="/cgi-bin/wwwctrl.cgi?action=utilities_configuration_restore";
}

function check_process()
{
	var process="Success";
	if (process=="Existed")
		alert("Please wait!!Another client is upgading firmware.");
}
function fvt_form_submit(form_name)		{
	fvt_paramlist_clear();
	if (form_name=='cfgrestore_form' || form_name=='*') {
		fvt_paramlist_cat_str('config_restore', "1");		//file
	}
	fvt_paramlist_presubmit(form_name);
}
function restorecfg()
{
	if(document.cfgrestore_form.config_restore.value.length == 0)
	{
		//alert("Please specify the upgrade file's location. Either type the file's path and file name or click browse to the file's location.");
			alert("Please specify restore file's location.Either type the file's path and file name or click browse to the file's location.");
				return false;
	}
	else
	{
		var f = document.cfgrestore_form;
		var re = /\.(dat)$/i;
		if ( !re.test(f.config_restore.value))
		{
			alert(vFileError);
			return false;

		}
		if (confirm("Are you sure you want to continue with uploading ?"))
		{
			//alert("At the end of uploading, the Router may not respond\n to commands for as long as 90 seconds.\n\nThis is normal. Do not power down the base station during this time.");
			alert("At the end of uploading, the Router may not respond\n to commands for as long as 90 seconds.\n\nThis is normal. Do not power down the base station during this time.");
			//window.parent.topfrm.location="misc.html";
			//document.cfgrestore_form.action.value="Retrieve";
			fvt_form_submit('cfgrestore_form');
			document.cfgrestore_form.submit();
			return true;
		}
	}

	return false;
}
</script>
</head>

<body align="left" onload="restore_conf_error();check_process();">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="cfgrestore_form" name="cfgrestore_form" enctype="multipart/form-data" method="post" action="wwwctrl.cgi?action=wait_restart" target="contentfrm">
	<fieldset>
		<div class="lv1_title">
		<script language="javascript" type="text/javascript">
			document.write(vMaintenance+"&nbsp;&gt;&nbsp;"+vUtilities+"&nbsp;&gt;&nbsp;"+vRestoreConf);
		</script>
		</div>
	</fieldset>
<div class="div1_indent">
	<div class="lv5_new"  ctrlflip="etc" ctrltxt="restore">
		<script language="javascript" type="text/javascript">
			document.write(vNotice5);
		</script>
	</div>
	<div class="lv3_new top_rstore">
		<table >
			<tr class="height_rstore">
				<td class="width_restore"><div class="lv2_new" ctrlflip="right" ctrlid="282">
				<script language="javascript" type="text/javascript">
					document.write(vRestoreSetting);
				</script>
				</div></td>
				<td><input ctrlflip="etc" name="config_restore" type="file"></td>
			</tr>
			<tr class="height_rstore"><td ></td>
				<td>
				<script language="javascript" type="text/javascript">
				document.write("<input ctrlflip='etc' type='button' onclick='restorecfg();' ");
				document.write("class='width_restore' value="+vRestore+">");
				</script>
				</td>
			</tr>
		</table>
	</div>
</div>
</form>
</td></tr>
</tbody></table>
</div>

<!--
<div>
	<table class="function">
		<tbody><tr>
			<td width="120"></td>
			<td id="refresh_btn" class="td_btn" onclick="RefreshStatus(0);" width="120">Refresh</td>
			<td id="auto_btn" class="td_btn" onclick="RefreshStatus(ui_refresh_time)" width="120">Auto</td>
			<td width="120"></td>

		</tr>
	</tbody></table>
</div>
-->
<br>
</body>
</html>

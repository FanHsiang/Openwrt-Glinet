<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>


<script language="javascript" type="text/javascript">

var wan_max = 8;
var mode = Array('Static', 'DHCP', 'PPPoE', 'Bridge');

function connect(val)
{
	document.getElementById("id_connect").value=val;
	document.getElementById("id_wanStatus").submit();
}
function disconnect(val)
{
	document.getElementById("id_disconnect").value=val;
        document.getElementById("id_wanStatus").submit();
}
function reloadPage()
{
        window.location.replace("/cgi-bin/wwwctrl.cgi?action=wan_pon");
        timer = setTimeout("reloadPage()",30000);
}

function reloadw()
{
        timer = setTimeout("reloadPage()",30000);
}

function list_wan_info()
{
	var i;
	var vid_if;
	var vid;
	/*
	var if0 = fvt_meta_config('kv_info_wan0_ip');
	var if1 = fvt_meta_config('kv_info_wan1_ip');
	var if2 = fvt_meta_config('kv_info_wan2_ip');
	var if3 = fvt_meta_config('kv_info_wan3_ip');
	var if4 = fvt_meta_config('kv_info_wan4_ip');
	var if5 = fvt_meta_config('kv_info_wan5_ip');
	var if6 = fvt_meta_config('kv_info_wan6_ip');
	var if7 = fvt_meta_config('kv_info_wan7_ip');
*/
	for(i=0; i<wan_max; i++)
	{
		if ( fvt_meta_config("wan"+i+"_if_name") == "")
			return;
		
		vid_if = fvt_meta_config("dev_wan"+i+"_interface");
		if (vid_if != '')
		{
			vid = vid_if.split(".");
			if (vid.length == '1')
				vid[1]='';
		}
		else
		{
			vid = new Array();
			vid[0] = '';
			vid[1] = '';
		}

		if(i%2 == 0)
			document.write("<tr class='color_rowh'>");
		else
			document.write("<tr class='color_rown'>");
		 
		document.write("<td class=\"width_name\">"+fvt_meta_config("wan"+i+"_if_name")+"</td>"); 
		if(fvt_meta_config("wan"+i+"_ip_assignment")=="2")
		{
			var ifff = fvt_meta_config('kv_info_wan'+i+'_ip');
			if(ifff!=""){
				document.write("<td class=\"width_mode\">"+mode[fvt_meta_config("wan"+i+"_ip_assignment")]+"(Connected)</td>"); 
				document.write("<td class=\"width_vlanid\">"+vid[1]+"</td>");
				document.write("<td class=\"width_ipAddr\">"+ifff+"</td>");
				document.write("<td class=\"width_netmask\">"+fvt_meta_config('kv_info_wan'+i+'_netmask')+"</td>");
				document.write("<td class=\"width_gw\">"+fvt_meta_config('kv_info_wan'+i+'_gateway')+"</td>");
				document.write("<td class=\"width_dns1\">"+fvt_meta_config('kv_info_wan'+i+'_dns1')+"</td>");
				document.write("<td class=\"width_dns2\">"+fvt_meta_config('kv_info_wan'+i+'_dns2')+"</td>");
			}else{
				document.write("<td class=\"width_mode\">"+mode[fvt_meta_config("wan"+i+"_ip_assignment")]+"(Disconnected)</td>"); 
				document.write("<td class=\"width_vlanid\">"+vid[1]+"</td>");
				document.write("<td class=\"width_ipAddr\">"+fvt_meta_config("wan"+i+"_ip")+"</td>");
				document.write("<td class=\"width_netmask\">"+fvt_meta_config("wan"+i+"_netmask")+"</td>");
				document.write("<td <th class=\"width_gw\">"+fvt_meta_config("wan"+i+"_gateway")+"</td>");
				document.write("<td class=\"width_dns1\">"+fvt_meta_config("wan"+i+"_dns1")+"</td>");
				document.write("<td class=\"width_dns2\">"+fvt_meta_config("wan"+i+"_dns2")+"</td>");
			}
			
		}else if(fvt_meta_config("wan"+i+"_ip_assignment")=="3"){
			document.write("<td class=\"width_mode\">"+mode[fvt_meta_config("wan"+i+"_ip_assignment")]+"</td>"); 
			document.write("<td class=\"width_vlanid\">"+fvt_meta_config("l2_proto_vlan"+i+"_vlan_mark")+"</td>");
			document.write("<td class=\"width_ipAddr\">"+fvt_meta_config("wan"+i+"_ip")+"</td>");
			document.write("<td class=\"width_netmask\">"+fvt_meta_config("wan"+i+"_netmask")+"</td>");
			document.write("<td <th class=\"width_gw\">"+fvt_meta_config("wan"+i+"_gateway")+"</td>");
			document.write("<td class=\"width_dns1\">"+fvt_meta_config("wan"+i+"_dns1")+"</td>");
			document.write("<td class=\"width_dns2\">"+fvt_meta_config("wan"+i+"_dns2")+"</td>");
		}else{
			document.write("<td class=\"width_mode\">"+mode[fvt_meta_config("wan"+i+"_ip_assignment")]+"</td>"); 
			document.write("<td class=\"width_vlanid\">"+vid[1]+"</td>");
			document.write("<td class=\"width_ipAddr\">"+fvt_meta_config("wan"+i+"_ip")+"</td>");
			document.write("<td class=\"width_netmask\">"+fvt_meta_config("wan"+i+"_netmask")+"</td>");
			document.write("<td <th class=\"width_gw\">"+fvt_meta_config("wan"+i+"_gateway")+"</td>");
			document.write("<td class=\"width_dns1\">"+fvt_meta_config("wan"+i+"_dns1")+"</td>");
			document.write("<td class=\"width_dns2\">"+fvt_meta_config("wan"+i+"_dns2")+"</td>");
		}
		document.write("</tr>");	
		
	}
}


</script>
</head>

<body align="left" onload="reloadw();">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="id_wanStatus" method="post">
	<fieldset>
		<div class="lv1_title">Status&nbsp;&gt;&nbsp;WAN PON Status</div>	
	</fieldset>
	<div class="div1_indent lv3_new">
		<table>
			<tr>			
				<th class="width_name"><div class="lv2_new" style="width:120px;height:20px;"  ctrlflip="right" ctrlid="29">Interface Name</div></th>
				<th class="width_mode"><div class="lv2_new" style="width:80px;height:20px;"  ctrlflip="right" ctrlid="30">Mode</div></th>
				<th class="width_vlanid"><div class="lv2_new" style="width:80px;height:20px;"  ctrlflip="right" ctrlid="31">VLAN ID</div></th>
				<th class="width_ipAddr"><div class="lv2_new" style="width:120px;height:20px;"  ctrlflip="right" ctrlid="32">IP Address</div></th>
				<th class="width_netmask"><div class="lv2_new" style="width:120px;height:20px;"  ctrlflip="right" ctrlid="33">Netmask</div></th>
				<th class="width_gw"><div class="lv2_new" style="width:120px;height:20px;"  ctrlflip="right" ctrlid="34">Gateway</div></th>
				<th class="width_dns1"><div class="lv2_new" style="width:120px;height:20px;"  ctrlflip="right" ctrlid="35">DNS1</div></th>
				<th class="width_dns2"><div class="lv2_new" style="width:120px;height:20px;"  ctrlflip="right" ctrlid="36">DNS2</div></th>	
			</tr>
			<tr style="height:0px;">
				<td colspan="9">
					<div><hr class="hr2"></div>
				</td>
			</tr>
			<script language="javascript" type="text/javascript">
				list_wan_info();
			</script>
			<tr>
			</tr>
		</table>
	</div>
</form>
</td></tr>	
</tbody></table>
</div>

<br>		
</body>
</html>


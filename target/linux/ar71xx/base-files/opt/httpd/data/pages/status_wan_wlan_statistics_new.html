<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>
<style type="text/css">
div.rowh{color:#00008B}
div.cells{color:#2F4F4F}
td.st_cell{padding-left:1px;padding-right:1px;text-align:center;color:#2F4F4F;}
td.st_bold{font-weight:bold;}
td{text-align:center;vertical-align:middle;}
</style>

<script language="javascript" type="text/javascript">
var WAN_MAX_NUM=8
var wanStatus;
var connectStatus = 0;
var ROUTER_MODE = parseInt(fvt_meta_config('ont_mode'),10);
var bridge_maxrule=16;
var untag_vid=4097;

if (fvt_meta_config('dev_wlanac0_interface') != '') var ac_installed = "1";
//var connectStatus = 1;

if (connectStatus==1)
{
	wanStatus = 'Up';
}
else
{
	wanStatus = 'Down';
}

function reloadPage()
{
	window.location.replace("/cgi-bin/wwwctrl.cgi?action=statistics");
	timer = setTimeout("reloadPage()",30000);
}

function reloadw()
{
	timer = setTimeout("reloadPage()",30000);
}

function get_wan_num()
{
	var num=0;
	var wan_if_key
	var wan_if_name;

	for(i=0; i<WAN_MAX_NUM; i++)
	{
		wan_if_key = 'dev_wan'+i+'_interface';
		wan_if_name = fvt_meta_config(wan_if_key);

		if(wan_if_name != "")
		{
			num++;
			continue;
		}
		break;
	}
	return num;
}

function list_pon0_statistics()
{
	var i=0;
	var row=0;
	var wan_num=1;
	var wan_if_key
	var wan_if_name;
	var rx_byte_key;
	var rx_pkts_key;
	var rx_errs_key;
	var rx_drop_key;
	var rx_unicast_key;
	var rx_multicast_key;
	var rx_broadcast_key;
	var rx_rate_key;

	var tx_byte_key;
	var tx_pkts_key;
	var tx_errs_key;
	var tx_drop_key;
	var tx_unicast_key;
	var tx_multicast_key;
	var tx_broadcast_key;
	var tx_rate_key;

	rx_byte_key='kv_wan_rx_byte'+i;
	rx_pkts_key='kv_wan_rx_pkg'+i;
	rx_errs_key='kv_wan_rx_error'+i;
	rx_drop_key='kv_wan_rx_drop'+i;
	rx_unicast_key='kv_wan_rx_unicast_pkg'+i;
	rx_multicast_key='kv_wan_rx_multicast_pkg'+i;
	rx_broadcast_key='kv_wan_rx_broadcast_pkg'+i;
	rx_rate_key='kv_wan_rx_rate'+i;

	tx_byte_key='kv_wan_tx_byte'+i;
	tx_pkts_key='kv_wan_tx_pkg'+i;
	tx_errs_key='kv_wan_tx_error'+i;
	tx_drop_key='kv_wan_tx_drop'+i;
	tx_unicast_key='kv_wan_tx_unicast_pkg'+i;
	tx_multicast_key='kv_wan_tx_multicast_pkg'+i;
	tx_broadcast_key='kv_wan_tx_broadcast_pkg'+i;
	tx_rate_key='kv_wan_tx_rate'+i;

	document.write("<tr>");
	document.write("<td>pon0</td>");
	document.write("<td>"+fvt_meta_config(rx_byte_key)+"</td>");
	document.write("<td>"+fvt_meta_config(rx_pkts_key)+"</td>");
	document.write("<td>"+fvt_meta_config(rx_errs_key)+"</td>");
	document.write("<td>"+fvt_meta_config(rx_drop_key)+"</td>");
	if(row==0)
	{
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(rx_unicast_key)+"</td>");
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(rx_multicast_key)+"</td>");
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(rx_broadcast_key)+"</td>");
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(rx_rate_key)+"</td>");
	}
	document.write("<td>"+fvt_meta_config(tx_byte_key)+"</td>");
	document.write("<td>"+fvt_meta_config(tx_pkts_key)+"</td>");
	document.write("<td>"+fvt_meta_config(tx_errs_key)+"</td>");
	document.write("<td>"+fvt_meta_config(tx_drop_key)+"</td>");
	if(row==0)
	{
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(tx_unicast_key)+"</td>");
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(tx_multicast_key)+"</td>");
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(tx_broadcast_key)+"</td>");
		document.write("<td rowspan='"+wan_num+"'>"+fvt_meta_config(tx_rate_key)+"</td>");
	}
	document.write("</tr>");
}

function list_wan_statistics()
{
	var i=0;
	var row=0;
	var wan_num;
	var wan_if_key
	var wan_if_name;
	var rx_byte_key;
	var rx_pkts_key;
	var rx_errs_key;
	var rx_drop_key;
	var rx_unicast_key;
	var rx_multicast_key;
	var rx_broadcast_key;
	var rx_rate_key;

	var tx_byte_key;
	var tx_pkts_key;
	var tx_errs_key;
	var tx_drop_key;
	var tx_unicast_key;
	var tx_multicast_key;
	var tx_broadcast_key;
	var tx_rate_key;
	var br_tx_byte_key;
	var br_rx_byte_key;

	wan_num = get_wan_num();
	var Brgvlan = new Array();
	var totalvlan=0;
	for (var i=0;i<bridge_maxrule;i++)
	{
		var vlanid;
		vlanid=fvt_meta_config("l2_proto_vlan"+i+"_vlan_mark");
		if (vlanid!="")
		{
			var matchvlan = Brgvlan.indexOf(vlanid);
			if (matchvlan < 0)
			{
			Brgvlan[totalvlan] = vlanid;
			//alert(totalvlan+"="+Brgvlan[totalvlan]);
			totalvlan++;
			}
		}
	}

	if(!ROUTER_MODE)
	{
		list_pon0_statistics();
		return 0;
	}

	var wan_row = wan_num;
	for(i=0; i<WAN_MAX_NUM; i++)
	{
		wan_if_name = fvt_meta_config('dev_wan'+i+'_interface');
		if(wan_if_name != "")
		{
			var wanvid = wan_if_name.split(".");
			if (wanvid.length == '1') wanvid[1]=untag_vid;
			for (var j=0;j<Brgvlan.length;j++)
			{
				if ( Brgvlan[j] == wanvid[1] ) wan_row++;
			}
		}
	}

	var lan_tx_mc_pkg=0;
	for(i=0;i<4;i++)
	{
		if (fvt_meta_config('kv_lan_tx_multicast_pkg'+i)!="")
			lan_tx_mc_pkg+=parseInt(fvt_meta_config('kv_lan_tx_multicast_pkg'+i));
	}

	var wlan_tx_mc_pkg=0;
	var vap_num=fvt_meta_config('wlan_vap_num');
	for(i=0;i<(vap_num-1);i++)
	{
		if (fvt_meta_config('kv_wlan_vap'+i+'_tx_mcast_pkts')!="")
			wlan_tx_mc_pkg+=parseInt(fvt_meta_config('kv_wlan_vap'+i+'_tx_mcast_pkts'));
	}
	if (fvt_meta_config('kv_wlan_tx_mcast_pkts')!="")
		wlan_tx_mc_pkg+=parseInt(fvt_meta_config('kv_wlan_tx_mcast_pkts'));

	var wlanac_tx_mc_pkg=0;
	var ac_vap_num=fvt_meta_config('wlanac_vap_num');
	for(i=0;i<(ac_vap_num-1);i++)
	{
		if (fvt_meta_config('kv_wlanac_vap'+i+'_tx_mcast_pkts')!="")
			wlan_tx_mc_pkg+=parseInt(fvt_meta_config('kv_wlanac_vap'+i+'_tx_mcast_pkts'));
	}
	if (fvt_meta_config('kv_wlanac_tx_mcast_pkts')!="")
		wlan_tx_mc_pkg+=parseInt(fvt_meta_config('kv_wlanac_tx_mcast_pkts'));

	var wan_rx_multicast=lan_tx_mc_pkg+wlan_tx_mc_pkg+wlanac_tx_mc_pkg;
			//parseInt(fvt_meta_config('kv_wlan_tx_mcast_pkts'));
			//parseInt(fvt_meta_config('kv_wlanac_tx_mcast_pkts'));

	for(i=0; i<WAN_MAX_NUM; i++)
	{
		wan_if_key = 'dev_wan'+i+'_interface';
		wan_if_name = fvt_meta_config(wan_if_key);
		rx_byte_key='kv_wan_rx_byte'+i;
		rx_pkts_key='kv_wan_rx_pkg'+i;
		rx_errs_key='kv_wan_rx_error'+i;
		rx_drop_key='kv_wan_rx_drop'+i;
		rx_unicast_key='kv_wan_rx_unicast_pkg'+i;
		rx_multicast_key='kv_wan_rx_multicast_pkg'+i;
		rx_broadcast_key='kv_wan_rx_broadcast_pkg'+i;
		rx_rate_key='kv_wan_rx_rate'+i;

		tx_byte_key='kv_wan_tx_byte'+i;
		tx_pkts_key='kv_wan_tx_pkg'+i;
		tx_errs_key='kv_wan_tx_error'+i;
		tx_drop_key='kv_wan_tx_drop'+i;
		tx_unicast_key='kv_wan_tx_unicast_pkg'+i;
		tx_multicast_key='kv_wan_tx_multicast_pkg'+i;
		tx_broadcast_key='kv_wan_tx_broadcast_pkg'+i;
		tx_rate_key='kv_wan_tx_rate'+i;

		br_tx_byte_key='kv_USbytecnt_br'+i;
		br_rx_byte_key='kv_DSbytecnt_br'+i;

		var has_br = 1; //No Bridge
		var wan_rx_byte = parseInt(fvt_meta_config(rx_byte_key));
		var wan_tx_byte = parseInt(fvt_meta_config(tx_byte_key));
		var wanvid = wan_if_name.split(".");
		if (wanvid.length == '1') wanvid[1]=untag_vid;

		for (var j=0;j<Brgvlan.length;j++)
		{
			if ( Brgvlan[j] == wanvid[1] ) //Have Bridge Vlan
			{
				has_br = 2;
				wan_rx_byte = parseInt(fvt_meta_config(rx_byte_key))
							- parseInt(fvt_meta_config(br_rx_byte_key));
				wan_tx_byte = parseInt(fvt_meta_config(tx_byte_key))
							- parseInt(fvt_meta_config(br_tx_byte_key));
			}
		}
		wan_rx_byte = wan_rx_byte ? wan_rx_byte : "-";
		wan_tx_byte = wan_tx_byte ? wan_tx_byte : "-";

		if(wan_if_name != "")
		{
			document.write("<tr>");

			document.write("<td class='st_cell st_bold'>"+fvt_meta_config("wan"+i+"_if_name")+"</td>");
			document.write("<td>"+wan_rx_byte+"</td>");
			document.write("<td rowspan='"+has_br+"'>"+fvt_meta_config(rx_pkts_key)+"</td>");
			document.write("<td rowspan='"+has_br+"'>"+fvt_meta_config(rx_errs_key)+"</td>");
			document.write("<td rowspan='"+has_br+"'>"+fvt_meta_config(rx_drop_key)+"</td>");
			if(row==0)
			{
				document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(rx_unicast_key)+"</td>");
				//document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(rx_multicast_key)+"</td>");
				document.write("<td rowspan='"+wan_row+"'>"+wan_rx_multicast+"</td>");
				document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(rx_broadcast_key)+"</td>");
				document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(rx_rate_key)+"</td>");
			}
			document.write("<td>"+wan_tx_byte+"</td>");
			document.write("<td rowspan='"+has_br+"'>"+fvt_meta_config(tx_pkts_key)+"</td>");
			document.write("<td rowspan='"+has_br+"'>"+fvt_meta_config(tx_errs_key)+"</td>");
			document.write("<td rowspan='"+has_br+"'>"+fvt_meta_config(tx_drop_key)+"</td>");
			if(row==0)
			{
				document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(tx_unicast_key)+"</td>");
				document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(tx_multicast_key)+"</td>");
				document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(tx_broadcast_key)+"</td>");
				document.write("<td rowspan='"+wan_row+"'>"+fvt_meta_config(tx_rate_key)+"</td>");
			}
			document.write("</tr>");

			if ( has_br == 2)
			{
				var BR_VID=wanvid[1];
				if (BR_VID == untag_vid) BR_VID=untag_vid;
				document.write("<tr>");
				document.write("<td class='st_cell st_bold'>Br-"+BR_VID+"</td>");
				document.write("<td>"+fvt_meta_config(br_rx_byte_key)+"</td>");
				document.write("<td>"+fvt_meta_config(br_tx_byte_key)+"</td>");
				document.write("</tr>");
			}
			row++;
		}
	}
}

function list_lan_statistics()
{
	var i=0;
	var lan_if_name;
	var rx_byte_key;
	var rx_pkts_key;
	var rx_errs_key;
	var rx_drop_key;
	var rx_unicast_key;
	var rx_multicast_key;
	var rx_broadcast_key;
	var rx_rate_key;

	var tx_byte_key;
	var tx_pkts_key;
	var tx_errs_key;
	var tx_drop_key;
	var tx_unicast_key;
	var tx_multicast_key;
	var tx_broadcast_key;
	var tx_rate_key;

	for(i=0; i<4; i++)
	{
		lan_if_name="ETH"+(i+1);
		rx_byte_key='kv_lan_rx_byte'+i;
		rx_pkts_key='kv_lan_rx_pkg'+i;
		rx_errs_key='kv_lan_rx_error'+i;
		rx_drop_key='kv_lan_rx_drop'+i;
		rx_unicast_key='kv_lan_rx_unicast_pkg'+i;
		rx_multicast_key='kv_lan_rx_multicast_pkg'+i;
		rx_broadcast_key='kv_lan_rx_broadcast_pkg'+i;
		rx_rate_key='kv_lan_rx_rate'+i;

		tx_byte_key='kv_lan_tx_byte'+i;
		tx_pkts_key='kv_lan_tx_pkg'+i;
		tx_errs_key='kv_lan_tx_error'+i;
		tx_drop_key='kv_lan_tx_drop'+i;
		tx_unicast_key='kv_lan_tx_unicast_pkg'+i;
		tx_multicast_key='kv_lan_tx_multicast_pkg'+i;
		tx_broadcast_key='kv_lan_tx_broadcast_pkg'+i;
		tx_rate_key='kv_lan_tx_rate'+i;


		document.write("<tr>");
		document.write("<td class='st_cell st_bold'>"+lan_if_name+"</td>");
		document.write("<td>"+fvt_meta_config(rx_byte_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_pkts_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_errs_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_drop_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_unicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_multicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_broadcast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_rate_key)+"</td>");

		document.write("<td>"+fvt_meta_config(tx_byte_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_pkts_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_errs_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_drop_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_unicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_multicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_broadcast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_rate_key)+"</td>");
		document.write("</tr>");

	}
}

function list_wlan_statistics()
{
	var i=0;
	var vap_num=fvt_meta_config('wlan_vap_num');
	var rowspan=0;
	var wlan_enable=fvt_meta_config('wlan_enable');
	var ssid_key;
	var rx_byte_key;
	var rx_pkts_key;
	var rx_errs_key;
	var rx_drop_key;
	var rx_unicast_key;
	var rx_multicast_key;
	var rx_broadcast_key;

	var tx_byte_key;
	var tx_pkts_key;
	var tx_errs_key;
	var tx_drop_key;
	var tx_unicast_key;
	var tx_multicast_key;
	var tx_broadcast_key;

	var sum_rx_byte=0;
	var sum_rx_pkts=0;
	var sum_rx_errs=0;
	var sum_rx_drop=0;
	var sum_rx_unicast=0;
	var sum_rx_multicast=0;
	var sum_rx_broadcast=0;

	var sum_tx_byte=0;
	var sum_tx_pkts=0;
	var sum_tx_errs=0;
	var sum_tx_drop=0;
	var sum_tx_unicast=0;
	var sum_tx_multicast=0;
	var sum_tx_broadcast=0;

	ssid_key = 'wlan_ssid';
	rx_byte_key='kv_wlan_rx_byte';
	rx_pkts_key='kv_wlan_rx_pkg';
	rx_errs_key='kv_wlan_rx_error';
	rx_drop_key='kv_wlan_rx_drop';
	rx_unicast_key='kv_wlan_rx_ucast_pkts';
	rx_multicast_key='kv_wlan_rx_mcast_pkts';
	rx_broadcast_key='kv_wlan_rx_bcast_pkts';
	rx_rate_key='kv_wlan_rx_rate';

	tx_byte_key='kv_wlan_tx_byte';
	tx_pkts_key='kv_wlan_tx_pkg';
	tx_errs_key='kv_wlan_tx_error';
	tx_drop_key='kv_wlan_tx_drop';
	tx_unicast_key='kv_wlan_tx_ucast_pkts';
	tx_multicast_key='kv_wlan_tx_mcast_pkts';
	tx_broadcast_key='kv_wlan_tx_bcast_pkts';
	tx_rate_key='kv_wlan_tx_rate';

	//var vapac_num=fvt_meta_config('wlanac_vap_num');
	//if (ac_installed == "1")
	//	//rowspan=parseInt(vap_num, 10)+parseInt(vapac_num, 10)+2;
	//	rowspan=parseInt(vap_num, 10)+parseInt(vapac_num, 10)+1;
	//else
		rowspan=parseInt(vap_num, 10)+1;
		//rowspan=parseInt(vap_num, 10);
	var rx_rate_t=parseFloat(parseInt(fvt_meta_config(rx_rate_key))/125).toFixed(2);
	var wlan_rx_rate=rx_rate_t;
	var tx_rate_t=parseFloat(parseInt(fvt_meta_config(tx_rate_key))/125).toFixed(2);
	var wlan_tx_rate=tx_rate_t;

	if(wlan_enable == 1)
	{
		document.write("<tr>");
		document.write("<td class='st_cell st_bold'>Wi-Fi 11n ("+fvt_meta_config(ssid_key)+")</td>");
		document.write("<td>"+fvt_meta_config(rx_byte_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_pkts_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_errs_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_drop_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_unicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_multicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_broadcast_key)+"</td>");
		//document.write("<td rowspan='"+rowspan+"'>"+fvt_meta_config(rx_rate_key)+"</td>");
		document.write("<td rowspan='"+rowspan+"'>"+wlan_rx_rate+"K</td>");

		document.write("<td>"+fvt_meta_config(tx_byte_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_pkts_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_errs_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_drop_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_unicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_multicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_broadcast_key)+"</td>");
		//document.write("<td rowspan='"+rowspan+"'>"+fvt_meta_config(tx_rate_key)+"</td>");
		document.write("<td rowspan='"+rowspan+"'>"+wlan_tx_rate+"K</td>");

		document.write("</tr>");

		sum_rx_byte+=parseInt(fvt_meta_config(rx_byte_key), 10);
		sum_rx_pkts+=parseInt(fvt_meta_config(rx_pkts_key), 10);
		sum_rx_errs+=parseInt(fvt_meta_config(rx_errs_key), 10);
		sum_rx_drop+=parseInt(fvt_meta_config(rx_drop_key), 10);
		sum_rx_unicast+=parseInt(fvt_meta_config(rx_unicast_key), 10);
		sum_rx_multicast+=parseInt(fvt_meta_config(rx_multicast_key), 10);
		sum_rx_broadcast+=parseInt(fvt_meta_config(rx_broadcast_key), 10);

		sum_tx_byte+=parseInt(fvt_meta_config(tx_byte_key), 10);
		sum_tx_pkts+=parseInt(fvt_meta_config(tx_pkts_key), 10);
		sum_tx_errs+=parseInt(fvt_meta_config(tx_errs_key), 10);
		sum_tx_drop+=parseInt(fvt_meta_config(tx_drop_key), 10);
		sum_tx_unicast+=parseInt(fvt_meta_config(tx_unicast_key), 10);
		sum_tx_multicast+=parseInt(fvt_meta_config(tx_multicast_key), 10);
		sum_tx_broadcast+=parseInt(fvt_meta_config(tx_broadcast_key), 10);

		for(i=0; i<(vap_num-1); i++)
		{
			ssid_key = 'wlan_vap'+i+'_ssid';
			rx_byte_key='kv_wlan_vap'+i+'_rx_byte';
			rx_pkts_key='kv_wlan_vap'+i+'_rx_pkg';
			rx_errs_key='kv_wlan_vap'+i+'_rx_error';
			rx_drop_key='kv_wlan_vap'+i+'_rx_drop';
			rx_unicast_key='kv_wlan_vap'+i+'_rx_ucast_pkts';
			rx_multicast_key='kv_wlan_vap'+i+'_rx_mcast_pkts';
			rx_broadcast_key='kv_wlan_vap'+i+'_rx_bcast_pkts';

			tx_byte_key='kv_wlan_vap'+i+'_tx_byte';
			tx_pkts_key='kv_wlan_vap'+i+'_tx_pkg';
			tx_errs_key='kv_wlan_vap'+i+'_tx_error';
			tx_drop_key='kv_wlan_vap'+i+'_tx_drop';
			tx_unicast_key='kv_wlan_vap'+i+'_tx_ucast_pkts';
			tx_multicast_key='kv_wlan_vap'+i+'_tx_mcast_pkts';
			tx_broadcast_key='kv_wlan_vap'+i+'_tx_bcast_pkts';

			var v_rx_byte=fvt_meta_config(rx_byte_key);
			var v_rx_pkts=fvt_meta_config(rx_pkts_key);
			var v_rx_errs=fvt_meta_config(rx_errs_key);
			var v_rx_drop=fvt_meta_config(rx_drop_key);
			var v_rx_unicast=fvt_meta_config(rx_unicast_key);
			var v_rx_multicast=fvt_meta_config(rx_multicast_key);
			var v_rx_broadcast=fvt_meta_config(rx_broadcast_key);

			var v_tx_byte=fvt_meta_config(tx_byte_key);
			var v_tx_pkts=fvt_meta_config(tx_pkts_key);
			var v_tx_errs=fvt_meta_config(tx_errs_key);
			var v_tx_drop=fvt_meta_config(tx_drop_key);
			var v_tx_unicast=fvt_meta_config(tx_unicast_key);
			var v_tx_multicast=fvt_meta_config(tx_multicast_key);
			var v_tx_broadcast=fvt_meta_config(tx_broadcast_key);

			document.write("<tr>");
			document.write("<td class='st_cell st_bold'>Wi-Fi 11n ("+fvt_meta_config(ssid_key)+")</td>");
			document.write("<td>"+v_rx_byte+"</td>");
			document.write("<td>"+v_rx_pkts+"</td>");
			document.write("<td>"+v_rx_errs+"</td>");
			document.write("<td>"+v_rx_drop+"</td>");
			document.write("<td>"+v_rx_unicast+"</td>");
			document.write("<td>"+v_rx_multicast+"</td>");
			document.write("<td>"+v_rx_broadcast+"</td>");

			document.write("<td>"+v_tx_byte+"</td>");
			document.write("<td>"+v_tx_pkts+"</td>");
			document.write("<td>"+v_tx_errs+"</td>");
			document.write("<td>"+v_tx_drop+"</td>");
			document.write("<td>"+v_tx_unicast+"</td>");
			document.write("<td>"+v_tx_multicast+"</td>");
			document.write("<td>"+v_tx_broadcast+"</td>");

			document.write("</tr>");

			sum_rx_byte+=parseInt(v_rx_byte, 10);
			sum_rx_pkts+=parseInt(v_rx_pkts, 10);
			sum_rx_errs+=parseInt(v_rx_errs, 10);
			sum_rx_drop+=parseInt(v_rx_drop, 10);
			sum_rx_unicast+=parseInt(v_rx_unicast, 10);
			sum_rx_multicast+=parseInt(v_rx_multicast, 10);
			sum_rx_broadcast+=parseInt(v_rx_broadcast, 10);

			sum_tx_byte+=parseInt(v_tx_byte, 10);
			sum_tx_pkts+=parseInt(v_tx_pkts, 10);
			sum_tx_errs+=parseInt(v_tx_errs, 10);
			sum_tx_drop+=parseInt(v_tx_drop, 10);
			sum_tx_unicast+=parseInt(v_tx_unicast, 10);
			sum_tx_multicast+=parseInt(v_tx_multicast, 10);
			sum_tx_broadcast+=parseInt(v_tx_broadcast, 10);
		}
		if ( isNaN(sum_rx_unicast) ) sum_rx_unicast=" ";
		if ( isNaN(sum_rx_multicast) ) sum_rx_multicast=" ";
		if ( isNaN(sum_rx_broadcast) ) sum_rx_broadcast=" ";
		document.write("<tr>");
		document.write("<td class='st_cell st_bold'>Total Wi-Fi 11n</td>");
		document.write("<td>"+sum_rx_byte+"</td>");
		document.write("<td>"+sum_rx_pkts+"</td>");
		document.write("<td>"+sum_rx_errs+"</td>");
		document.write("<td>"+sum_rx_drop+"</td>");
		document.write("<td>"+sum_rx_unicast+"</td>");
		document.write("<td>"+sum_rx_multicast+"</td>");
		document.write("<td>"+sum_rx_broadcast+"</td>");

		if ( isNaN(sum_tx_unicast) ) sum_tx_unicast="";
		if ( isNaN(sum_tx_multicast) ) sum_tx_multicast="";
		if ( isNaN(sum_tx_broadcast) ) sum_tx_broadcast="";
		document.write("<td>"+sum_tx_byte+"</td>");
		document.write("<td>"+sum_tx_pkts+"</td>");
		document.write("<td>"+sum_tx_errs+"</td>");
		document.write("<td>"+sum_tx_drop+"</td>");
		document.write("<td>"+sum_tx_unicast+"</td>");
		document.write("<td>"+sum_tx_multicast+"</td>");
		document.write("<td>"+sum_tx_broadcast+"</td>");
		document.write("</tr>");
	}
}

function list_wlanac_statistics()
{
	var i=0;
	var ac_vap_num=fvt_meta_config('wlanac_vap_num');
	var rowspan=0;
	var wlanac_enable=fvt_meta_config('wlanac_enable');
	var ssid_key;
	var rx_byte_key;
	var rx_pkts_key;
	var rx_errs_key;
	var rx_drop_key;
	var rx_unicast_key;
	var rx_multicast_key;
	var rx_broadcast_key;

	var tx_byte_key;
	var tx_pkts_key;
	var tx_errs_key;
	var tx_drop_key;
	var tx_unicast_key;
	var tx_multicast_key;
	var tx_broadcast_key;

	var sum_rx_byte=0;
	var sum_rx_pkts=0;
	var sum_rx_errs=0;
	var sum_rx_drop=0;
	var sum_rx_unicast=0;
	var sum_rx_multicast=0;
	var sum_rx_broadcast=0;

	var sum_tx_byte=0;
	var sum_tx_pkts=0;
	var sum_tx_errs=0;
	var sum_tx_drop=0;
	var sum_tx_unicast=0;
	var sum_tx_multicast=0;
	var sum_tx_broadcast=0;

	ssid_key = 'wlanac_ssid';
	rx_byte_key='kv_wlanac_rx_byte';
	rx_pkts_key='kv_wlanac_rx_pkg';
	rx_errs_key='kv_wlanac_rx_error';
	rx_drop_key='kv_wlanac_rx_drop';
	rx_unicast_key='kv_wlanac_rx_ucast_pkts';
	rx_multicast_key='kv_wlanac_rx_mcast_pkts';
	rx_broadcast_key='kv_wlanac_rx_bcast_pkts';
	rx_rate_key='kv_wlanac_rx_rate';

	tx_byte_key='kv_wlanac_tx_byte';
	tx_pkts_key='kv_wlanac_tx_pkg';
	tx_errs_key='kv_wlanac_tx_error';
	tx_drop_key='kv_wlanac_tx_drop';
	tx_unicast_key='kv_wlanac_tx_ucast_pkts';
	tx_multicast_key='kv_wlanac_tx_mcast_pkts';
	tx_broadcast_key='kv_wlanac_tx_bcast_pkts';
	tx_rate_key='kv_wlanac_tx_rate';

	//var vapac_num=fvt_meta_config('wlanac_vap_num');
	//if (ac_installed == "1")
	//	//rowspan=parseInt(vap_num, 10)+parseInt(vapac_num, 10)+2;
	//	rowspan=parseInt(vap_num, 10)+parseInt(vapac_num, 10)+1;
	//else
		rowspan=parseInt(ac_vap_num, 10)+1;
		//rowspan=parseInt(vap_num, 10);
	var rx_rate_t=parseFloat(parseInt(fvt_meta_config(rx_rate_key))/125).toFixed(2);
	var wlan_rx_rate=rx_rate_t;
	var tx_rate_t=parseFloat(parseInt(fvt_meta_config(tx_rate_key))/125).toFixed(2);
	var wlan_tx_rate=tx_rate_t;


	if(wlanac_enable == 1)
	{
		document.write("<tr>");
		document.write("<td class='st_cell st_bold'>Wi-Fi 11ac ("+fvt_meta_config(ssid_key)+")</td>");
		document.write("<td>"+fvt_meta_config(rx_byte_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_pkts_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_errs_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_drop_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_unicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_multicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(rx_broadcast_key)+"</td>");
		//document.write("<td rowspan='"+rowspan+"'>"+fvt_meta_config(rx_rate_key)+"</td>");
		document.write("<td rowspan='"+rowspan+"'>"+wlan_rx_rate+"K</td>");

		document.write("<td>"+fvt_meta_config(tx_byte_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_pkts_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_errs_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_drop_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_unicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_multicast_key)+"</td>");
		document.write("<td>"+fvt_meta_config(tx_broadcast_key)+"</td>");
		//document.write("<td rowspan='"+rowspan+"'>"+fvt_meta_config(tx_rate_key)+"</td>");
		document.write("<td rowspan='"+rowspan+"'>"+wlan_tx_rate+"K</td>");

		document.write("</tr>");

		sum_rx_byte+=parseInt(fvt_meta_config(rx_byte_key), 10);
		sum_rx_pkts+=parseInt(fvt_meta_config(rx_pkts_key), 10);
		sum_rx_errs+=parseInt(fvt_meta_config(rx_errs_key), 10);
		sum_rx_drop+=parseInt(fvt_meta_config(rx_drop_key), 10);
		sum_rx_unicast+=parseInt(fvt_meta_config(rx_unicast_key), 10);
		sum_rx_multicast+=parseInt(fvt_meta_config(rx_multicast_key), 10);
		sum_rx_broadcast+=parseInt(fvt_meta_config(rx_broadcast_key), 10);

		sum_tx_byte+=parseInt(fvt_meta_config(tx_byte_key), 10);
		sum_tx_pkts+=parseInt(fvt_meta_config(tx_pkts_key), 10);
		sum_tx_errs+=parseInt(fvt_meta_config(tx_errs_key), 10);
		sum_tx_drop+=parseInt(fvt_meta_config(tx_drop_key), 10);
		sum_tx_unicast+=parseInt(fvt_meta_config(tx_unicast_key), 10);
		sum_tx_multicast+=parseInt(fvt_meta_config(tx_multicast_key), 10);
		sum_tx_broadcast+=parseInt(fvt_meta_config(tx_broadcast_key), 10);

		for(i=0; i<(ac_vap_num-1); i++)
		{
			ssid_key = 'wlanac_vap'+i+'_ssid';
			rx_byte_key='kv_wlanac_vap'+i+'_rx_byte';
			rx_pkts_key='kv_wlanac_vap'+i+'_rx_pkg';
			rx_errs_key='kv_wlanac_vap'+i+'_rx_error';
			rx_drop_key='kv_wlanac_vap'+i+'_rx_drop';
			rx_unicast_key='kv_wlanac_vap'+i+'_rx_ucast_pkts';
			rx_multicast_key='kv_wlanac_vap'+i+'_rx_mcast_pkts';
			rx_broadcast_key='kv_wlanac_vap'+i+'_rx_bcast_pkts';

			tx_byte_key='kv_wlanac_vap'+i+'_tx_byte';
			tx_pkts_key='kv_wlanac_vap'+i+'_tx_pkg';
			tx_errs_key='kv_wlanac_vap'+i+'_tx_error';
			tx_drop_key='kv_wlanac_vap'+i+'_tx_drop';
			tx_unicast_key='kv_wlanac_vap'+i+'_tx_ucast_pkts';
			tx_multicast_key='kv_wlanac_vap'+i+'_tx_mcast_pkts';
			tx_broadcast_key='kv_wlanac_vap'+i+'_tx_bcast_pkts';

			var v_rx_byte=fvt_meta_config(rx_byte_key);
			var v_rx_pkts=fvt_meta_config(rx_pkts_key);
			var v_rx_errs=fvt_meta_config(rx_errs_key);
			var v_rx_drop=fvt_meta_config(rx_drop_key);
			var v_rx_unicast=fvt_meta_config(rx_unicast_key);
			var v_rx_multicast=fvt_meta_config(rx_multicast_key);
			var v_rx_broadcast=fvt_meta_config(rx_broadcast_key);

			var v_tx_byte=fvt_meta_config(tx_byte_key);
			var v_tx_pkts=fvt_meta_config(tx_pkts_key);
			var v_tx_errs=fvt_meta_config(tx_errs_key);
			var v_tx_drop=fvt_meta_config(tx_drop_key);
			var v_tx_unicast=fvt_meta_config(tx_unicast_key);
			var v_tx_multicast=fvt_meta_config(tx_multicast_key);
			var v_tx_broadcast=fvt_meta_config(tx_broadcast_key);

			document.write("<tr>");
			document.write("<td class='st_cell st_bold'>Wi-Fi 11ac ("+fvt_meta_config(ssid_key)+")</td>");
			document.write("<td>"+v_rx_byte+"</td>");
			document.write("<td>"+v_rx_pkts+"</td>");
			document.write("<td>"+v_rx_errs+"</td>");
			document.write("<td>"+v_rx_drop+"</td>");
			document.write("<td>"+v_rx_unicast+"</td>");
			document.write("<td>"+v_rx_multicast+"</td>");
			document.write("<td>"+v_rx_broadcast+"</td>");

			document.write("<td>"+v_tx_byte+"</td>");
			document.write("<td>"+v_tx_pkts+"</td>");
			document.write("<td>"+v_tx_errs+"</td>");
			document.write("<td>"+v_tx_drop+"</td>");
			document.write("<td>"+v_tx_unicast+"</td>");
			document.write("<td>"+v_tx_multicast+"</td>");
			document.write("<td>"+v_tx_broadcast+"</td>");

			document.write("</tr>");

			sum_rx_byte+=parseInt(v_rx_byte, 10);
			sum_rx_pkts+=parseInt(v_rx_pkts, 10);
			sum_rx_errs+=parseInt(v_rx_errs, 10);
			sum_rx_drop+=parseInt(v_rx_drop, 10);
			sum_rx_unicast+=parseInt(v_rx_unicast, 10);
			sum_rx_multicast+=parseInt(v_rx_multicast, 10);
			sum_rx_broadcast+=parseInt(v_rx_broadcast, 10);

			sum_tx_byte+=parseInt(v_tx_byte, 10);
			sum_tx_pkts+=parseInt(v_tx_pkts, 10);
			sum_tx_errs+=parseInt(v_tx_errs, 10);
			sum_tx_drop+=parseInt(v_tx_drop, 10);
			sum_tx_unicast+=parseInt(v_tx_unicast, 10);
			sum_tx_multicast+=parseInt(v_tx_multicast, 10);
			sum_tx_broadcast+=parseInt(v_tx_broadcast, 10);
		}

		document.write("<tr>");
		document.write("<td class='st_cell st_bold'>Total Wi-Fi 11ac</td>");
		document.write("<td>"+sum_rx_byte+"</td>");
		document.write("<td>"+sum_rx_pkts+"</td>");
		document.write("<td>"+sum_rx_errs+"</td>");
		document.write("<td>"+sum_rx_drop+"</td>");
		document.write("<td>"+sum_rx_unicast+"</td>");
		document.write("<td>"+sum_rx_multicast+"</td>");
		document.write("<td>"+sum_rx_broadcast+"</td>");

		document.write("<td>"+sum_tx_byte+"</td>");
		document.write("<td>"+sum_tx_pkts+"</td>");
		document.write("<td>"+sum_tx_errs+"</td>");
		document.write("<td>"+sum_tx_drop+"</td>");
		document.write("<td>"+sum_tx_unicast+"</td>");
		document.write("<td>"+sum_tx_multicast+"</td>");
		document.write("<td>"+sum_tx_broadcast+"</td>");
		document.write("</tr>");
	}
}

function statistics_clear()
{
	fvt_paramlist_clear();
	fvt_paramlist_cat_str("statistics_clear", "1");
	fvt_paramlist_presubmit("fWlan_static");
	document.getElementById("fWlan_static").submit();
}

</script>
</head>

<body align="left" onload="reloadw();">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="fWlan_static" name="fWlan_static" method="post" action=>
<fieldset>
	<div class="lv1_title">
	Status&nbsp;&gt;&nbsp;WAN / (W)LAN Statistics
	</div>
</fieldset>

<div class="div1_indent lv3_new">
	<!--wan 0~7-->
	<div class="bold1 l_wifiaccess1 rowh" style="text-align:left;">WAN</div>
	<div id="wan_table0_hr"><hr class="hr2"></div>
	<table border="2" class="statistics_Tbl">
		<tr style="font-family:Arial;font-weight:bold">
			<td rowspan="2" style="padding-left:10px;padding-right:10px;">Interface</td>
			<td colspan="8">Received</td>
			<td colspan="8">Transmitted</td>
		</tr>
		<tr>
			<td class="st_cell">Bytes</td>
			<td class="st_cell">Pkts</td>
			<td class="st_cell">Errs</td>
			<td class="st_cell">Drops</td>
			<td class="st_cell">Unicast</td>
			<td class="st_cell">Multicast</td>
			<td class="st_cell">Broadcast</td>
			<td class="st_cell">Rate</td>
			<td class="st_cell">Bytes</td>
			<td class="st_cell">Pkts</td>
			<td class="st_cell">Errs</td>
			<td class="st_cell">Drops</td>
			<td class="st_cell">Unicast</td>
			<td class="st_cell">Multicast</td>
			<td class="st_cell">Broadcast</td>
			<td class="st_cell">Rate</td>
		</tr>

		<script language="javascript" type="text/javascript">
			list_wan_statistics();
		</script>
	</table>
	</br></br>

	<!--Lan 0~3 & WLAN 0~3-->
	<div class="bold1 l_wifiaccess1 rowh" style="text-align:left;">LAN</div>
	<div id="lan_table0_hr"><hr class="hr2"></div>
	<table border="2" class="statistics_Tbl">
		<tr style="font-family:Arial;font-weight:bold">
			<td rowspan="2">Interface</td>
			<td colspan="8">Received</td>
			<td colspan="8">Transmitted</td>
		</tr>
		<tr>
			<td class="st_cell">Bytes</td>
			<td class="st_cell">Pkts</td>
			<td class="st_cell">Errs</td>
			<td class="st_cell">Drops</td>
			<td class="st_cell">Unicast</td>
			<td class="st_cell">Multicast</td>
			<td class="st_cell">Broadcast</td>
			<td class="st_cell">Rate(bps)</td>
			<td class="st_cell">Bytes</td>
			<td class="st_cell">Pkts</td>
			<td class="st_cell">Errs</td>
			<td class="st_cell">Drops</td>
			<td class="st_cell">Unicast</td>
			<td class="st_cell">Multicast</td>
			<td class="st_cell">Broadcast</td>
			<td class="st_cell">Rate(bps)</td>
		</tr>

		<script language="javascript" type="text/javascript">
			list_lan_statistics();
			list_wlan_statistics();
			if (ac_installed == "1") list_wlanac_statistics();
		</script>
	</table>
	</br>
	<table><tbody>
		<tr>
			<td class="button_center">
				<input ctrlflip="etc" type="button" onclick="statistics_clear();" name="applybtn" value="Clear" class="width_apply">
			</td>
		</tr>
	</tbody></table>

</div>

</form>
</td></tr>
</tbody></table>
</div>

<br>
</body>
</html>

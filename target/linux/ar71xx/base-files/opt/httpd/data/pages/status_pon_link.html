<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>Status &gt; GPON</title>
<meta http-equiv="Content-Language" content="English">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="pragma" content="no-cache">
<link rel="stylesheet" type="text/css" href="../css/style.css" media="screen">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="screen">
<script language="javascript" type="text/javascript" src="../js//menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>
<style type="text/css">
div.rowh{color:#00008B}
div.cells{color:#2F4F4F}
</style>

<script language="javascript" type="text/javascript">

function reloadPage()
{
	window.location.replace("/cgi-bin/wwwctrl.cgi?action=pon_link");
	timer = setTimeout("reloadPage()",30000);
}

function reloadw()
{
	timer = setTimeout("reloadPage()",30000);
}

function log10(n)
{
	if(isNaN(n))
		return -1;

	return (Math.log(n) / Math.log(10))
}

function uwToDbm(uw)
{
	if(isNaN(uw))
		return 0;
	/*
	var dBm = 10*log10(uw*0.001);
	if(isNaN(dBm) || (dBm.indexOf("Infinity ")>-1) )
		dBm="--";

		return dBm;
		*/
	return ( 10*log10(uw*0.001) );
}

function fvt_form_init(form_name)
{
	var val = parseFloat(fvt_meta_config('anig_temperature'),10);
		document.getElementById("anig_temperature").innerHTML = val+' (℃)';

	if( val >= convertTempHi(fvt_meta_config('kv_temp_high_thresh')) || val <= convertTempLow(fvt_meta_config('kv_temp_low_thresh')) )
			document.getElementById('anig_temperature').className  = 'usr_tr1 pon_alarm';
	else if( val >= convertTempHi(fvt_meta_config('kv_temp_warning_high_thresh')) ||  val <= convertTempLow(fvt_meta_config('kv_temp_warning_low_thresh')) )
			document.getElementById('anig_temperature').className  = 'usr_tr1 pon_warning';

	val = parseFloat(fvt_meta_config('anig_vcc'),10);
	document.getElementById("anig_vcc").innerHTML = val+' (Volts)';

	if( val >= convertVccHi(fvt_meta_config('kv_volt_high_thresh')) || val <= convertVccLow(fvt_meta_config('kv_volt_low_thresh')) )
			document.getElementById('anig_vcc').className  = 'usr_tr2 pon_alarm';
	else if( val >= convertVccHi(fvt_meta_config('kv_volt_warning_high_thresh')) || val <= convertVccLow(fvt_meta_config('kv_volt_warning_low_thresh')) )
			document.getElementById('anig_vcc').className  = 'usr_tr2 pon_warning';

	val = parseFloat(fvt_meta_config('anig_bias'),10);
	document.getElementById("anig_bias").innerHTML = val+' (mA)';

	if( val >= convertBiasHi(fvt_meta_config('kv_bias_high_thresh')) || val <= convertBiasLow(fvt_meta_config('kv_bias_low_thresh')) )
			document.getElementById('anig_bias').className	= 'usr_tr1 pon_alarm';
	else if( val >= convertBiasHi(fvt_meta_config('kv_bias_warning_high_thresh')) || val <= convertBiasLow(fvt_meta_config('kv_bias_warning_low_thresh')) )
			document.getElementById('anig_bias').className	= 'usr_tr1 pon_warning';

	val = parseFloat(fvt_meta_config('anig_tx'),10);
	document.getElementById("anig_tx").innerHTML =	val+' (dBm)';
	if( isNaN(val) || val >=  convertTxHi(fvt_meta_config('kv_tx_power_high_thresh')) || val <= convertTxLow(fvt_meta_config('kv_tx_power_low_thresh'))	 )
		document.getElementById("anig_tx").className = 'usr_tr2 pon_alarm';
	else if( val >= convertTxHi(fvt_meta_config('kv_tx_power_warning_high_thresh')) || val <= convertTxLow(fvt_meta_config('kv_tx_power_warning_low_thresh')) )
		document.getElementById("anig_tx").className = 'usr_tr2 pon_warning';


	val = parseFloat(fvt_meta_config('anig_rx'),10);
	document.getElementById("anig_rx").innerHTML =	val+' (dBm)';
	if(	 isNaN(val) || val >=  convertRxHi(fvt_meta_config('kv_rx_power_high_thresh')) || val <= convertRxLow(fvt_meta_config('kv_rx_power_low_thresh')) )
		document.getElementById("anig_rx").className = 'usr_tr1 pon_alarm';
	else if( val >= convertRxHi(fvt_meta_config('kv_rx_power_warning_high_thresh')) || val <= convertRxLow(fvt_meta_config('kv_rx_power_warning_low_thresh')) )
		document.getElementById("anig_rx").className = 'usr_tr1 pon_warning';
}

function fvt_form_submit(form_name)
{
	fvt_paramlist_clear();
	fvt_paramlist_presubmit(form_name);
}

function convertRxHi(val)
{
	val = parseInt(val,10);

	if(val == -1)
		return "-4.00";
	else
		return val/(-2);
}

function convertRxLow(val)
{
	val = parseInt(val,10);

	if(val == -1)
		return "-30.00";
	else
		return val/(-2);
}

function convertTxHi(val)
{
	val = parseInt(val,10);

	if(val == -127)
		return "7.00";
	else
		return val/2;
}

function convertTxLow(val)
{
	val = parseInt(val,10);

	if(val == -127)
		return "-6.00";
	else
		return val/2;
}

function convertTempHi(val)
{
	val = parseInt(val,10);

	if(val == 32768)
		return "127";
	else
		return val/256;
}

function convertTempLow(val)
{
	val = parseInt(val,10);

	if(val == 32768)
		return "-127";
	else
		return val/256;
}

function convertVccHi(val)
{
	val = parseInt(val,10);

	if(val == 65535)
		return "6.55";
	else
		return val/10000;
}

function convertVccLow(val)
{
	val = parseInt(val,10);

	if(val == 65535)
		return "0";
	else
		return val/10000;
}

function convertBiasHi(val)
{
	val = parseInt(val,10);

	if(val == 65535)
		return "131.00";
	else
		return val/500;
}

function convertBiasLow(val)
{
	val = parseInt(val,10);

	if(val == 65535)
		return "0.00";
	else
		return val/500;
}

function reload_value()
{

	document.getElementById("pon_status").innerHTML = fvt_meta_config('pon_status');
	if( fvt_meta_config('pon_status') == "O5" )
		document.getElementById('pon_status').className	= 'usr_tr2 pon_normal';
	else
		document.getElementById('pon_status').className	= 'usr_tr2 pon_alarm';

	document.getElementById("omci_anig_temperature_warning_high").innerHTML = convertTempHi(fvt_meta_config('kv_temp_warning_high_thresh'))+" (℃)";
	document.getElementById("omci_anig_temperature_warning_low").innerHTML = convertTempLow(fvt_meta_config('kv_temp_warning_low_thresh'))+" (℃)";
	document.getElementById("omci_anig_temperature_high").innerHTML = convertTempHi(fvt_meta_config('kv_temp_high_thresh'))+" (℃)";
	document.getElementById("omci_anig_temperature_low").innerHTML = convertTempLow(fvt_meta_config('kv_temp_low_thresh'))+" (℃)";

	document.getElementById("omci_anig_vcc_warning_high").innerHTML = convertVccHi(fvt_meta_config('kv_volt_warning_high_thresh'))+" (Volts)";
	document.getElementById("omci_anig_vcc_warning_low").innerHTML = convertVccLow(fvt_meta_config('kv_volt_warning_low_thresh'))+" (Volts)";
	document.getElementById("omci_anig_vcc_high").innerHTML = convertVccHi(fvt_meta_config('kv_volt_high_thresh'))+" (Volts)";
	document.getElementById("omci_anig_vcc_low").innerHTML = convertVccLow(fvt_meta_config('kv_volt_low_thresh'))+" (Volts)";

	document.getElementById("omci_anig_bias_warning_high").innerHTML = convertBiasHi(fvt_meta_config('kv_bias_warning_high_thresh'))+" (mA)";
	document.getElementById("omci_anig_bias_warning_low").innerHTML = convertBiasLow(fvt_meta_config('kv_bias_warning_low_thresh'))+" (mA)";
	document.getElementById("omci_anig_bias_high").innerHTML = convertBiasHi(fvt_meta_config('kv_bias_high_thresh'))+" (mA)";
	document.getElementById("omci_anig_bias_low").innerHTML = convertBiasLow(fvt_meta_config('kv_bias_low_thresh'))+" (mA)";

	document.getElementById("anig_tx").innerHTML = fvt_meta_config('anig_tx')+" (dbm)";
	document.getElementById("omci_high_anig_tx_warning").innerHTML = convertTxHi(fvt_meta_config('kv_tx_power_warning_high_thresh'))+" (dbm)";
	document.getElementById("omci_low_anig_tx_warning").innerHTML = convertTxLow(fvt_meta_config('kv_tx_power_warning_low_thresh'))+" (dbm)";
	document.getElementById("omci_high_anig_tx").innerHTML = convertTxHi(fvt_meta_config('kv_tx_power_high_thresh'))+" (dbm)";
	document.getElementById("omci_low_anig_tx").innerHTML = convertTxLow(fvt_meta_config('kv_tx_power_low_thresh'))+" (dbm)";
	//document.getElementById("anig_rx").innerHTML = fvt_meta_config('anig_rx')+" (dbm)";
	document.getElementById("omci_high_anig_rx_warning").innerHTML = convertRxHi( fvt_meta_config('kv_rx_power_warning_high_thresh'))+" (dbm)";
	document.getElementById("omci_low_anig_rx_warning").innerHTML = convertRxLow(fvt_meta_config('kv_rx_power_warning_low_thresh'))+" (dbm)";
	document.getElementById("omci_high_anig_rx").innerHTML = convertRxHi(fvt_meta_config('kv_rx_power_high_thresh'))+" (dbm)";
	document.getElementById("omci_low_anig_rx").innerHTML = convertRxLow(fvt_meta_config('kv_rx_power_low_thresh'))+" (dbm)";
}

</script>

</head>

<body onload="fvt_form_init('util_gpon_form'); reloadw(); reload_value();" leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#FFFFFF">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="util_gpon_form" name="util_gpon_form" method="post">

	<fieldset>
		<div class="lv1_title">Status&nbsp;&gt;&nbsp;PON Link Status</div>
	</fieldset>

		<table cellpadding="0" cellspacing="10" width="750" border="0">
		<tbody><tr>
			<td width="10">&nbsp;</td>
			<td valign="top">
			<br>
			 <table cellpadding="0" cellspacing="0" border="0">
				<tbody>
				<tr class="lv1_title">
					<td colspan="2"><div class="lv1_new rowh">PON Link Status:</div></td>
				</tr>
				<tr>
					<td class="usr_tr2" height="18" width="160px">
					<table cellpadding="0" cellspacing="0" border="0">
						<tbody><tr>
							<td height="18" width="5%">&nbsp;</td>
							<td height="18" width="95%"><b>PON status </b></td>
						</tr>
					</tbody></table>
					</td>
					<td class="usr_tr2" height="18" id="pon_status" width="160px"></td>
					<td width="175px" class="usr_tr2" height="18" style="display:">&nbsp;</td>
					<td width="175px" class="usr_tr2" height="18" style="display:">&nbsp;</td>
				</tr>
			</tbody></table>
			<br>
			<br>
<!-- ####################### GPONParam ########################## -->
			<table cellpadding="0" cellspacing="0" border="0">
				<tbody>
				<tr class="lv1_title">
					<td colspan="2"><div class="lv1_new rowh">Transceiver Status:</div></td>
				</tr>
				<tr class="lv1_title">
					<td width="160px"><div class="lv2_new cells">Parameter</div></td>
					<th width="160px"><div class="lv2_new cells">Value</div></th>
					<th width="175px"><div class="lv2_new cells">Warning Threshold</div></th>
					<th width="175px"><div class="lv2_new cells">Alarm Threshold</div></th>
				</tr>
				<tr style="height:5px;">
					<td colspan="9">
						<div><hr class="hr2"></div>
					</td>
				</tr>

				<tr>
					<td class="usr_tr1" >
					<table cellpadding="0" cellspacing="0" border="0">
					<tbody><tr>
						<td width="5%">&nbsp;</td>
						<td height="18" width="95%"><b>Temperature</b></td>
					</tr>
					</tbody></table>
					</td>
					<td class="usr_tr1 pon_normal" colspan="1" height="18" id="anig_temperature">
						<script>
							/*
							var val = parseFloat(fvt_meta_config('anig_temperature'),10).toFixed(2);
							document.getElementById("anig_temperature").innerHTML = val;

							if( val > convertTempHi(fvt_meta_config('kv_temp_high_thresh')) )
									document.getElementById('anig_temperature').className  = 'usr_tr1 pon_alarm';
							else if( val > convertTempHi(fvt_meta_config('kv_temp_warning_high_thresh')) )
									document.getElementById('anig_temperature').className  = 'usr_tr1 pon_warning';
							*/
						</script>
					(℃)</td>

					<td style="display:" class="usr_tr1" height="18">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_anig_temperature_warning_high">(℃)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_anig_temperature_warning_low">(℃)</td>
						</tr>
						</tbody></table>
					</td>

					<td class="usr_tr1" colspan="1" height="18" width="175px">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_anig_temperature_high">(℃)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_anig_temperature_low">(℃)</td>
						</tr>
						</tbody></table>
					</td>
				</tr>

				<tr>
					<td class="usr_tr2" height="18" width="150px">
					<table cellpadding="0" cellspacing="0" width="100%" border="0">
					<tbody><tr>
						<td height="18" width="5%">&nbsp;</td>
						<td height="18" width="95%"><b>Voltage</b></td>
					</tr>
					</tbody></table>
					</td>
					<td class="usr_tr2 pon_normal" height="18" id="anig_vcc">
						<script>
							/*
							var val = parseFloat(fvt_meta_config('anig_vcc'),10).toFixed(2);
							document.getElementById("anig_vcc").innerHTML = val;

							if( val > convertVccHi(fvt_meta_config('kv_volt_high_thresh')) )
									document.getElementById('anig_vcc').className  = 'usr_tr2 pon_alarm';
							else if( val > convertVccHi(fvt_meta_config('kv_volt_warning_high_thresh')) )
									document.getElementById('anig_vcc').className  = 'usr_tr2 pon_warning';
							*/
						</script>
					(Volts)</td>

					<td style="display:" class="usr_tr2" height="18">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_anig_vcc_warning_high">(Volts)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_anig_vcc_warning_low">(Volts)</td>
						</tr>
						</tbody></table>
					</td>

					<td class="usr_tr2" colspan="1" height="18" width="150px">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_anig_vcc_high">(Volts)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_anig_vcc_low">(Volts)</td>
						</tr>
						</tbody></table>
					</td>
				</tr>

				<tr>
					<td class="usr_tr1" height="18" width="150px">
					<table cellpadding="0" cellspacing="0" width="100%" border="0">
					<tbody><tr>
						<td height="18" width="5%">&nbsp;</td>
						<td height="18" width="95%"><b>Bias Current </b></td>
					</tr>
					</tbody></table>
					</td>
					<td class="usr_tr1 pon_normal" height="18" id="anig_bias">
						<script>
							/*
							var val = parseFloat(fvt_meta_config('anig_bias'),10).toFixed(2);
							document.getElementById("anig_bias").innerHTML = val;

							if( val > convertBiasHi(fvt_meta_config('kv_bias_high_thresh')) )
									document.getElementById('anig_bias').className	= 'usr_tr1 pon_alarm';
							else if( val > convertBiasHi(fvt_meta_config('kv_bias_warning_high_thresh')) )
									document.getElementById('anig_bias').className	= 'usr_tr1 pon_warning';
							*/
						</script>
					(mA)</td>

					<td style="display:" class="usr_tr1" height="18">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_anig_bias_warning_high">(mA)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_anig_bias_warning_low">(mA)</td>
						</tr>
						</tbody></table>
					</td>

					<td class="usr_tr1" colspan="1" height="18" width="150px">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_anig_bias_high">(mA)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_anig_bias_low">(mA)</td>
						</tr>
						</tbody></table>
					</td>
				</tr>

				<tr>
					<td class="usr_tr2" height="18" width="150px">
					<table cellpadding="0" cellspacing="0" width="100%" border="0">
					<tbody><tr>
						<td height="18" width="5%">&nbsp;</td>
						<td height="18" width="95%"><b>ONT Tx Power </b></td>
					</tr>
					</tbody></table>
					</td>
					<td class="usr_tr2 pon_normal" height="18" id="anig_tx">(dBm)</td>

					</td>
					<td style="display:" class="usr_tr2" height="18">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_high_anig_tx_warning">(dBm)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_low_anig_tx_warning">(dBm)</td>
						</tr>
						</tbody></table>
					</td>

					<td class="usr_tr2" colspan="1" height="18" width="150px">
					<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_high_anig_tx">(dBm)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_low_anig_tx">(dBm)</td>
						</tr>
					</tbody></table>

				</tr>

				<tr>
					<td class="usr_tr1" height="18" width="150px">
					<table cellpadding="0" cellspacing="0" width="100%" border="0">
					<tbody><tr>
						<td height="18" width="5%">&nbsp;</td>
						<td height="18" width="95%"><b>ONT Rx Power </b></td>
					</tr>
					</tbody></table>
					</td>
					<td class="usr_tr1 pon_normal" height="18" id="anig_rx">(dBm)</td>

					<td style="display:" class="usr_tr1" height="18">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_high_anig_rx_warning">(dBm)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_low_anig_rx_warning">(dBm)</td>
						</tr>
						</tbody></table>
					</td>

					<td class="usr_tr1" colspan="1" height="18" width="175px">
						<table cellpadding="0" cellspacing="0" border="0"><tbody>
						<tr>
							<td height="18" width="35px">High:</td>
							<td id="omci_high_anig_rx">(dBm)</td>
						</tr>
						<tr>
							<td height="18" width="35px">Low:</td>
							<td id="omci_low_anig_rx">(dBm)</td>
						</tr>
						</tbody></table>
					</td>
				</tr>
			  </tbody></table>
			</td>
		</tr>

		</tbody></table>

</tr></tbody></table></form>
</td></tr>
</tbody></table>
</div>

</body></html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>
<style type="text/css">
td.darkgray{color: #808080;}
td.lightgray{color: #D3D3D3;}

table.TB_COLLAPSE {
  border-collapse:collapse;
}
table.TB_COLLAPSE caption {
  padding:10px;
  font-size:24px;
  background-color:#f3f6f9;
}
table.TB_COLLAPSE thead th {
  padding:5px 0px;
  color:#fff;
  background-color:#915957;
}
table.TB_COLLAPSE tbody td {
  padding:5px 0px;
  color:#888;
  text-align:center;
  border:1px solid #915957;
}

table.TB_COLLAPSE tbody td.hlight {
  padding:5px 0px;
  color:#333;
  text-align:center;
  border:1px solid #915957;
}
</style>
<script language="javascript" type="text/javascript">

var DHCPSEnable;
var DhcpRelayEnable;

var Adv_Send =fvt_meta_config('lan0_send_adv');
var Adv_ManagedFlag =fvt_meta_config('lan0_manage_flag');
var Adv_OtherConf =fvt_meta_config('lan0_other_flag');
var Adv_OnLink = fvt_meta_config('lan0_onlink');
var Adv_Autonomous = fvt_meta_config('lan0_autonomous');
var Adv_RouterAddr = fvt_meta_config('lan0_routeraddr');
var Dhcp6PfxFr=fvt_meta_config('lan0_prefix');

var msg_notice = "Change setting will stop connection before restart service";
var ptm_num="1";
var atm_num="0";

var i=0;
var IPv6_s=0,IPv6_e=0,DHCPenable=0,DHCP_s=0,DHCP_e=0;
var	DHCPop61_duid;
var option_max=4;

function valueMatch(s1, s2, match_return)
{
	if(s1 == s2)
		return match_return;
	else
		return "";
}

function setValue(val)
{
	document.getElementById("mm_"+val).value =
		(document.getElementById("id_"+val).checked)?"1":"0";
	//(document.getElementById("id_"+val).checked)?"on":"off";
}

function setPrefixValue(val)
{
	if (document.getElementById("id_UserSet").checked)
	{
		document.getElementById("mm_"+val).value =0;
		document.getElementById("id_USvalue").disabled=false;
	}
	else if (document.getElementById("id_Dhcpv6").checked)
	{
		document.getElementById("mm_"+val).value =1;
		document.getElementById("id_USvalue").disabled=true;
	}
	else
	{
		document.getElementById("mm_"+val).value =2;
		document.getElementById("id_USvalue").disabled=true;
	}
}

function changedhcpIP(index)
{
	document.getElementById("id_DHCPSIPStart"+index).value = document.getElementById("id_LanIPAddr"+index).value;
	document.getElementById("id_DHCPSIPEnd"+index).value = document.getElementById("id_LanIPAddr"+index).value;
	//document.getElementById("id_PoolIPStart"+index).value = document.getElementById("id_LanIPAddr"+index).value;
	//document.getElementById("id_PoolIPEnd"+index).value = document.getElementById("id_LanIPAddr"+index).value;
	document.getElementById("id_DhcpDnsServer1"+index).value = document.getElementById("id_LanIPAddr"+index).value;
}

function check_process()
{
	var process="Success";
	if (process=="Existed")
		warn_wait();
		//alert("Please wait!!Another client is upgading firmware.");
}

function isBridgeMode()
{
	for (i=0; i< document.lansetting_form.elements.length; i++)
	{
		if(document.lansetting_form.elements[i].name == "DHCPSEnable")
			DHCPenable = i;
	}
	if ((ptm_num=="0")&&(atm_num=="0"))
	{
		for (i=DHCPenable;i<document.lansetting_form.elements.length-1;i++)
			document.lansetting_form.elements[i].disabled=true;
	}
}

function enableItem(value)
{
	for (i=0; i< document.lansetting_form.elements.length; i++)
	{
		if(document.lansetting_form.elements[i].name == "DHCPSRelayServer1")
			DHCP_s = i;
		if(document.lansetting_form.elements[i].name == "DHCPSNotAssignIP10")
			DHCP_e = i;
	}
	if (value==1)
	{
		for (i=DHCP_s;i<DHCP_e;i++)
			document.lansetting_form.elements[i].disabled=false;

	}
	else
	{
		for (i=DHCP_s;i<DHCP_e;i++)
			document.lansetting_form.elements[i].disabled=true;
	}
}

function dhcpChange()
{

	if ( document.lansetting_form.DHCPSEnable.selectedIndex == 0 )
	{
		enableItem(0);
		document.getElementById("dhcpRelaySrv1").style.display="none";
		document.getElementById("dhcpRelaySrv2").style.display="none";
		document.getElementById("RelaySrv2Vid").style.display="none";
		document.getElementById("dhcpServerTbl").style.display="none";
		document.getElementById("dhcpServerTb2").style.display="none";
		document.getElementById("dhcpServerTb3").style.display="none";
		document.getElementById("dhcpServerTb4").style.display="none";
		document.getElementById("dhcpServerTb5").style.display="none";
		document.getElementById("dhcpServerTb6").style.display="none";
		document.getElementById("id_dhcp_option_tb").style.display="none";
	}
	else if ( document.lansetting_form.DHCPSEnable.selectedIndex == 1 )
	{
		enableItem(1);
		for (i=1;i<=4;i++)
		{
			document.getElementById("id_DHCPSRelayServer1_"+i).disabled=true;
			document.getElementById("id_DHCPSRelayServer2_"+i).disabled=true;
		}
		document.lansetting_form.DHCPSRelayServer1.disabled=true;
		document.lansetting_form.DHCPSRelayServer2.disabled=true;
		document.lansetting_form.DHCPSRelayServer2VID.disabled=true;
		document.getElementById("dhcpRelaySrv1").style.display="none";
		document.getElementById("dhcpRelaySrv2").style.display="none";
		document.getElementById("RelaySrv2Vid").style.display="none";
		document.getElementById("dhcpServerTbl").style.display="";
		document.getElementById("dhcpServerTb2").style.display="";
		document.getElementById("dhcpServerTb3").style.display="";
		document.getElementById("dhcpServerTb4").style.display="";
		document.getElementById("dhcpServerTb5").style.display="";
		document.getElementById("dhcpServerTb6").style.display="";
		document.getElementById("id_dhcp_option_tb").style.display="";
	}
	else
	{
		enableItem(0);
		for (i=1;i<=4;i++)
		{
			document.getElementById("id_DHCPSRelayServer1_"+i).disabled=false;
			document.getElementById("id_DHCPSRelayServer2_"+i).disabled=false;
		}
		document.lansetting_form.DHCPSRelayServer1.disabled=false;
		document.lansetting_form.DHCPSRelayServer2.disabled=false;
		document.lansetting_form.DHCPSRelayServer2VID.disabled=false;
		document.getElementById("dhcpRelaySrv1").style.display="";
		document.getElementById("dhcpRelaySrv2").style.display="";
		document.getElementById("RelaySrv2Vid").style.display="";
		document.getElementById("dhcpServerTbl").style.display="none";
		document.getElementById("dhcpServerTb2").style.display="none";
		document.getElementById("dhcpServerTb3").style.display="none";
		document.getElementById("dhcpServerTb4").style.display="none";
		document.getElementById("dhcpServerTb5").style.display="none";
		document.getElementById("dhcpServerTb6").style.display="none";
		document.getElementById("id_dhcp_option_tb").style.display="none";
	}
	if (Dhcp6PfxFr==0)
		document.getElementById("id_USvalue").disabled=false;
	else
		document.getElementById("id_USvalue").disabled=true;
}

function check_symbol(name)
{
	if (!isBlank(name))
	{
 		for(i=0;i<name.length;i++)
 		{
			c=name.charAt(i);
			if((c!='_')&&(c!='-')&&(c!='.')&&(!((c>='a')&&(c<='z')))&&(!((c>='A')&&(c<='Z')))&&(!((c>='0')&&(c<='9'))))
				return false;
		}
 	}
	return true;
}

function checkClientRange(gw,start,end)
{
	var gw_d,start_d,end_d;

	gw_d = getDigit(gw,4);
	gw_d +=	getDigit(gw,3)*256;
	gw_d +=	getDigit(gw,2)*256;
	gw_d +=	getDigit(gw,1)*256;

	start_d	= getDigit(start,4);
	start_d	+= getDigit(start,3)*256;
	start_d	+= getDigit(start,2)*256;
	start_d	+= getDigit(start,1)*256;

	end_d =	getDigit(end,4);
	end_d += getDigit(end,3)*256;
	end_d += getDigit(end,2)*256;
	end_d += getDigit(end,1)*256;
	if( start_d <= end_d ){
		if((start_d <= gw_d) &&	(gw_d <= end_d))
			return false;
		else
			return true;
	}

	return false;
}

function checkIPtable()
{
	var i=0,j=0;
	var item1="";
	var item2="";

	//Check static table
	for (i=1;i<=10;i++)
	{
		item1=document.getElementById("id_DHCPSStaticAssignIP"+i);

		if (item1.value.length==0)
			continue;

		if (item1.value == document.lansetting_form.LanIPAddr.value)
		{
			msg="Static Lease ip";
			no=i;
			warn_invalid_int(msg,no);
			//alert(msg +" " +no + " is invalid")
			return false;
		}
		for (j=i+1;j<10;j++)
		{
			item2=document.getElementById("id_DHCPSStaticAssignIP"+j);
			if (item2.value.length==0)
				continue;

			if (item2.value==item1.value)
			{
				msg="Static Lease ip";
				no=j;
				warn_invalid_int(msg,no);
				//alert(msg +" " +no + " is invalid");
				return false;
			}
		}
	}
	return true;
}

function checkMACtable()
{
	var i=0,j=0;
	var item1="";
	var item2="";

	//Check static table
	for (i=1;i<=10;i++)
	{
		item1=document.getElementById("id_DHCPSStaticAssignMAC"+i);
		if (item1.value.length==0)
			continue;

		for (j=i+1;j<=10;j++)
		{
			item2=document.getElementById("id_DHCPSStaticAssignMAC"+j);
			if (item2.value.length==0)
				continue;

			if (item2.value==item1.value)
			{
				var title="Static Lease";
				var No=j;
				warn_invalidMAC(title,No);
				//alert(title + " MAC " + No + " is invalid!!");
				return false;
			}
		}
	}
	//Check not assign table
	for (i=1;i<=10;i++)
	{
		item1=document.getElementById("id_DHCPSStaticAssignMAC"+i);
		if (item1.value.length==0)
			continue;
		for (j=1;j<=10;j++)
		{
			item2=document.getElementById("id_DHCPSNotAssignIP"+j);
			if (item2.value.length==0)
				continue;
			if (item2.value==item1.value)
			{
				var title="Block Lease"
				var No=j;
				warn_invalidMAC(title,No);
				//alert(title + "MAC " + No + " is invalid!!");
				return false;
			}
		}
	}

	for (i=1;i<=10;i++)
	{
		item1=document.getElementById("id_DHCPSNotAssignIP"+i);
		if (item1.value.length==0)
			continue;
		for (j=i+1;j<=10;j++)
		{
			item2=document.getElementById("id_DHCPSNotAssignIP"+j);
			if (item2.value.length==0)
				continue;
			if (item2.value==item1.value)
			{
				var title="Block Lease"
				var No=j;
				warn_invalidMAC(title,No);
				//alert(title + " MAC " + No + " is invalid!!");
				return false;
			}
		}
	}
	return true;
}

function checkRelayVenderId()
{
	if (document.getElementById("id_DHCPSRelayServer2VID").value.length==0)
	{
		var item="Mapping Vender ID";
		warn_not_empty(item);
		//alert(item+" can't be empty!");
		return false;
	}
	return true;
}


function option_dnsrelay()
{
	var dnsrelay=false;
	if(document.lansetting_form.DhcpDNSRelay[0].checked) { dnsrelay = true;	}
	else { dnsrelay = false; }
}

function list_static_lease(num)
{
	var tmp = (num-0)-1;
	var static_mac = fvt_meta_config("dhcp_resv_mac"+tmp);
	var static_ip = fvt_meta_config("dhcp_resv_ip"+tmp);

	if (static_mac != '')
		var static_mac_spilt = static_mac.split(":");
	else
	{
		var static_mac_spilt = new Array();
		static_mac_spilt[0] = '';
		static_mac_spilt[1] = '';
		static_mac_spilt[2] = '';
		static_mac_spilt[3] = '';
		static_mac_spilt[4] = '';
		static_mac_spilt[5] = '';
	}
	if (static_ip != '')
		var static_ip_spilt = static_ip.split(".");
	else
	{
		var static_ip_spilt = new Array();
		static_ip_spilt[0] = '';
		static_ip_spilt[1] = '';
		static_ip_spilt[2] = '';
		static_ip_spilt[3] = '';
	}
	if (num<10)
	{
		document.write("<td><b>"+num+"&nbsp;</b></td>");
		document.write("<td dir='ltr' align='center'>");
		document.write("<input name='DHCPSStaticAssignMAC0"+num+"' id='id_DHCPSStaticAssignMAC"+num+"' value=\"\" type=\"hidden\">");
		document.write("<input id='id_dhcp_mac"+num+"_1' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[0]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_2' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[1]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_3' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[2]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_4' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[3]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_5' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[4]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_6' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[5]+"' type='text'>");
		document.write("</td>");
		document.write("<td dir='ltr' align='center' ctrlflip='right'>");
		document.write("<input name='DHCPSStaticAssignIP0"+num+"' id='id_DHCPSStaticAssignIP"+num+"' value=\"\" type=\"hidden\">");
		document.write("<input id='id_dhcp_ip"+num+"_1' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[0]+"' type='text'> . ");
		document.write("<input id='id_dhcp_ip"+num+"_2' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[1]+"' type='text'> . ");
		document.write("<input id='id_dhcp_ip"+num+"_3' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[2]+"' type='text'> . ");
		document.write("<input id='id_dhcp_ip"+num+"_4' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[3]+"' type='text'> ");
		document.write("</td>");
	}
	else
	{
		document.write("<td><b>"+num+"&nbsp;</b></td>");
		document.write("<td dir='ltr' align='center'>");
		document.write("<input name='DHCPSStaticAssignMAC"+num+"' id='id_DHCPSStaticAssignMAC"+num+"' value=\"\" type=\"hidden\">");
		document.write("<input id='id_dhcp_mac"+num+"_1' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[0]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_2' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[1]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_3' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[2]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_4' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[3]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_5' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[4]+"' type='text'>:");
		document.write("<input id='id_dhcp_mac"+num+"_6' size=\"1\" class=\"width_mac\" maxlength=\"2\" value='"+static_mac_spilt[5]+"' type='text'>");
		document.write("</td>");
		document.write("<td dir='ltr' align='center'>");
		document.write("<input name='DHCPSStaticAssignIP"+num+"' id='id_DHCPSStaticAssignIP"+num+"' value=\"\" type=\"hidden\">");
		document.write("<input id='id_dhcp_ip"+num+"_1' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[0]+"' type='text'> . ");
		document.write("<input id='id_dhcp_ip"+num+"_2' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[1]+"' type='text'> . ");
		document.write("<input id='id_dhcp_ip"+num+"_3' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[2]+"' type='text'> . ");
		document.write("<input id='id_dhcp_ip"+num+"_4' size=\"2\" class='width_ip' maxlength='3' value='"+static_ip_spilt[3]+"' type='text'> ");
		document.write("</td>");
	}
}

function list_block_lease(num)
{
	var block_mac = fvt_meta_config("dhcp0_st_"+num+"_desc");

	if (block_mac != '')
		var block_mac_spilt = block_mac.split(":");
	else
	{
		var block_mac_spilt = new Array();
		block_mac_spilt[0] = '';
		block_mac_spilt[1] = '';
		block_mac_spilt[2] = '';
		block_mac_spilt[3] = '';
		block_mac_spilt[4] = '';
		block_mac_spilt[5] = '';
	}
	if (num<10)
	{
		document.write("<td dir='ltr' align=\"center\">");
		document.write("<input name='DHCPSNotAssignIP0"+num+"' id='id_DHCPSNotAssignIP"+num+"' value=\"\" type=\"hidden\">");
		document.write("<input id='id_dhcp_noip"+num+"_1' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[0]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_2' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[1]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_3' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[2]+"' type='text'>.");
		document.write("<input id='id_dhcp_noip"+num+"_4' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[3]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_5' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[4]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_6' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[5]+"' type='text'>");

		document.write("</td>");
	}
	else
	{
		document.write("<td dir='ltr' align=\"center\">");
		document.write("<input name='DHCPSNotAssignIP"+num+"' id='id_DHCPSNotAssignIP"+num+"' value=\"\" type=\"hidden\">");
		document.write("<input id='id_dhcp_noip"+num+"_1' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[0]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_2' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[1]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_3' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[2]+"' type='text'>.");
		document.write("<input id='id_dhcp_noip"+num+"_4' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[3]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_5' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[4]+"' type='text'> . ");
		document.write("<input id='id_dhcp_noip"+num+"_6' size=\"1\" class=\"width_mac\" maxlength=\"4\" value='"+block_mac_spilt[5]+"' type='text'>");
		document.write("</td>");
	}
}

function saveChanges()
{
	var msg;
	var no;
	var i;
	var j;

	merge_ip("id_LanIPAddr","id_LanIPAddr1","id_LanIPAddr2","id_LanIPAddr3","id_LanIPAddr4");
	merge_ip("id_LanNetmask","id_LanNetmask1","id_LanNetmask2","id_LanNetmask3","id_LanNetmask4");
	merge_ip("id_DhcpNetmask","id_DhcpNetmask1","id_DhcpNetmask2","id_DhcpNetmask3","id_DhcpNetmask4");
	merge_ip("id_DhcpDnsServer","id_DhcpDnsServer11","id_DhcpDnsServer12","id_DhcpDnsServer13","id_DhcpDnsServer14");
	merge_ip("id_DhcpDnsServer2","id_DhcpDnsServer21","id_DhcpDnsServer22","id_DhcpDnsServer23","id_DhcpDnsServer24");
	merge_ip("id_Lan2IPAddr","id_Lan2IPAddr1","id_Lan2IPAddr2","id_Lan2IPAddr3","id_Lan2IPAddr4");
	merge_ip("id_Lan2Netmask","id_Lan2Netmask1","id_Lan2Netmask2","id_Lan2Netmask3","id_Lan2Netmask4");
	merge_ip("id_DHCPSIPStart","id_DHCPSIPStart1","id_DHCPSIPStart2","id_DHCPSIPStart3","id_DHCPSIPStart4");
	merge_ip("id_DHCPSIPEnd","id_DHCPSIPEnd1","id_DHCPSIPEnd2","id_DHCPSIPEnd3","id_DHCPSIPEnd4");
	merge_ip("id_DHCPSRelayServer1","id_DHCPSRelayServer1_1","id_DHCPSRelayServer1_2","id_DHCPSRelayServer1_3","id_DHCPSRelayServer1_4");
	merge_ip("id_DHCPSRelayServer2","id_DHCPSRelayServer2_1","id_DHCPSRelayServer2_2","id_DHCPSRelayServer2_3","id_DHCPSRelayServer2_4");

	if ((document.lansetting_form.LanIPAddr.value=="")||(document.lansetting_form.LanIPAddr.value==fvt_meta_config('lan1_ip')))
	{
		msg="IP Address";
		no="";
		warn_invalid(msg);
		//alert(msg +" " +no + " is invalid");
		return false;
	}

	// ip.match(/^169.254|0.0.0.0/g);
	if (document.lansetting_form.LanIPAddr.value.match(/192.168.[2][.]/g) )
	{
		alert("192.168.2.X section is reserved for system!");
		document.getElementById("id_LanIPAddr3").value="";
		document.getElementById("id_DHCPSIPStart3").value="";
		document.getElementById("id_DHCPSIPEnd3").value="";
		return false;
	}

	//if( document.getElementById('id_LanIPAddr4').value >=251 && document.getElementById('id_LanIPAddr4').value <=254)
	//{
	//	alert("Lan IP range 251~254 is reserved for system");
	//	return false;
	//}

	if ((document.lansetting_form.LanNetmask.value == "")||(!check_netmask(document.lansetting_form.LanNetmask.value)))
	{
		warn_invalid("Subnet Mask");
	 	//alert("Subnet Mask is invalid!");
		return false ;
	}

 	if (!check_ip(document.lansetting_form.LanIPAddr.value,document.lansetting_form.LanNetmask.value))
		{
			msg="IP Address";
			no="";
			warn_invalid(msg);
			//alert(msg +" " +no + " is invalid");
			return false;
		}

	if (document.lansetting_form.Lan2IPAddr.value=="" && document.lansetting_form.Lan2Netmask.value != "")
	{
		msg="Second IP Address";
		no="";
		warn_invalid(msg);
		//alert(msg +" " +no + " is invalid");
		return false;
	}

	if (document.lansetting_form.Lan2IPAddr.value!="" && document.lansetting_form.Lan2Netmask.value == "")
	{
		warn_invalid("Second Subnet Mask");
	 	//alert("Subnet Mask is invalid!");
		return false ;
	}
	if (document.lansetting_form.Lan2IPAddr.value !="" && document.lansetting_form.Lan2Netmask.value != "")
	{
		// ip.match(/^169.254|0.0.0.0/g);
		if (document.lansetting_form.Lan2IPAddr.value.match(/192.168.[2][.]/g) )
		{
			alert("192.168.2.X section is reserved for system!");
			document.getElementById("id_Lan2IPAddr3").value="";
			return false;
		}

		if (document.lansetting_form.Lan2IPAddr.value=="")
		{
			msg="Second IP Address";
			no="";
			warn_invalid(msg);
			//alert(msg +" " +no + " is invalid");
			return false;
		}

		if ((document.lansetting_form.Lan2Netmask.value == "")||(!check_netmask(document.lansetting_form.Lan2Netmask.value)))
		{
			warn_invalid("Second Subnet Mask");
		 	//alert("Subnet Mask is invalid!");
			return false ;
		}

	 	if (!check_ip(document.lansetting_form.Lan2IPAddr.value,document.lansetting_form.Lan2Netmask.value))
		{
			msg="Second IP Address";
			no="";
			warn_invalid(msg);
			//alert(msg +" " +no + " is invalid");
			return false;
		}
	}

	if(document.lansetting_form.AdvEnable.selectedIndex	== 1)
	{
		if(document.getElementById("id_MinRtr").value.length==0)
		{
			warn_not_empty("MinRtrAdvInterval");
			return false;
		}
		if(document.getElementById("id_MaxRtr").value.length==0)
		{
			warn_not_empty("MaxRtrAdvInterval");
			return false;
		}
		if(!check_integer(document.getElementById("id_MinRtr").value))
		{
			warn_int("MinRtrAdvInterval");
			return false;
		}
		if(!check_integer(document.getElementById("id_MaxRtr").value))
		{
			warn_int("MaxRtrAdvInterval");
			return false;
		}

		if (document.getElementById("id_MinRtr").value < 3 || document.getElementById("id_MinRtr").value > (document.getElementById("id_MaxRtr").value*0.75))
		{
			warn_invalid("MinRtrAdvInterval");
			//alert("MinRtrAdvInterval is invalid");
			return false;
		}
		if (document.getElementById("id_MaxRtr").value < 4 || document.getElementById("id_MaxRtr").value > 1800)
		{
			warn_invalid("MaxRtrAdvInterval");
		//	alert("MaxRtrAdvInterval is invalid");
			return false;
		}
	}

	if ( document.lansetting_form.DHCPSEnable.selectedIndex	== 1)
	{
		if (! check_ip(document.lansetting_form.DHCPSIPStart.value,document.lansetting_form.LanNetmask.value))
		{
			warn_invalid("DHCP Starting IP Address");
			//alert("DHCP Starting IP Address is invalid!");
			return false;
		}

		if( parseInt(document.getElementById('id_DHCPSIPEnd4').value,10) < parseInt(document.getElementById('id_DHCPSIPStart4').value,10) )
		{
			alert("DHCP pool end IP must over than start");
			return false;
		}

		//if( !(document.getElementById('id_DHCPSIPStart4').value >=0 && document.getElementById('id_DHCPSIPEnd4').value <251) &&
		//	!(document.getElementById('id_DHCPSIPStart4').value >254 && document.getElementById('id_DHCPSIPEnd4').value <=255) )
		//{
		//	alert("DHCP pool range 251~254 is reserved for system");
		//	return false;
		//}

		if ( !checkSubnet(document.lansetting_form.LanIPAddr.value,document.lansetting_form.LanNetmask.value,document.lansetting_form.DHCPSIPStart.value))
		{
			warn_invalid("DHCP Starting IP Address");
		//	alert("DHCP Starting IP Address is invalid!");
			document.lansetting_form.DHCPSIPStart.value = document.lansetting_form.DHCPSIPStart.defaultValue;
			return false;
		}

		if ( !check_ip(document.lansetting_form.DHCPSIPEnd.value,document.lansetting_form.LanNetmask.value))
		{
			warn_invalid("DHCP Ending IP Address");
			//alert("DHCP Ending IP Address is invalid!");
			return false;
		}

		if ( !checkSubnet(document.lansetting_form.LanIPAddr.value,document.lansetting_form.LanNetmask.value,document.lansetting_form.DHCPSIPEnd.value))
		{
			warn_invalid("DHCP Ending IP Address");
			//alert("DHCP Ending IP Address is invalid!");
			document.lansetting_form.DHCPSIPEnd.value = document.lansetting_form.DHCPSIPEnd.defaultValue;
			return false;
		}
		if ( !checkClientRange(document.lansetting_form.LanIPAddr.value,document.lansetting_form.DHCPSIPStart.value,document.lansetting_form.DHCPSIPEnd.value) )
		{
			warn_ipdhcp();
			//alert("Invalid DHCP range value! Please check IP address and DHCP Address!");
			return false;
		}
	}

	if ( document.lansetting_form.DHCPSEnable.selectedIndex	!= 1 )
	{
		if ( document.lansetting_form.lan_gateway.value=="")
			document.lansetting_form.lan_gateway.value = "0.0.0.0";

		if (document.lansetting_form.lan_gateway.value!="0.0.0.0")
		{
			if ( !check_ip(document.lansetting_form.lan_gateway.value))
			{
				msg="Gateway address";
				no="";
				warn_invalid(msg);
				//alert(msg +" " +no + " is invalid");
				return false;
			}

			if ( !checkSubnet(document.lansetting_form.LanIPAddr.value,document.lansetting_form.LanNetmask.value,document.lansetting_form.lan_gateway.value))
			{
				//alert("Invalid Gateway address.");
				warn_invalid("Gateway address");
				//alert("Gateway address is invalid.");
				document.lansetting_form.lan_gateway.value = document.lansetting_form.lan_gateway.defaultValue;
				return false;
			}
		}
	}

	if ( document.lansetting_form.DHCPSEnable.selectedIndex == 2 )
	{
		if (document.lansetting_form.DHCPSRelayServer1.value.length==0)
		{
			warn_not_empty_int("DHCP Relay Server",1);
			//alert("DHCP Relay Server1 can not be empty!");
			return false;
		}
		if (document.lansetting_form.DHCPSRelayServer1.value.length>0)
		{
			if ( !check_ip(document.lansetting_form.DHCPSRelayServer1.value))
			{
				warn_invalid_int("DHCP Relay Server",1);
				//alert("DHCP Relay Server1 is invalid!");
				return false;
			}
		}
		if (document.lansetting_form.DHCPSRelayServer2.value.length>0)
		{
			if ( !check_ip(document.lansetting_form.DHCPSRelayServer2.value))
			{
				warn_invalid_int("DHCP Relay Server",2);
				//alert("DHCP Relay Server2 is invalid!");
				return false;
			}
			if (!checkRelayVenderId())
				return false;
		}
		if(confirm_lan())
		{
			fvt_form_submit('lansetting_form');
			document.lansetting_form.submit();
			return true;
		}
		else
			return false;
		}

	if ( document.lansetting_form.DHCPSEnable.selectedIndex	== 1 )
	{
		if ( document.lansetting_form.DHCPSLeaseTime.value=="" )
		{
			warn_not_empty("DHCP Lease Time");
			//alert("DHCP Lease Time is empty.");
			return;
		}

		if ( !check_integer(document.lansetting_form.DHCPSLeaseTime.value))
		{
			var item = " in DHCP Lease Time ";
			warn_lantime();
			//alert("Each character of the number must be 0~9 "+item);
			return;
		}

		if ( !check_integer_range(document.lansetting_form.DHCPSLeaseTime.value, 60, 999999) )
		{
			warn_larger("DHCP Lease Time",60);
			//alert("DHCP Lease Time should be larger than 60");
			return;
		}

		/***** check static lease ip and mac *****/
		for (i=1; i<=10; i++)
		{
			for (j=1; j<=3; j++)
			{
				document.getElementById("id_dhcp_mac"+i+"_"+j).value = document.getElementById("id_dhcp_mac"+i+"_"+j).value.toUpperCase();
				document.getElementById("id_dhcp_noip"+i+"_"+j).value = document.getElementById("id_dhcp_noip"+i+"_"+j).value.toUpperCase();
			}
		}

		for(i=1; i<=10; i++)
		{
			merge_ip("id_DHCPSStaticAssignIP"+i,"id_dhcp_ip"+i+"_1","id_dhcp_ip"+i+"_2","id_dhcp_ip"+i+"_3","id_dhcp_ip"+i+"_4","id_dhcp_ip"+i+"_5","id_dhcp_ip"+i+"_6");
			merge_mac("id_DHCPSStaticAssignMAC"+i,"id_dhcp_mac"+i+"_1","id_dhcp_mac"+i+"_2","id_dhcp_mac"+i+"_3","id_dhcp_mac"+i+"_4","id_dhcp_mac"+i+"_5","id_dhcp_mac"+i+"_6");
			merge_mac("id_DHCPSNotAssignIP"+i,"id_dhcp_noip"+i+"_1","id_dhcp_noip"+i+"_2","id_dhcp_noip"+i+"_3","id_dhcp_noip"+i+"_4","id_dhcp_noip"+i+"_5","id_dhcp_noip"+i+"_6");
		}
		for (i=1; i<=10; i++)
		{
			var item1=document.getElementById("id_DHCPSStaticAssignMAC"+i);
			var item2=document.getElementById("id_DHCPSStaticAssignIP"+i);
			if((item1.value!="")&&(item2.value!=""))
			{
				if (!check_mac(item1.value))
				{
					var title="Static Lease"
					var No=i;
					warn_invalidMAC(title,No);
					//alert(title + " MAC " + No + " is invalid!!");
					return false;
				}

				if (!check_ip(item2.value) ||
					!checkSubnet(document.lansetting_form.LanIPAddr.value,document.lansetting_form.LanNetmask.value,item2.value))
				{
					var msg="Static Lease"+" ip";
					var No=i;
					warn_invalid_int(msg,No);
					//alert(msg +" " +no + " is invalid");
					return false;
				}
			}
			else if((item1.value=="")&&(item2.value==""))
			{
				continue;
			}
			else
			{
				var No = (i-0)-1;
				warn_route_group(No);
				//alert("The " + No + " rule incomplete");
				return false
			}
		}

		/***** check not assign ip *****/

		for (i=1; i<=10; i++)
		{
			var item=document.getElementById("id_DHCPSNotAssignIP"+i);
			if(item.value != "")
			{
				if (!check_mac(item.value))
				{
					var title="Block Lease"
					var No=i;
					warn_invalidMAC(title,No);
					//alert(title + "MAC " + No + " is invalid!!");
					return false;
				}
			}
		}

		if (!checkMACtable() || !checkIPtable())
			return false;

	}

	fvt_form_submit('lansetting_form');
	document.lansetting_form.submit();
	return true;

}

function AdvEnabled()
{
	for (i=0; i< document.lansetting_form.elements.length; i++)
	{
		if(document.lansetting_form.elements[i].name == "SendAdv")
			IPv6_s = i;
		if(document.lansetting_form.elements[i].name == "RouterAddr")
			IPv6_e = i+2;
	}
	document.getElementById("mm_AdvEnable").value = document.lansetting_form.AdvEnable.value;
	if ( document.lansetting_form.AdvEnable.value == '0' )
	{
		for (i=IPv6_s; i< IPv6_e; i++)
		{
			document.lansetting_form.elements[i].disabled = true;
		}
		return;
	}
	else
	{
		for (i=IPv6_s; i< IPv6_e; i++)
		{
			document.lansetting_form.elements[i].disabled = false;
		}
	}
}

function fvt_form_init(form_name)
{

	if (form_name=='lansetting_form' || form_name=='*') {
		fvt_form_obj_set("lansetting_form", "LanIPAddr", fvt_meta_config('lan0_ip'));		//hidden
		fvt_form_obj_set("lansetting_form", "LanNetmask", fvt_meta_config('lan0_netmask'));		//hidden
		fvt_form_obj_set("lansetting_form", "DhcpNetmask", fvt_meta_config('dhcp0_netmask'));		//hidden
		fvt_form_obj_set("lansetting_form", "DhcpDnsServer", fvt_meta_config('dhcp0_dns_server'));		//hidden
		//document.getElementById("dhcpDNSServerTb").style.display=""; //Show DNS server table
		//if( typeof meta_config['dhcp0_dns_server2'] === "undefined" ){
		//	document.getElementById("dhcpDNSServer2Tb").style.display="none";
		//}else{
		//	document.getElementById("dhcpDNSServer2Tb").style.display="";
		//	fvt_form_obj_set("lansetting_form", "DhcpDnsServer2", fvt_meta_config('dhcp0_dns_server2'));		//hidden
		//}

		fvt_form_obj_set("lansetting_form", "Lan2IPAddr", fvt_meta_config('lan0_alias0_ip'));		//hidden
		fvt_form_obj_set("lansetting_form", "Lan2Netmask", fvt_meta_config('lan0_alias0_netmask'));		//hidden

		fvt_form_obj_set("lansetting_form", "DHCPSEnable", fvt_meta_config('dhcp0_enable'));		//select-one

		fvt_form_obj_set("lansetting_form", "DHCPSIPStart", fvt_meta_config('dhcp0_number_start'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSIPEnd", fvt_meta_config('dhcp0_number_end'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSLeaseTime", fvt_meta_config('dhcp0_leasetime'));		//text
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC01", fvt_meta_config('dhcp_resv_mac0'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP01", fvt_meta_config('dhcp_resv_ip0'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC02", fvt_meta_config('dhcp_resv_mac1'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP02", fvt_meta_config('dhcp_resv_ip1'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC03", fvt_meta_config('dhcp_resv_mac2'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP03", fvt_meta_config('dhcp_resv_ip2'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC04", fvt_meta_config('dhcp_resv_mac3'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP04", fvt_meta_config('dhcp_resv_ip3'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC05", fvt_meta_config('dhcp_resv_mac4'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP05", fvt_meta_config('dhcp_resv_ip4'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC06", fvt_meta_config('dhcp_resv_mac5'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP06", fvt_meta_config('dhcp_resv_ip5'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC07", fvt_meta_config('dhcp_resv_mac6'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP07", fvt_meta_config('dhcp_resv_ip6'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC08", fvt_meta_config('dhcp_resv_mac7'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP08", fvt_meta_config('dhcp_resv_ip7'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC09", fvt_meta_config('dhcp_resv_mac8'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP09", fvt_meta_config('dhcp_resv_ip8'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignMAC10", fvt_meta_config('dhcp_resv_mac9'));		//hidden
		fvt_form_obj_set("lansetting_form", "DHCPSStaticAssignIP10", fvt_meta_config('dhcp_resv_ip9'));		//hidden

		fvt_form_obj_set("lansetting_form", "DhcpDNSRelay", fvt_meta_config('dhcp0_dns_relay'));
		option_dnsrelay();
	}
	document.getElementById("id_aliasip").innerHTML="Alias IP Address";
	document.getElementById("id_aliasmask").innerHTML="Alias Subnet Mask";
}

function fvt_form_submit(form_name) 	{
	fvt_paramlist_clear();
//	var acl_lan16=fvt_form_obj_get("lansetting_form", "LanIPAddr")+"\/"+octet2cidr(fvt_form_obj_get("lansetting_form", "LanNetmask"));
	if (form_name=='lansetting_form' || form_name=='*') {
		if(fvt_form_obj_get("lansetting_form", "LanIPAddr")!=fvt_meta_config("lan0_ip") ||
			fvt_form_obj_get("lansetting_form", "LanNetmask")!=fvt_meta_config("lan0_netmask")||
			fvt_form_obj_get("lansetting_form", "Lan2IPAddr")!=fvt_meta_config("lan0_alias0_ip")||
			fvt_form_obj_get("lansetting_form", "Lan2Netmask")!=fvt_meta_config("lan0_alias0_netmask"))
		{
			if (confirm("Modification of IP Address or Subnet Mask will result in the rebooting of CPE,OK?"))
			{
				fvt_paramlist_cat_str('lan0_ip', fvt_form_obj_get("lansetting_form", "LanIPAddr"));		//hidden
				fvt_paramlist_cat_str('lan0_netmask', fvt_form_obj_get("lansetting_form", "LanNetmask"));		//hidden
				fvt_paramlist_cat_str('lan0_alias0_ip', fvt_form_obj_get("lansetting_form", "Lan2IPAddr"));		//hidden
				fvt_paramlist_cat_str('lan0_alias0_netmask', fvt_form_obj_get("lansetting_form", "Lan2Netmask"));		//hidden
//				fvt_paramlist_cat_str('fw_remotemng_accept16_ip', acl_lan16);	//hidden

				document.getElementById('lansetting_form').action="wwwctrl.cgi?action=wait_restart";
				document.getElementById('lansetting_form').target = "contentfrm";
				fvt_paramlist_cat_str('reboot', "1");		//hidden
			}
		}

		fvt_paramlist_cat_str('dhcp0_wins_server', fvt_form_obj_get("lansetting_form", "LanIPAddr"));
		fvt_paramlist_cat_str('dhcp0_gateway', fvt_form_obj_get("lansetting_form", "LanIPAddr"));
		fvt_paramlist_cat_str('dhcp0_dns_server', fvt_form_obj_get("lansetting_form", "LanIPAddr"));
		fvt_paramlist_cat_str('dhcp0_netmask', fvt_form_obj_get("lansetting_form", "DhcpNetmask"));

		var subnet_item1 = document.getElementById("id_LanIPAddr1").value & document.getElementById("id_DhcpNetmask1").value;
		var subnet_item2 = document.getElementById("id_LanIPAddr2").value & document.getElementById("id_DhcpNetmask2").value;
		var subnet_item3 = document.getElementById("id_LanIPAddr3").value & document.getElementById("id_DhcpNetmask3").value;
		var subnet_item4 = document.getElementById("id_LanIPAddr4").value & document.getElementById("id_DhcpNetmask4").value;
		var dhcp_subnet = subnet_item1+"."+subnet_item2+"."+subnet_item3+"."+subnet_item4;
		fvt_paramlist_cat_str('dhcp0_subnet', dhcp_subnet);

		var dnsserver_item1 = document.getElementById("id_DhcpDnsServer11").value;
		var dnsserver_item2 = document.getElementById("id_DhcpDnsServer12").value;
		var dnsserver_item3 = document.getElementById("id_DhcpDnsServer13").value;
		var dnsserver_item4 = document.getElementById("id_DhcpDnsServer14").value;
		var dhcp_dnsserver = dnsserver_item1+"."+dnsserver_item2+"."+dnsserver_item3+"."+dnsserver_item4;
		fvt_paramlist_cat_str('dhcp0_dns_server', dhcp_dnsserver);
		if( typeof meta_config['dhcp0_dns_server2'] !== 'undefined'){
			var dnsserver2_item1 = document.getElementById("id_DhcpDnsServer21").value;
			var dnsserver2_item2 = document.getElementById("id_DhcpDnsServer22").value;
			var dnsserver2_item3 = document.getElementById("id_DhcpDnsServer23").value;
			var dnsserver2_item4 = document.getElementById("id_DhcpDnsServer24").value;
			var dhcp_dnsserver2 = dnsserver2_item1+"."+dnsserver2_item2+"."+dnsserver2_item3+"."+dnsserver2_item4;
			if ( dhcp_dnsserver2 == "..." ) dhcp_dnsserver2="";
			fvt_paramlist_cat_str('dhcp0_dns_server2', dhcp_dnsserver2);
		}

		fvt_paramlist_cat_str("dhcp0_enable", fvt_form_obj_get("lansetting_form", "DHCPSEnable"));
		fvt_paramlist_cat_str('dhcp0_number_start', fvt_form_obj_get("lansetting_form", "DHCPSIPStart"));		//hidden
		fvt_paramlist_cat_str('dhcp0_number_end', fvt_form_obj_get("lansetting_form", "DHCPSIPEnd"));		//hidden
		fvt_paramlist_cat_str('dhcp0_leasetime', fvt_form_obj_get("lansetting_form", "DHCPSLeaseTime"));		//text
		fvt_paramlist_cat_str('dhcp_resv_mac0', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC01"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip0', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP01"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac1', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC02"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip1', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP02"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac2', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC03"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip2', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP03"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac3', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC04"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip3', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP04"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac4', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC05"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip4', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP05"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac5', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC06"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip5', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP06"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac6', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC07"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip6', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP07"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac7', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC08"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip7', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP08"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac8', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC09"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip8', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP09"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_mac9', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignMAC10"));		//hidden
		fvt_paramlist_cat_str('dhcp_resv_ip9', fvt_form_obj_get("lansetting_form", "DHCPSStaticAssignIP10"));		//hidden

	}
	fvt_paramlist_cat_str('dhcp0_dns_relay', fvt_form_obj_get("lansetting_form", "DhcpDNSRelay"));
	fvt_paramlist_presubmit(form_name);
}

// Convert a subnet mask array into CIDR (# of bits) (255.255.255.0 = 24 etc.)
function octet2cidr(aMask) {
	var mask = octet2dec(aMask);
	// get binary string
	var mask_2 = parseInt(mask, 10).toString(2);
	// return mask length
	return mask_2.indexOf(0);
}
// Convert our array of 4 ints into a decimal (watch out for 16 bit JS integers here)
function octet2dec(a){
	var a_s = a.split(".");
	var d = 0;
	d = d + parseInt(a_s[0]) * 16777216 ;	//Math.pow(2,24);
	d = d + parseInt(a_s[1]) * 65536;		//Math.pow(2,16);
	d = d + parseInt(a_s[2]) * 256;			//Math.pow(2,8);
	d = d + parseInt(a_s[3]);
	return d;
}

function HEX2DEC(number) {
	// Return error if number is not hexadecimal or contains more than ten characters (10 digits)
	//if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) return '#NUM!';
	if (!/^[0-9A-Fa-f]{1,10}$/.test(number)) return '';

	// Convert hexadecimal number to decimal
	var decimal = parseInt(number, 16);

	// Return decimal number
	return (decimal >= 549755813888) ? decimal - 1099511627776 : decimal;
}

function DEC2HEX(dec) {
	var buf = [],
	//map = '0123456789ABCDEF';
	map = '0123456789abcdef';
	while (parseInt(dec / 16, 10) !== 0) {
		buf.unshift(map[dec % 16]);
		dec = parseInt(dec / 16, 10);
	}
	buf.unshift(map[dec % 16]);
	return buf.join('');
};

function DEC2HEX_array(dec) {
	var result = DEC2HEX(dec);
	var result8 = result;
	var xout="";
	for (i = result.length ; i < 8; i++)
	{
		result8 = "0" + result8;
	}
	var hex_array = result8.match(/.{1,2}/g)
	for (i = 0 ; i <= 3; i++){xout = xout + "\\x" + hex_array[i];}
	return xout;
}

function SetLan2()
{
	window.location.href="wwwctrl.cgi?action=lan2";
}

function SetIPv6()
{
	window.location.href="wwwctrl.cgi?action=ipv6s";
}

function toggle_tr_visibility(id)
{
	var e = document.getElementById(id);
	if(e.style.display == 'none')
		e.style.display = "table-row";
	else
		e.style.display = "none";
}

function Toggle_Lan2()
{
	toggle_tr_visibility('id_Lan2Tb');
	if(id_Lan2Tb.style.display == 'none')
		{
		document.getElementById("IPv6Tb").style.display="none";
		document.getElementById("id_aliasip").innerHTML="Second IP Address";
		document.getElementById("id_aliasmask").innerHTML="Second Subnet Mask";
		}
	else
		{
		document.getElementById("id_aliasip").innerHTML="Alias IP Address";
		document.getElementById("id_aliasmask").innerHTML="Alias Subnet Mask";
		if(fvt_meta_config('wan0_ipv6_enable')!="1")
			{
			document.getElementById("IPv6Tb").style.display="none";
			}
		else
			{
			//document.getElementById("IPv6Tb").style.display="table-row";
			document.getElementById("IPv6Tb").style.display="none";
			}
		}
}

function OptionURL(OPT)
{
	window.location.href="wwwctrl.cgi?action=option&opt="+OPT;
}

function list_option(OPT)
{
	document.write("<td>"+OPT+"</td>");
	document.write("<td><input type='button' value='Edit' onclick='OptionURL("+OPT+")' target='contentfrm'></td>");
	var capability=fvt_meta_config("dhcp_pool"+OPT+"_capability");
	// capability 1:passthrougt ENABLE, 2: Match Remote, 3: Match Local
	if (capability == 2)
		{
		document.write("<td class='hlight'>Enable<BR>Match Remote</td>");
		}
	else if (capability == 3)
		{
		document.write("<td class='hlight'>Enable<BR>Match Local</td>");
		}
	else
		{
		document.write("<td>Disable</td>");
		}

	var opt60_en=fvt_meta_config("dhcp_pool"+OPT+"_option60_enable");
	if (opt60_en == 1) document.write("<td class='hlight'>Enable</td>");
	else document.write("<td>Disable</td>");

	var opt61_en=fvt_meta_config("dhcp_pool"+OPT+"_option61_enable");
	if (opt61_en == 1) document.write("<td class='hlight'>Enable</td>");
	else document.write("<td>Disable</td>");

	var opt125_en=fvt_meta_config("dhcp_pool"+OPT+"_option125_enable");
	if (opt125_en == 1) document.write("<td class='hlight'>Enable</td>");
	else document.write("<td>Disable</td>");

	var poolstart=fvt_meta_config('dhcp0_pool'+OPT+'_number_start');
	var poolend=fvt_meta_config('dhcp0_pool'+OPT+'_number_end')
	document.write("<td>"+poolstart+"<BR>"+poolend+"</td>");
}

//-->
</script>
</head>

<body align="left" onload="fvt_form_init('lansetting_form'); dhcpChange(); check_process(); isBridgeMode();">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="lansetting_form" name="lansetting_form" method="post" action=>
<fieldset>
	<div class="lv1_title">
		Advanced Setup&nbsp;<a href="#" onclick="Toggle_Lan2();" style="text-decoration: none; color:#4B0082">&gt;</a>&nbsp;LAN Settings
	</div>
</fieldset>
<div class="div1_indent lv2_new">
	<div><hr class="hr2"></div>
<!--lan ip and mask-->
	<table><tbody>
		<tr>
			<input name="lan_gateway" value="0.0.0.0" type="hidden">
			<input name="LanIPAddr" id="id_LanIPAddr" type="hidden">
			<td class="width_lanset2"><div ctrlflip="right" ctrlid="32">IP Address</div></td>
			<script language="javascript" type="text/javascript">
				var IP_Address = fvt_meta_config('lan0_ip');
				var IP_Address_split = IP_Address.split(".");
				document.write("<td ctrlflip='etc'><div dir='ltr'>");
				document.write("<input id='id_LanIPAddr1' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[0]+"' onkeyup='changedhcpIP(1)' type='text'> . ");
				document.write("<input id='id_LanIPAddr2' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[1]+"' onkeyup='changedhcpIP(2)' type='text'> . ");
				document.write("<input id='id_LanIPAddr3' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[2]+"' onkeyup='changedhcpIP(3)' type='text'> . ");
				document.write("<input id='id_LanIPAddr4' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[3]+"' type='text'>");
				document.write("</div></td>");
			</script>

			<input name="lan2_gateway" value="0.0.0.0" type="hidden">
			<input name="Lan2IPAddr" id="id_Lan2IPAddr" type="hidden">
			<td>&nbsp;&nbsp;&nbsp;</td>
			<td class="width_lanset1"><div ctrlflip="right" ctrlid="32" id="id_aliasip">Second IP Address</div></td>
			<script language="javascript" type="text/javascript">
				var IP_Address2 = fvt_meta_config('lan0_alias0_ip');
				if(IP_Address2 != "")
				{
					var IP_Address2_split = IP_Address2.split(".");
				}
				else
				{
					var IP_Address2_split = new Array();
					IP_Address2_split[0]="";
					IP_Address2_split[1]="";
					IP_Address2_split[2]="";
					IP_Address2_split[3]="";
				}
				document.write("<td ctrlflip='etc'><div dir='ltr'>");
				document.write("<input id='id_Lan2IPAddr1' class='width_ip' size='3' maxlength='3' value='"+IP_Address2_split[0]+"' onkeyup='changedhcpIP(1)' type='text'> . ");
				document.write("<input id='id_Lan2IPAddr2' class='width_ip' size='3' maxlength='3' value='"+IP_Address2_split[1]+"' onkeyup='changedhcpIP(2)' type='text'> . ");
				document.write("<input id='id_Lan2IPAddr3' class='width_ip' size='3' maxlength='3' value='"+IP_Address2_split[2]+"' onkeyup='changedhcpIP(3)' type='text'> . ");
				document.write("<input id='id_Lan2IPAddr4' class='width_ip' size='3' maxlength='3' value='"+IP_Address2_split[3]+"' type='text'>");
				document.write("</div></td>");
			</script>

		</tr>
		<tr>
			<input name="LanNetmask" id="id_LanNetmask" type="hidden">
			<td nowrap=""><div ctrlflip="right" ctrlid="69">Subnet Mask</div></td>
			<script language="javascript" type="text/javascript">
				var Sub_Mask = fvt_meta_config('lan0_netmask');
				var Sub_Mask_split = Sub_Mask.split(".");
				document.write("<td ctrlflip='etc'><div dir='ltr'>");
				document.write("<input id='id_LanNetmask1' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask_split[0]+"' type='text'> . ");
				document.write("<input id='id_LanNetmask2' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask_split[1]+"' type='text'> . ");
				document.write("<input id='id_LanNetmask3' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask_split[2]+"' type='text'> . ");
				document.write("<input id='id_LanNetmask4' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask_split[3]+"' type='text'>");
				document.write("</div></td>");
			</script>

			<input name="Lan2Netmask" id="id_Lan2Netmask" type="hidden">
			<td>&nbsp;&nbsp;&nbsp;</td>
			<td nowrap=""><div ctrlflip="right" ctrlid="69" id="id_aliasmask">Second Subnet Mask</div></td>
			<script language="javascript" type="text/javascript">
				var Sub_Mask2 = fvt_meta_config('lan0_alias0_netmask');
				if(Sub_Mask2 != "")
				{
					var Sub_Mask2_split = Sub_Mask2.split(".");
				}
				else
				{
					var Sub_Mask2_split = new Array();
					Sub_Mask2_split[0]="";
					Sub_Mask2_split[1]="";
					Sub_Mask2_split[2]="";
					Sub_Mask2_split[3]="";
				}
				document.write("<td ctrlflip='etc'><div dir='ltr'>");
				document.write("<input id='id_Lan2Netmask1' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask2_split[0]+"' type='text'> . ");
				document.write("<input id='id_Lan2Netmask2' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask2_split[1]+"' type='text'> . ");
				document.write("<input id='id_Lan2Netmask3' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask2_split[2]+"' type='text'> . ");
				document.write("<input id='id_Lan2Netmask4' class='width_ip' size='3' maxlength='3' value='"+Sub_Mask2_split[3]+"' type='text'>");
				document.write("</div></td>");
			</script>

		</tr>

		<tr id="id_Lan2Tb" style="display:inline">
		<!-- <tr id="id_Lan2Tb" style="display:none"> -->
		<td nowrap=""><div ctrlflip="right">Setup Second Lan Group&nbsp;</div></td>
		<td>
		<input ctrlflip="etc" class="width_wanpon_edit" type="button" name="nosave_edit" value="Setup" onclick="SetLan2()" target="contentfrm">
		</td>
		</tr>

		<tr id="IPv6Tb" style="display:none">
		<td nowrap=""><div ctrlflip="right" ctrlid="69">&nbsp;&nbsp;</div></td>
		<td>
		<input ctrlflip="etc" class="width_wanpon_edit" type="button" name="nosave_edit" value="IPV6 Setup" onclick="SetIPv6()" target="contentfrm">
		</td>
		</tr>
		</tbody></table>
	<div><hr class="hr2"></div>
<!--ipv6-->
<div style="display:none">
	 <table><tbody>
		<tr>
			<td class="width_lanset1"><div ctrlflip="right" ctrlid="70">IPv6 Radvd Enable</div></td>
			<td ctrlflip="right">
				<select ar='1' name="AdvEnable" id="id_AdvEnable" class="width_lansetEnable" onchange="AdvEnabled();">
					<option value='0'>Disable</option>
					<option value='1'>Enable</option>
				</select>
				<input name="nosave_AdvEnable" id="mm_AdvEnable" type="hidden">

			</td>
		</tr>
	 </tbody></table>
	<div>
	<table><tbody>
		<tr>
			<script language="javascript" type="text/javascript">
				document.write("<input disabled=\"disabled\" name=\"SendAdv\" id=\"mm_SendAdv\" type=\"hidden\">");
				document.write("<td><input disabled=\"disabled\" id=\"id_SendAdv\" onclick='setValue(\"SendAdv\")' "+valueMatch(Adv_Send, '1', 'checked')+" type=\"checkbox\" class='checkbox'></td>");
				document.write("<td><div ctrlflip='right' ctrlid='84'>AdvSendAdvert</div></td>");
			</script>
		</tr>
		<tr>
			<script language="javascript" type="text/javascript">
				document.write("<input ctrlflip='etc' disabled=\"disabled\" name=\"ManagedFlag\" id=\"mm_ManagedFlag\" type=\"hidden\">");
				document.write("<td><input ctrlflip='etc' disabled=\"disabled\" id=\"id_ManagedFlag\" onclick='setValue(\"ManagedFlag\")' "+valueMatch(Adv_ManagedFlag, '1', 'checked')+" type=\"checkbox\" class='checkbox'></td>");
				document.write("<td><div ctrlflip='right' ctrlid='85'>AdvMagangedFlag</div></td>");
			</script>
		</tr>
		<tr>
			<script language="javascript" type="text/javascript">
				document.write("<input ctrlflip='etc' disabled=\"disabled\" name=\"OtherConfigFlag\" id=\"mm_OtherConfigFlag\" type=\"hidden\">");
				document.write("<td><input ctrlflip='etc' disabled=\"disabled\" id=\"id_OtherConfigFlag\" onclick='setValue(\"OtherConfigFlag\")' "+valueMatch(Adv_OtherConf, '1', 'checked')+" type=\"checkbox\" class='checkbox'></td>");
				document.write("<td><div ctrlflip='right' ctrlid='86'>AdvOtherConfigFlag</div></td>");
			</script>
		</tr>
	</tbody></table>
	</div>

	<table><tbody>
		<tr>
			<td class="width_lanset1"><div ctrlflip="right" ctrlid="71">MinRtrAdvInterval</div></td>
			<td>
				<table><tr>
				<td>
					<input ctrlflip='etc' disabled="disabled" name="MinRtr" id="id_MinRtr" class="width_text80" size="3" maxlength="3" type="text"></td>
				<td>
					<div class="suffix_lr" ctrlflip="etc" ctrlid="73">Seconds</div>
				</td>
				</tr></table>
			</td>
		</tr>
		<tr>
			<td><div class="lv2_new" ctrlflip="right" ctrlid="72">MaxRtrAdvInterval</div></td>
			<td>
				<table><tr>
				<td>
				 <input ctrlflip="etc" disabled="disabled" name="MaxRtr" id="id_MaxRtr" class="width_text80" size="3" maxlength="3" type="text">
			</td>
			<td>
				<div class="suffix_lr" ctrlflip="etc" ctrlid="73">Seconds</div>
			</td>
			</tr></table>
		</tr>
		<tr>
			<td><div ctrlflip="right" ctrlid="74">Prefix</div></td>
			<td ctrlflip="etc"><input disabled="disabled" name="prefix" id="id_prefix" type="text"></td>
		</tr>
	</tbody></table>
	<div>
		<table><tbody>
			<tr class="width_lanset1">
					<script language="javascript" type="text/javascript">
					document.write("<input ctrlflip='etc' disabled=\"disabled\" name=\"OnLink\" id=\"mm_OnLink\" type=\"hidden\">");
					document.write("<td><input ctrlflip='etc' value=0 disabled=\"disabled\" id=\"id_OnLink\" onclick='setValue(\"OnLink\")' "+valueMatch(Adv_OnLink, '1', 'checked')+" type=\"checkbox\" class='checkbox'></td>");
					document.write("<td><div ctrlflip='right' ctrlid=\"87\">AdvOnLink</div></td>");
					</script>
			</tr>
			<tr width="180px">
					<script language="javascript" type="text/javascript">
					document.write("<input ctrlflip='etc' disabled=\"disabled\" name=\"Autonomous\" id=\"mm_Autonomous\" type=\"hidden\">");
					document.write("<td><input ctrlflip='etc' value=0 disabled=\"disabled\" id=\"id_Autonomous\" onclick='setValue(\"Autonomous\")' "+valueMatch(Adv_Autonomous, '1', 'checked')+" type=\"checkbox\" class='checkbox'></td>");
					document.write("<td><div ctrlflip='right' ctrlid=\"88\">AdvAutonomonus</div></td>");
					</script>
			</tr>
			<tr width="180px">
					<script language="javascript" type="text/javascript">
					document.write("<input ctrlflip='etc' disabled=\"disabled\" name=\"RouterAddr\" id=\"mm_RouterAddr\" type=\"hidden\">");
					document.write("<td><input ctrlflip='etc' value=0 disabled=\"disabled\" id=\"id_RouterAddr\" onclick='setValue(\"RouterAddr\")' "+valueMatch(Adv_RouterAddr, '1', 'checked')+" type=\"checkbox\" class='checkbox'></td>");
					document.write("<td><div ctrlflip='right' ctrlid=\"89\">AdvRouterAddr</div></td>");
					</script>
			</tr>
		</tbody></table>
	</div>
<!--DHCPv6 Prefix function-->
	<table><tbody>
		<tr>
		<td class="width_lanset1"></td>
		</tr>
		<script language="javascript" type="text/javascript">
			document.write("<input ctrlflip='etc' id=\"mm_Dhcpv6Prefix\" name=\"Dhcpv6Prefix\" type=\"hidden\">");
			document.write("<tr><td></td>");
			document.write("<td><input ctrlflip='etc' type=\"radio\" class='radio' value='0' id=\"id_UserSet\" name=\"Dhcpv6Prefix\" onclick='setPrefixValue(\"Dhcpv6Prefix\")' "+valueMatch(Dhcp6PfxFr, '0', 'checked')+">");
			document.write("<td><div ctrlflip='right' ctrlid=\"91\">User Set</div></td>");
			document.write("<td><input ctrlflip='etc' id=\"id_USvalue\" name=\"USvalue\" type='text'>");
			document.write("</tr>");

			document.write("<tr><td><div ctrlflip='right' ctrlid=\"90\">DHCPv6&nbsp;Prefix&nbsp;From</div></td>");
			document.write("<td><input ctrlflip='etc' type=\"radio\" class='radio' value='1' id=\"id_Dhcpv6\" name=\"Dhcpv6Prefix\" onclick='setPrefixValue(\"Dhcpv6Prefix\")' "+valueMatch(Dhcp6PfxFr, '1', 'checked')+"></td>");
			document.write("<td><div ctrlflip='right' ctrlid=\"92\">DHCPv6</div></td>");
			document.write("</tr>");

			document.write("<tr><td></td>");
			document.write("<td><input ctrlflip='etc' type=\"radio\" class='radio' value='2' id=\"id_Pppoev6\" name=\"Dhcpv6Prefix\" onclick='setPrefixValue(\"Dhcpv6Prefix\")' "+valueMatch(Dhcp6PfxFr, '2', 'checked')+"></td>");
			document.write("<td><div ctrlflip='right' ctrlid=\"93\">PPPoEv6</div></td></tr>");

		</script>
	</tbody></table>
	<div><hr class="hr2"></div>
</div>
<!--dhcp server-->
	<table><tbody>
		<tr>
			<input ctrlflip='etc' name="nosave_DHCPSEnable" id="mm_DHCPSEnable" type="hidden">
			<td class="width_lanset1"><div ctrlflip="right" ctrlid="75">DHCP Server</div></td>
			<td ctrlflip='etc'>
				<select ar='1' name="DHCPSEnable" id="id_DHCPSEnable" style="width:128px" onchange="dhcpChange();">
					<option value='0'>Disable</option>
					<option value='1'>Enable</option>
					<!--<option value='2'>DHCP Relay</option>-->
				</select>
			</td>
		</tr>
		<tr id="dhcpRelaySrv1" style="display:none">
			<td class="width_lanset1">
				<table><tr>
					<td><div ctrlflip="right" ctrlid="76">DHCP&nbsp;Relay&nbsp;Server</div></td>
					<td><div ctrlflip="etc">1</div></td>
				</tr></table>
			</td>
			<input ctrlflip='etc' disabled="disabled" name="DHCPSRelayServer1" id="id_DHCPSRelayServer1" value="" type="hidden">
			<script ctrlflip='etc' language="javascript" type="text/javascript">
				var DhcpRelayServer = fvt_meta_config('dhcp0_relay_server1');
				var DhcpRelayServer_Split = DhcpRelayServer.split(",");
				var DHCPSRelayServer1_Split = new Array();

				DHCPSRelayServer1_Split = DhcpRelayServer_Split[0].split(".");

				if(DHCPSRelayServer1_Split.length != 4)
				{
					DHCPSRelayServer1_Split[0] = "";
					DHCPSRelayServer1_Split[1] = "";
					DHCPSRelayServer1_Split[2] = "";
					DHCPSRelayServer1_Split[3] = "";
				}
				document.write("<td ctrlflip='etc'><div>");
				document.write("<input type='text' id='id_DHCPSRelayServer1_1' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer1_Split[0]+"'> . ");
				document.write("<input type='text' id='id_DHCPSRelayServer1_2' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer1_Split[1]+"'> . ");
				document.write("<input type='text' id='id_DHCPSRelayServer1_3' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer1_Split[2]+"'> . ");
				document.write("<input type='text' id='id_DHCPSRelayServer1_4' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer1_Split[3]+"'>");
				document.write("</div></td>");
			</script>
		</tr>
		<tr id="dhcpRelaySrv2" style="display:none">
			<td class="width_lanset1">
				<table><tr>
					<td><div ctrlflip="right" ctrlid="76">DHCP&nbsp;Relay&nbsp;Server</div></td>
					<td><div ctrlflip="etc">2</div></td>
				</tr></table>
			</td>
			<input ctrlflip='etc' disabled="disabled" name="DHCPSRelayServer2" id="id_DHCPSRelayServer2" value="" type="hidden">
			<script language="javascript" type="text/javascript">
				var DhcpRelayServer = fvt_meta_config('dhcp0_relay_server2');
				var DhcpRelayServer_Split = DhcpRelayServer.split(",");
				var DHCPSRelayServer2_Split = new Array();

				DHCPSRelayServer2_Split = DhcpRelayServer_Split[0].split(".");

				if(DHCPSRelayServer2_Split.length != 4)
				{
					DHCPSRelayServer2_Split[0] = "";
					DHCPSRelayServer2_Split[1] = "";
					DHCPSRelayServer2_Split[2] = "";
					DHCPSRelayServer2_Split[3] = "";
				}
				document.write("<td ctrlflip='etc' ><div>");
				document.write("<input type='text' id='id_DHCPSRelayServer2_1' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer2_Split[0]+"'> . ");
				document.write("<input type='text' id='id_DHCPSRelayServer2_2' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer2_Split[1]+"'> . ");
				document.write("<input type='text' id='id_DHCPSRelayServer2_3' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer2_Split[2]+"'> . ");
				document.write("<input type='text' id='id_DHCPSRelayServer2_4' class='width_ip' size='3' maxlength='3' value='"+DHCPSRelayServer2_Split[3]+"'>");
				document.write("</div></td>");
			</script>
		</tr>
		<tr id="RelaySrv2Vid" style="display:none">
			<td><div ctrlflip="right" ctrlid="78">Mapping&nbsp;Vender&nbsp;ID</div></td>
			<td>
				<input ctrlflip='etc' disabled="disabled" name="DHCPSRelayServer2VID" id="id_DHCPSRelayServer2VID" size="32" maxlength="255" type="text">
			</td>
		</tr>

		<script language="javascript" type="text/javascript">
			document.write("<tr id='dhcpServerTbl' "+valueMatch(DHCPSEnable, '2', 'style=\'display:none\'')+">");
		</script>
			<td><div ctrlflip='right' ctrlid="79">DHCP&nbsp;Starting&nbsp;IP&nbsp;Address</div></td>
			<input ctrlflip='etc' name="DHCPSIPStart" id="id_DHCPSIPStart" type="hidden">
			<script language="javascript" type="text/javascript">
				//var IP_Address = fvt_meta_config('lan0_ip');
				var IP_Address = fvt_meta_config('dhcp0_number_start');
				var IP_Address_split = IP_Address.split(".");
				//var DHCP_Start_IP_Address = fvt_meta_config('dhcp0_number_start');
				document.write("<td ctrlflip='right' ><div dir='ltr'>");
				document.write("<input id='id_DHCPSIPStart1' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[0]+"' type='text'> . ");
				document.write("<input id='id_DHCPSIPStart2' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[1]+"' type='text'> . ");
				document.write("<input id='id_DHCPSIPStart3' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[2]+"' type='text'> . ");
				document.write("<input id='id_DHCPSIPStart4' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[3]+"' type='text' name='DHCPSIPStart4'>");
				//document.write("<input id='id_DHCPSIPStart4' name='DHCPSIPStart4' class='width_ip' size='3' maxlength='3' value='"+DHCP_Start_IP_Address+"' type='text'>");
				document.write("</div></td>");
			</script>
		</tr>

		<script language="javascript" type="text/javascript">
			document.write("<tr id='dhcpServerTb2' "+valueMatch(DHCPSEnable, '2', 'style=\'display:none\'')+" >");
		</script>
		<td><div ctrlflip='right' ctrlid="80">DHCP&nbsp;Ending&nbsp;IP&nbsp;Address</div></td>
		<input ctrlflip="etc" name="DHCPSIPEnd" id="id_DHCPSIPEnd" type="hidden">
		<script language="javascript" type="text/javascript">
			//var IP_Address = fvt_meta_config('lan0_ip');
			var IP_Address = fvt_meta_config('dhcp0_number_end');
			var IP_Address_split = IP_Address.split(".");
			//var DHCP_End_IP_Address = fvt_meta_config('dhcp0_number_end');
			document.write("<td ctrlflip='right'><div dir='ltr'>");
			document.write("<input id='id_DHCPSIPEnd1' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[0]+"' type='text'> . ");
			document.write("<input id='id_DHCPSIPEnd2' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[1]+"' type='text'> . ");
			document.write("<input id='id_DHCPSIPEnd3' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[2]+"' type='text'> . ");
			document.write("<input id='id_DHCPSIPEnd4' class='width_ip' size='3' maxlength='3' value='"+IP_Address_split[3]+"' type='text' name='DHCPSIPEnd4'>");
			//document.write("<input id='id_DHCPSIPEnd4' name='DHCPSIPEnd4' class='width_ip' size='3' maxlength='3' value='"+DHCP_End_IP_Address+"' type='text'>");
			document.write("</div></td>");
		</script>
		</tr>

		<tr id="dhcpServerTb6" style="display:none">
			<input name="DhcpNetmask" id="id_DhcpNetmask" type="hidden">
			<td nowrap=""><div ctrlflip="right" ctrlid="69">DHCP Subnet Mask</div></td>
			<script language="javascript" type="text/javascript">
				var dhcp_Sub_Mask = fvt_meta_config('dhcp0_netmask');
				var dhcp_Sub_Mask_split = dhcp_Sub_Mask.split(".");
				document.write("<td ctrlflip='etc'><div dir='ltr'>");
				document.write("<input id='id_DhcpNetmask1' class='width_ip' size='3' maxlength='3' value='"+dhcp_Sub_Mask_split[0]+"' type='text'> . ");
				document.write("<input id='id_DhcpNetmask2' class='width_ip' size='3' maxlength='3' value='"+dhcp_Sub_Mask_split[1]+"' type='text'> . ");
				document.write("<input id='id_DhcpNetmask3' class='width_ip' size='3' maxlength='3' value='"+dhcp_Sub_Mask_split[2]+"' type='text'> . ");
				document.write("<input id='id_DhcpNetmask4' class='width_ip' size='3' maxlength='3' value='"+dhcp_Sub_Mask_split[3]+"' type='text'>");
				document.write("</div></td>");
			</script>
		</tr>
		<tr id="dhcpDNSServerTb" style="display:none">
			<input name="DhcpDnsServer" id="id_DhcpDnsServer" type="hidden">
			<td nowrap=""><div ctrlflip="right" ctrlid="69">DHCP DNS Server</div></td>
			<script language="javascript" type="text/javascript">
				var dhcp_Dns_Server = fvt_meta_config('dhcp0_dns_server');
				var dhcp_Dns_Server_split = dhcp_Dns_Server.split(".");
				document.write("<td ctrlflip='etc'><div dir='ltr'>");
				document.write("<input id='id_DhcpDnsServer11' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server_split[0]+"' type='text'> . ");
				document.write("<input id='id_DhcpDnsServer12' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server_split[1]+"' type='text'> . ");
				document.write("<input id='id_DhcpDnsServer13' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server_split[2]+"' type='text'> . ");
				document.write("<input id='id_DhcpDnsServer14' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server_split[3]+"' type='text'>");
				document.write("</div></td>");
			</script>
		</tr>
		<tr id="dhcpDNSServer2Tb" style="display:none">
			<input name="DhcpDnsServer2" id="id_DhcpDnsServer2" type="hidden">
			<td nowrap=""></td>
			<script language="javascript" type="text/javascript">
				var dhcp_Dns_Server2 = fvt_meta_config('dhcp0_dns_server2');
				if ( dhcp_Dns_Server2 == "" ) dhcp_Dns_Server2="..."
				var dhcp_Dns_Server2_split = dhcp_Dns_Server2.split(".");
				document.write("<td ctrlflip='etc'><div dir='ltr'>");
				document.write("<input id='id_DhcpDnsServer21' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server2_split[0]+"' type='text'> . ");
				document.write("<input id='id_DhcpDnsServer22' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server2_split[1]+"' type='text'> . ");
				document.write("<input id='id_DhcpDnsServer23' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server2_split[2]+"' type='text'> . ");
				document.write("<input id='id_DhcpDnsServer24' class='width_ip' size='3' maxlength='3' value='"+dhcp_Dns_Server2_split[3]+"' type='text'>");
				document.write("</div></td>");
			</script>
		</tr>
		<tr id="dhcpServerTb5" style="display:none">
			<td class="width_lanset1"><div ctrlflip="right" ctrlid="75">DHCP DNS Server :</div></td>
			<td><table><tr>
			<td><input type="radio" name="DhcpDNSRelay" id="id_DhcpDNSRelay" value="0" class="radio" onclick="option_dnsrelay()" checked>Proxy</td>
			<td>&nbsp;&nbsp;</td>
			<td><input type="radio" name="DhcpDNSRelay" id="id_DhcpDNSRelay" value="1" onclick="option_dnsrelay()" class="radio">Relay</td>
			</tr></table></td>
		</tr>

		<script language="javascript" type="text/javascript">
			document.write("<tr id='dhcpServerTb3' "+valueMatch(DHCPSEnable, '2', 'style=\'display:none\'')+" >");
		</script>
		<td><div ctrlflip="right" ctrlid="81">DHCP&nbsp;Lease&nbsp;Time</div></td>
		<td>
			<table><tr>
				<td><input ctrlflip='etc' name="DHCPSLeaseTime" class="width_textip" size="3" maxlength="6" type="text"></td>
				<td><div class="lv2_new suffix_lr" ctrlflip="etc" ctrlid="73">Seconds</div></td>
			</tr></table>
		</td>
		</tr>
	</tbody></table>
	<div>
		<table><tbody>
			<script language="javascript" type="text/javascript">
				document.write("<tr id='dhcpServerTb4' "+valueMatch(DHCPSEnable, '2', 'style=\'display:none\'')+">");
			</script>
				<td class="width_lansetmac"><div ctrlflip="right" ctrlid="82">Static&nbsp;Lease</div></td>
				<td>
					<table cellpadding="0" cellspacing="0"><tbody>
						<tr>
							<td align="center" ></td>
							<td align="center" class="width_lanset2"><div style="padding:0 20px" ctrlid="44">MAC&nbsp;Address</div></td>
							<td align="center"><div ctrlflip="center" ctrlid="32">IP&nbsp;Address</div></td>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(1);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(2);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(3);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(4);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(5);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(6);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(7);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(8);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(9);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_static_lease(10);
							</script>
						</tr>
					</tbody></table>
				</td>
			</tr>
			<!--
			<script language="javascript" type="text/javascript">
			//document.write("<tr id='dhcpServerTb5' "+valueMatch(DHCPSEnable, '1', 'style=\'display:none\'')+" ></tr>");
			//document.write("<tr id='dhcpServerTb5' 'style=display:none'></tr>");
			</script>
			-->
			<tr id=dhcpServerTb5 style=display:none>
				<td class="width_lansetmac" id=""><div ctrlflip="right" ctrlid="83">Block&nbsp;Lease</div></td>
				<td>
					<table cellpadding="0" cellspacing="0"><tbody>
						<tr>
							<td align="center" class="width_lanset2"><div style="padding:0 20px" ctrlid="44">MAC&nbsp;Address</div></td>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(1);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(2);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(3);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(4);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(5);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(6);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(7);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(8);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(9);
							</script>
						</tr>
						<tr>
							<script language="javascript" type="text/javascript">
								list_block_lease(10);
							</script>
						</tr>
					</tbody></table>
				</td>
			</tr>
		</tbody></table>
	</div>

<!--dhcp option Table-->
	<div><hr class="hr2"></div>
	<div id="id_dhcp_option_tb">
		<table><tbody>
		<tr>
			<td class="width_lanset1"><div ctrlflip="right" ctrlid="75">Option Filter :</div></td>
		</tr>
		</tbody></table>

		<table class="TB_COLLAPSE"><tbody>
		<tr style="text-align:center">
			<td class='hlight' style="width:50px;">Rule</td>
			<td class='hlight' style="width:75px;">Edit</td>
			<td class='hlight' style="width:150px;">DHCP Passthrough</td>
			<td class='hlight' style="width:130px;">DHCP Option 60</td>
			<td class='hlight' style="width:130px;">DHCP Option 61</td>
			<td class='hlight' style="width:130px;">DHCP Option 125</td>
			<td class='hlight' style="width:130px;">Pool Address</td>
		</tr>

		<script language="javascript" type="text/javascript">
			for(i=0; i<option_max; i++)
			{
				document.write("<tr style='text-align:center'>");
				list_option(i);
				document.write("</tr>");
			}
		</script>

		</tbody></table>
	</div>

	<div class="top_cwmp2">
	<table><tbody>
		<tr>
			<td class="button_center">
				<input ctrlflip="etc" type="button" onclick="saveChanges()" name="applybtn" value="Apply Changes" class="width_apply">
			</td>
		</tr>
	</tbody></table>
	</div>
</div>
</form>
</td></tr>
</tbody></table>
</div>

</body>
</html>

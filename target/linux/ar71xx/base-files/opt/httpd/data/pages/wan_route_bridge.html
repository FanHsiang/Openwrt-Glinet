<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>


<script language="javascript" type="text/javascript">

var ssidNum;
if (fvt_meta_config('wlan_enable') == 1)
	ssidNum = fvt_meta_config('wlan_vap_num');
else
	ssidNum = 0;
var wan_max = 8;

var CurItem=URLParams("_aa");
var auParam=URLParams("_au");// 1 add 2 edit
var WanNameParam=URLParams("_aq");
var WanModeParam=URLParams("_ae");
var bindmethodParam=URLParams("_am");//i:portbase 2:macbase 3:nobind
var VoIPParam=URLParams("_av");
var TR069Param=URLParams("_at");
var IGMPParam=URLParams("_ai");
var DeafaultRouteParam=URLParams("_ar");

var vidParam = URLParams("_bvi");
var pbitParam = URLParams("_bvb");
var uniPortParam = URLParams("_bup");
var orderParam = URLParams("_bo");
var ethtypeParam = URLParams("_bet");
var smacParam = URLParams("_bsm");
var smacmaskParam = URLParams("_bsmm");
var dmacParam = URLParams("_bdm");
var dmacmaskParam = URLParams("_bdmm");
var sipParam = URLParams("_bsi");
var sipmaskParam = URLParams("_bsim");
var dipParam = URLParams("_bdi");
var dipmaskParam = URLParams("_bdim");
var protocolParam = URLParams("_bipp");
var sportParam = URLParams("_bsp");
var dportParam = URLParams("_bdp");
var tagenParam = URLParams("_bten");
if (tagenParam != 1)	tagenParam = 0;
var tagidParam = URLParams("_btid");
var tagpbParam = URLParams("_btpb");

function list_lanport()
{
	var portName=["ETH1", "ETH2", "ETH3", "ETH4", "GPON", "ETH5", "WIFI"];
	document.write("<option value=\"*\">ALL</option>");
	document.write("<option value=\"?\">ETH1-4</option>");

	//for(var i=0;i<7;i++)
	for(var i=0;i<=3;i++)
	{
		if(i==4 || i==5)
			continue;
		else
			document.write("<option value='"+i+"'>"+portName[i]+"</option>");
	}
}

function list_proto_lanport()
{
	//var portName=["ETH1", "ETH2", "ETH3", "ETH4", "GPON", "ETH5", "WIFI"];
	//alert(uniPortParam);
	document.write("<option value=\"*\">ALL</option>");
	document.write("<option value=\"?\">ETH1-4</option>");
	document.write("<option value=\"0\">ETH1</option>");
	document.write("<option value=\"1\">ETH2</option>");
	document.write("<option value=\"2\">ETH3</option>");
	document.write("<option value=\"3\">ETH4</option>");
}

function IPNetMask()
{
	document.write("<option value='255.255.255.255'>255.255.255.255</option>");
	document.write("<option value='255.255.255.254'>255.255.255.254</option>");
	document.write("<option value='255.255.255.252'>255.255.255.252</option>");
	document.write("<option value='255.255.255.248'>255.255.255.248</option>");
	document.write("<option value='255.255.255.240'>255.255.255.240</option>");
	document.write("<option value='255.255.255.224'>255.255.255.224</option>");
	document.write("<option value='255.255.255.192'>255.255.255.192</option>");
	document.write("<option value='255.255.255.128'>255.255.255.128</option>");
	document.write("<option value='255.255.255.0'>255.255.255.0</option>");
	document.write("<option value='255.255.254.0'>255.255.254.0</option>");
	document.write("<option value='255.255.252.0'>255.255.252.0</option>");
	document.write("<option value='255.255.248.0'>255.255.248.0</option>");
	document.write("<option value='255.255.240.0'>255.255.240.0</option>");
	document.write("<option value='255.255.224.0'>255.255.224.0</option>");
	document.write("<option value='255.255.192.0'>255.255.192.0</option>");
	document.write("<option value='255.255.128.0'>255.255.128.0</option>");
	document.write("<option value='255.255.0.0'>255.255.0.0</option>");
	document.write("<option value='255.254.0.0'>255.254.0.0</option>");
	document.write("<option value='255.252.0.0'>255.252.0.0</option>");
	document.write("<option value='255.248.0.0'>255.248.0.0</option>");
	document.write("<option value='255.240.0.0'>255.240.0.0</option>");
	document.write("<option value='255.224.0.0'>255.224.0.0</option>");
	document.write("<option value='255.192.0.0'>255.192.0.0</option>");
	document.write("<option value='255.128.0.0'>255.128.0.0</option>");
	document.write("<option value='255.0.0.0'>255.0.0.0</option>");
	document.write("<option value='254.0.0.0'>254.0.0.0</option>");
	document.write("<option value='252.0.0.0'>252.0.0.0</option>");
	document.write("<option value='248.0.0.0'>248.0.0.0</option>");
	document.write("<option value='240.0.0.0'>240.0.0.0</option>");
	document.write("<option value='224.0.0.0'>224.0.0.0</option>");
	document.write("<option value='192.0.0.0'>192.0.0.0</option>");
	document.write("<option value='128.0.0.0'>128.0.0.0</option>");
}

function change_base()
{
	if(document.getElementById("id_PortBase").checked){
		document.getElementById("id_WANBridgeEnable_tb2").style.display="inline";
		document.getElementById("id_WANBridgeEnable_tb3").style.display="none";
	}else if(document.getElementById("id_ProtoBase").checked){
		document.getElementById("id_WANBridgeEnable_tb2").style.display="none";
		document.getElementById("id_WANBridgeEnable_tb3").style.display="inline";
	}
}

function setBridge()
{
	merge_mac("id_Proto_Smac","id_Proto_Smac1","id_Proto_Smac2","id_Proto_Smac3","id_Proto_Smac4","id_Proto_Smac5","id_Proto_Smac6");
	merge_mac("id_Proto_Dmac","id_Proto_Dmac1","id_Proto_Dmac2","id_Proto_Dmac3","id_Proto_Dmac4","id_Proto_Dmac5","id_Proto_Dmac6");
	merge_mac("id_Proto_Smac_Mask","id_Proto_Smac_Mask1","id_Proto_Smac_Mask2","id_Proto_Smac_Mask3","id_Proto_Smac_Mask4","id_Proto_Smac_Mask5","id_Proto_Smac_Mask6");
	merge_mac("id_Proto_Dmac_Mask","id_Proto_Dmac_Mask1","id_Proto_Dmac_Mask2","id_Proto_Dmac_Mask3","id_Proto_Dmac_Mask4","id_Proto_Dmac_Mask5","id_Proto_Dmac_Mask6");
	merge_ip("id_Proto_Sip","id_Proto_Sip1","id_Proto_Sip2","id_Proto_Sip3","id_Proto_Sip4");
	merge_ip("id_Proto_Dip","id_Proto_Dip1","id_Proto_Dip2","id_Proto_Dip3","id_Proto_Dip4");
	if (!check_wanBridge())
    {
		return false;
	}
	if(!document.getElementById("id_check_Proto_EthType").checked)
	{
		if (!check_wifiMac()){
			return false;
		}
	}
	qos_set();

}

function qos_set()
{
	fvt_form_submit('wanBridge_form');
	document.wanBridge_form.action="wwwctrl.cgi?action=wan_pon_connections";
	document.wanBridge_form.submit();
}

function Back()
{
	window.location.href="wwwctrl.cgi?action=wan_pon_connections";
}

function check_wanBridge()
{
	var item,msg,min,max;
	if(document.getElementById("id_PortBase").checked)
	{
		if( (document.getElementById("id_Port_SVLANID").value == "")   ||
        	(isBlank(document.getElementById("id_Port_SVLANID").value))  )
    	{
            item = "VLAN ID";
            msg = "Bridge-Port Base";
			warn_not_empty(item);
            return false;
    	}

    	if( (document.getElementById("id_Port_Pbit").value == "")   ||
    	(isBlank(document.getElementById("id_Port_Pbit").value))  )
    	{
            item = "PBit";
            msg = "Bridge-Port Base";
			warn_not_empty(item);
            return false;
    	}

    	if(!check_integer(document.getElementById("id_Port_SVLANID").value))
    	{
	        item = "VLAN ID";
            msg = "Bridge-Port Base";
	        min = "0";
	        max = "4094";
			warn_int_between(item,min,max);
	        return false;
    	}

    	if(!check_integer(document.getElementById("id_Port_Pbit").value))
    	{
	        item = "PBit";
            msg = "Bridge-Port Base";
	        min = "0";
	        max = "7";
			warn_int_between(item,min,max);
	        return false;
    	}

    	if (!check_integer_range(document.getElementById("id_Port_SVLANID").value,0,4096))
    	{
	        item = "VLAN ID";
            msg = "Bridge-Port Base";
	        min = "0";
	        max = "4094";
			warn_int_between(item,min,max);
	        return false;
    	}

    	if (!check_integer_range(document.getElementById("id_Port_Pbit").value,0,15))
    	{
	        item = "PBit";
            msg = "Bridge-Port Base";
	        min = "0";
	        max = "7";
			warn_int_between(item,min,max);
	        return false;
    	}
	}
	else if(document.getElementById("id_ProtoBase").checked)
	{
		if( (document.getElementById("id_Proto_SVLANID").value == "")  ||
        	(isBlank(document.getElementById("id_Proto_SVLANID").value))  )
    	{
            item = "VLAN ID";
            msg = "Bridge-Proto Base";
			warn_not_empty(item);
            return false;
    	}

    	if( (document.getElementById("id_Proto_Pbit").value == "")  ||
    	(isBlank(document.getElementById("id_Proto_Pbit").value))  )
    	{
            item = "PBit";
            msg = "Bridge-Proto Base";
			warn_not_empty(item);
            return false;
    	}

    	if(!check_integer(document.getElementById("id_Proto_SVLANID").value))
    	{
	        item = "VLAN ID";
            msg = "Bridge-Proto Base";
	        min = "0";
	        max = "4094";
			warn_int_between(item,min,max);
	        return false;
    	}

    	if(!check_integer(document.getElementById("id_Proto_Pbit").value))
    	{
	        item = "PBit";
            msg = "Bridge-Proto Base";
	        min = "0";
	        max = "7";
			warn_int_between(item,min,max);
	        return false;
    	}

    	if (!check_integer_range(document.getElementById("id_Proto_SVLANID").value,0,4096))
    	{
	        item = "VLAN ID";
            msg = "Bridge-Proto Base";
	        min = "0";
	        max = "4094";
			warn_int_between(item,min,max);
	        return false;
    	}

    	if (!check_integer_range(document.getElementById("id_Proto_Pbit").value,0,15))
    	{
	        item = "PBit";
            msg = "Bridge-Proto Base";
	        min = "0";
	        max = "7";
			warn_int_between(item,min,max);
	        return false;
    	}
//		if(document.getElementById("id_check_Proto_EthType").checked){
//			if ((document.getElementById("id_Proto_Sip").value =="")&&(document.getElementById("id_Proto_Dip").value=="")
//			&&(document.getElementById("id_Proto_SPort").value=="")&&(document.getElementById("id_Proto_DPort").value=="")
//			&&(document.getElementById("id_Proto_Protocol").value=="NONE")&&(document.getElementById("id_Proto_EthType").value==""))
//			{
//				alert("Error! You should setup at least one rule.");
//				return false;
//			}
			if (!check_port(document.getElementById("id_Proto_SPort").value))
			{
				alert("The Source Port should be an integer between 1 and 65535");
				return false;
			}
			if (!check_port(document.getElementById("id_Proto_DPort").value))
			{
				alert("The Destination Port should be an integer between 1 and 65535");
				return false;
			}
			if (!check_ip(document.getElementById("id_Proto_Sip").value))
			{
				alert("The Source IP is invalid!");
				return false;
			}
			if (!check_ip(document.getElementById("id_Proto_Dip").value))
			{
				alert("The Destination IP is invalid!");
				return false;
			}
			if((document.getElementById("id_Proto_Sip").value !="")&&(document.getElementById("id_Proto_Dip").value!=""))
			{
				if(document.getElementById("id_Proto_Sip").value == document.getElementById("id_Proto_Dip").value)
				{
					alert("The Destination IP is invalid!");
					return false;
				}
			}
//		}
		if( document.getElementById("id_Proto_TagEn").value ==1)
		{
			if(!check_integer_range(document.getElementById("id_Proto_TagID").value,0,4096))
			{
				item = "VLANTAG ID";
				msg = "Bridge-Proto Base";
				min = "0";
				max = "4096";
				warn_int_between(item,min,max);
				return false;
			}
			if(!check_integer_range(document.getElementById("id_Proto_TagPB").value,0,15))
			{
				item = "VLANTAG Pbit";
				msg = "Bridge-Proto Base";
				min = "0";
				max = "8";
				warn_int_between(item,min,max);
				return false;
			}
		}
	}
	return true;
}
function check_wifiMac()
{
	if(document.getElementById("id_ProtoBase").checked){
		document.getElementById("id_Proto_Smac").value = document.getElementById("id_Proto_Smac").value.toUpperCase();
		document.getElementById("id_Proto_Dmac").value = document.getElementById("id_Proto_Dmac").value.toUpperCase();
		document.getElementById("id_Proto_Smac_Mask").value = document.getElementById("id_Proto_Smac_Mask").value.toUpperCase();
		document.getElementById("id_Proto_Dmac_Mask").value = document.getElementById("id_Proto_Dmac_Mask").value.toUpperCase();
//		if((document.getElementById("id_Proto_Smac").value.length==0)
//			&&(document.getElementById("id_Proto_Dmac").value.length==0)
//			&&(document.getElementById("id_Proto_Smac_Mask").value.length==0)
//			&&(document.getElementById("id_Proto_Dmac_Mask").value.length==0))
//		{
//			alert("Error! You should setup at least one rule.");
//			return false;
//		}
		if (document.getElementById("id_Proto_Smac_Mask").value.length==0){
			if(document.getElementById("id_Proto_Smac").value.length!=0){
				alert("Source MAC Mask is empty!!");
				return false;
			}
		}
		if (document.getElementById("id_Proto_Dmac_Mask").value.length==0){
			if(document.getElementById("id_Proto_Dmac").value.length!=0){
				alert("Destination MAC Mask is empty!!");
				return false;
			}
		}
		if (document.getElementById("id_Proto_Smac").value.length==0){
			if(document.getElementById("id_Proto_Smac_Mask").value.length!=0){
				alert("Source MAC is empty!!");
				return false;
			}
		}
		if (document.getElementById("id_Proto_Dmac").value.length==0){
			if(document.getElementById("id_Proto_Dmac_Mask").value.length!=0){
				alert("Destination MAC is empty!!");
				return false;
			}
		}
		if((document.getElementById("id_Proto_Smac").value.length!=0)){
			if (!check_mac(document.getElementById("id_Proto_Smac").value))
			{
				alert("Source MAC is invalid!!");
				return false;
			}
			/*if (!check_mac(document.getElementById("id_Proto_Smac_Mask").value))
			{
				alert("Source MAC Mask is invalid!!");
				return false;
			}*/
			if (document.getElementById("id_Proto_Smac_Mask").value == document.getElementById("id_Proto_Smac").value)
			{
				alert("Source MAC Mask is invalid!!");
				return false;
			}
		}
		if((document.getElementById("id_Proto_Dmac").value.length!=0)){
			if (!check_mac(document.getElementById("id_Proto_Dmac").value))
			{
				alert("Destination MAC is invalid!!");
				return false;
			}
			/*if (!check_mac(document.getElementById("id_Proto_Dmac_Mask").value))
			{
				alert("Destination MAC Mask is invalid!!");
				return false;
			}*/
			if (document.getElementById("id_Proto_Dmac_Mask").value == document.getElementById("id_Proto_Dmac").value)
			{
				alert("Destination MAC Mask is invalid!!");
				return false;
			}
		}

		if((document.getElementById("id_Proto_Smac").value!="")&&(document.getElementById("id_Proto_Dmac").value!=""))
		{
			if (document.getElementById("id_Proto_Dmac").value == document.getElementById("id_Proto_Smac").value)
			{
				alert("Destination MAC is invalid!!");
				return false;
			}
			else if (document.getElementById("id_Proto_Dmac_Mask").value == document.getElementById("id_Proto_Smac").value)
			{
				alert("Destination MAC Mask is invalid!!");
				return false;
			}
			else if (document.getElementById("id_Proto_Smac_Mask").value == document.getElementById("id_Proto_Dmac").value)
			{
				alert("Source MAC Mask is invalid!!");
				return false;
			}
		}
	}
	return true;
}

function options_disable(){
	if(document.getElementById("id_check_Proto_EthType").checked){
//		for(var i=1;i<=6;i++){
//			document.getElementById("id_Proto_Smac"+i).disabled=true;
//			document.getElementById("id_Proto_Dmac"+i).disabled=true;
//			document.getElementById("id_Proto_Smac_Mask"+i).disabled=true ;
//			document.getElementById("id_Proto_Dmac_Mask"+i).disabled=true ;
//		}
		for(var i=1;i<=4;i++){
			document.getElementById("id_Proto_Sip"+i).disabled=false;
			document.getElementById("id_Proto_Dip"+i).disabled=false;
		}
		document.getElementById("id_Proto_EthType").disabled=false ;
		document.getElementById("id_Proto_Sip_Mask").disabled=false ;
		document.getElementById("id_Proto_Dip_Mask").disabled=false;
		document.getElementById("id_Proto_Protocol").disabled=false;
		document.getElementById("id_Proto_SPort").disabled=false;
		document.getElementById("id_Proto_DPort").disabled=false;
//	}else{
		for(var i=1;i<=6;i++){
			document.getElementById("id_Proto_Smac"+i).disabled=false;
			document.getElementById("id_Proto_Dmac"+i).disabled=false;
			document.getElementById("id_Proto_Smac_Mask"+i).disabled=false;
			document.getElementById("id_Proto_Dmac_Mask"+i).disabled=false;
		}
//		for(var i=1;i<=4;i++){
//			document.getElementById("id_Proto_Sip"+i).disabled=true;
//			document.getElementById("id_Proto_Dip"+i).disabled=true;
//		}
//		document.getElementById("id_Proto_EthType").disabled=true ;
//		document.getElementById("id_Proto_Sip_Mask").disabled=true ;
//		document.getElementById("id_Proto_Dip_Mask").disabled=true;
//		document.getElementById("id_Proto_Protocol").disabled=true;
//		document.getElementById("id_Proto_SPort").disabled=true;
//		document.getElementById("id_Proto_DPort").disabled=true;
	}

}

function Init()
{

	if (auParam == 2) //edit
	{
		if(sipParam!="" ||dipParam!="" ||sportParam!="" ||dportParam!="" ||ethtypeParam!="" ||protocolParam!="" ||smacParam!="" ||dmacParam!=""){
			document.getElementById("id_ProtoBase").checked=true;
			document.getElementById("id_check_Proto_EthType").checked=true;
			document.getElementById("id_Proto_lanport").value=uniPortParam;
		}
		else{
			document.getElementById("id_PortBase").checked=true;
			document.getElementById("id_Port_lanport").value=uniPortParam;
			document.getElementById("id_check_Proto_EthType").checked=false;
		}
		change_base();
		document.getElementById("id_Port_SVLANID").value=vidParam;
		document.getElementById("id_Port_Pbit").value=pbitParam;
		document.getElementById("id_Proto_SVLANID").value=vidParam;
		document.getElementById("id_Proto_Pbit").value=pbitParam;
		document.getElementById("id_Proto_Order").value=orderParam;

		var ethtype = new Array();
		if (ethtypeParam != '')
		{
			var ethtype = ethtypeParam.toUpperCase().split("X");
		}
		else
		{
			ethtype[1]="";
		}
		document.getElementById("id_Proto_EthType").value=ethtype[1] ;

		if(sipmaskParam=="")
			document.getElementById("id_Proto_Sip_Mask").value='255.255.255.255' ;
		else
			document.getElementById("id_Proto_Sip_Mask").value=sipmaskParam ;

		if(dipmaskParam=="")
			document.getElementById("id_Proto_Dip_Mask").value='255.255.255.255' ;
		else
			document.getElementById("id_Proto_Dip_Mask").value=dipmaskParam;

		if(protocolParam=="")
			document.getElementById("id_Proto_Protocol").value='' ;
		else
			document.getElementById("id_Proto_Protocol").value=protocolParam;

		document.getElementById("id_Proto_SPort").value=sportParam;
		document.getElementById("id_Proto_DPort").value=dportParam;
		document.getElementById("id_Proto_TagEn").value=tagenParam;
		document.getElementById("id_Proto_TagID").value=tagidParam;
		document.getElementById("id_Proto_TagPB").value=tagpbParam;

		if (smacParam != ''){
			var smac_split = smacParam.split(":");
		}else
		{
			var smac_split = new Array();
			smac_split[0] = '';
			smac_split[1] = '';
			smac_split[2] = '';
			smac_split[3] = '';
			smac_split[4] = '';
			smac_split[5] = '';
		}
		if (dmacParam != ''){
			var dmac_split = dmacParam.split(":");
		}else
		{
			var dmac_split = new Array();
			dmac_split[0] = '';
			dmac_split[1] = '';
			dmac_split[2] = '';
			dmac_split[3] = '';
			dmac_split[4] = '';
			dmac_split[5] = '';
		}
		if (smacmaskParam != ''){

			var smacmask_split = smacmaskParam.split(":");
		}else
		{
			var smacmask_split = new Array();
			smacmask_split[0] = '';
			smacmask_split[1] = '';
			smacmask_split[2] = '';
			smacmask_split[3] = '';
			smacmask_split[4] = '';
			smacmask_split[5] = '';
		}
		if (dmacmaskParam != ''){
			var dmacmask_split = dmacmaskParam.split(":");
		}else
		{
			var dmacmask_split = new Array();
			dmacmask_split[0] = '';
			dmacmask_split[1] = '';
			dmacmask_split[2] = '';
			dmacmask_split[3] = '';
			dmacmask_split[4] = '';
			dmacmask_split[5] = '';
		}
		for(i = 1;i<=6;i++)
		{
			document.getElementById("id_Proto_Smac"+i).value=smac_split[i-1];
			document.getElementById("id_Proto_Dmac"+i).value=dmac_split[i-1];
			document.getElementById("id_Proto_Smac_Mask"+i).value=smacmask_split[i-1];
			document.getElementById("id_Proto_Dmac_Mask"+i).value=dmacmask_split[i-1];
		}

		if (sipParam != ''){
			var sip_split = sipParam.split(".");
		}else
		{
			var sip_split = new Array();
			sip_split[0] = '';
			sip_split[1] = '';
			sip_split[2] = '';
			sip_split[3] = '';
		}
		if (dipParam != ''){
			var dip_split = dipParam.split(".");
		}else
		{
			var dip_split = new Array();
			dip_split[0] = '';
			dip_split[1] = '';
			dip_split[2] = '';
			dip_split[3] = '';
		}
		for(i = 1;i<=4;i++)
		{
			document.getElementById("id_Proto_Sip"+i).value=sip_split[i-1];
			document.getElementById("id_Proto_Dip"+i).value=dip_split[i-1];
		}

	}else
		change_base();
	options_disable();
	changeVlanTag();
	if (auParam == 1) //add
		BridgeEnParam = "1";
	else
		BridgeEnParam = fvt_meta_config("l2_proto_vlan"+CurItem+"_enable");
	document.wanBridge_form.BridgeEnable[BridgeEnParam].checked=true;
}

function fvt_form_submit(form_name) 	{
	fvt_paramlist_clear();
	if (form_name=='wanBridge_form' || form_name=='*') {

		if (auParam == 1)
		{
			//fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_enable", "1");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_name", WanNameParam);
		}
		fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_enable", fvt_form_obj_get("wanBridge_form", "BridgeEnable"));

		if(document.getElementById("id_PortBase").checked){
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_uniport", fvt_form_obj_get("wanBridge_form", "Port_lanport"));
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlan_mark", fvt_form_obj_get("wanBridge_form", "Port_SVLANID"));
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_pbit_mark", fvt_form_obj_get("wanBridge_form", "Port_Pbit"));
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_order", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_ethertype", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sip","");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sipmask", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dip", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dipmask", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_ip_proto", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sport", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dport", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_smac", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_smac_mask", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dmac", "");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dmac_mask", "");
            fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlantag_enable", "0");
            fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlantag_id", "");
            fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlantag_pbit", "");
		}
		else if(document.getElementById("id_ProtoBase").checked)
		{
			//fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_uniport", "*");
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_uniport", fvt_form_obj_get("wanBridge_form", "Proto_lanport"));
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlan_mark", fvt_form_obj_get("wanBridge_form", "Proto_SVLANID"));
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_pbit_mark", fvt_form_obj_get("wanBridge_form", "Proto_Pbit"));
			fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_order", fvt_form_obj_get("wanBridge_form", "Proto_Order"));

			//if(document.getElementById("id_check_Proto_EthType").checked){
				var ethType = fvt_form_obj_get("wanBridge_form", "Proto_EthType");
				if(ethType !="")
				{
					ethType = "0X"+ethType;
				}
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_ethertype", ethType);
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sip", fvt_form_obj_get("wanBridge_form", "Proto_Sip"));
				if(fvt_form_obj_get("wanBridge_form", "Proto_Sip")!=""){
					fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sipmask", fvt_form_obj_get("wanBridge_form", "Proto_Sip_Mask"));
				}else{
					fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sipmask", "");
				}
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dip", fvt_form_obj_get("wanBridge_form", "Proto_Dip"));
				if(fvt_form_obj_get("wanBridge_form", "Proto_Dip")!=""){
					fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dipmask", fvt_form_obj_get("wanBridge_form", "Proto_Dip_Mask"));
				}else{
					fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dipmask", "");
				}
				if(fvt_form_obj_get("wanBridge_form", "Proto_Protocol") == "NONE"){
					fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_ip_proto", "");
				}else{
					fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_ip_proto", fvt_form_obj_get("wanBridge_form", "Proto_Protocol"));
				}
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sport", fvt_form_obj_get("wanBridge_form", "Proto_SPort"));
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dport", fvt_form_obj_get("wanBridge_form", "Proto_DPort"));

				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlantag_enable", fvt_form_obj_get("wanBridge_form", "Proto_TagEn"));
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlantag_id", fvt_form_obj_get("wanBridge_form", "Proto_TagID"));
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_vlantag_pbit", fvt_form_obj_get("wanBridge_form", "Proto_TagPB"));
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_smac", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_smac_mask", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dmac", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dmac_mask", "");
			//}else{
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_smac", fvt_form_obj_get("wanBridge_form", "Proto_Smac"));
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_smac_mask", fvt_form_obj_get("wanBridge_form", "Proto_Smac_Mask"));
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dmac", fvt_form_obj_get("wanBridge_form", "Proto_Dmac"));
				fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dmac_mask", fvt_form_obj_get("wanBridge_form", "Proto_Dmac_Mask"));
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_ethertype", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sip","");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sipmask", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dip", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dipmask", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_ip_proto", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_sport", "");
			//	fvt_paramlist_cat_str("l2_proto_vlan"+CurItem+"_dport", "");
			//}
		}
	}
	fvt_paramlist_presubmit(form_name);
}

function showEthType()
{
	window.open("wwwctrl.cgi?action=ethtype","Ether Type","width=800,height=130,toolbar=no,status=no,resize=no,location=no");
}

function changeVlanTag()
{
	var val;
	if (document.getElementById("id_Proto_TagEn").value==1)
		val=false;
	else
		val=true;
	document.getElementById("id_Proto_TagID").disabled = val;
	document.getElementById("id_Proto_TagPB").disabled = val;
}
//-->
</script>
</head>

<body onload="Init();">
<div id="container" >
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="id_wanHybrid_form" name="wanBridge_form" method="post">
<div class="div1_indent lv3_new">
	<input type="hidden" name="nosave_WanMode" value='DHCP'>
	<table border="0" cellpadding="0" cellspacing="0"><tr ctrlflip="right">
			<td><div class="lv2_new">[</div></td>
			<td><div class="lv2_new" ctrlid="350">Route</div></td>
			<td><div class="lv2_new">] - [</div></td>
			<td><div class="lv2_new" ctrlid="37">Bridge</div></td>
			<td><div class="lv2_new">]</div></td>
	</tr></table>

	<div class="top_routebridge1">
		<div class="lv3_new">
<!-- DHCP start -->
		    <table border="0" cellpadding="0" cellspacing="0" id="id_WANBridgeEnable_tbl">
				<tr>
					<td class="width_routebridge1"><div class="lv2_new" ctrlflip="right" ctrlid="355">WAN</div></td>
				</tr>
				<tr>
					<td></td>
					<td class="width_routebridge3">
						<table><tr>
							<td><div class="lv2_new">
								<input type="radio" name="BridgeBase" id="id_PortBase" value="0" onclick="change_base();" class="radio" checked>Port Base</div></td>
						</tr></table>
					</td>
					<td class="width_routebridge3">
						<table><tr>
							<td><div class="lv2_new">
							<input type="radio" name="BridgeBase" id="id_ProtoBase" value="1" onclick="change_base();" class="lv2_new" class="radio">Protocol Base</div>
							<div class="lv2_new" ctrlflip="right" ctrlid="367"></div></td>
						</tr></table>
					</td>
				</tr>
				<tr>
				<td></td>
				<td><table><tr>
					<td><div class="lv2_new" ctrlflip="etc" ctrlid="369">Interface</div></td>
					<td><div class="size_gt lv2_new">></div></td>
				</tr></table></td>
				<td><table><tr>
				<td><input type="radio" name="BridgeEnable" id="id_BridgeEnable" value="0" class="radio">Disable</td>
				<td>&nbsp;&nbsp;</td>
				<td><input type="radio" name="BridgeEnable" id="id_BridgeEnable" value="1" class="radio" checked>Enable</td>
				</tr></table></td>
			</tr>
			</table>

<!--***** Port Base Start Here*****-->
		    <table border="0" cellpadding="0" cellspacing="0" id="id_WANBridgeEnable_tb2">
				<tr>
					<td class="width_routebridge1"><div class="lv2_new" ctrlflip="right" ctrlid="355"></div></td>
				</tr>
				<tr >
					<td></td>
					<td class="width_routebridge3"><table><tr>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">LAN Port</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><select name="Port_lanport" id="id_Port_lanport" style="width:100px">
					<script>
						list_lanport();
					</script>
					</td>
				</tr>
				<tr >
					<td></td>
					<td class="width_routebridge3"><table><tr>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">VLAN ID</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_alwaysid' maxlength='4' size='4' name="Port_SVLANID" id="id_Port_SVLANID" value="">
					</td>
				</tr>
				<tr >
					<td></td>
					<td class="width_routebridge3"><table><tr>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Pbit</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_pbittxt' maxlength='2' size='2' name="Port_Pbit" id="id_Port_Pbit" value="">
					</td>
				</tr>
			</table>

<!--***** Protocol Base Start Here*****-->
		    <table border="0" cellpadding="0" cellspacing="0" id="id_WANBridgeEnable_tb3" style="display:inline">
				<tr>
					<td></td>
					<td><hr class="hr2"></td>
					<td><hr class="hr2"></td>

				</tr>
				<tr >
					<td></td>
					<td class="width_routebridge3"><table><tr>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">LAN Port</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><select name="Proto_lanport" id="id_Proto_lanport" style="width:100px">
					<script>
						list_proto_lanport();
					</script>
					</td>
				</tr>
				<tr>
					<td class="width_routebridge1"><div class="lv2_new" ctrlflip="right" ctrlid="355"></div></td>
				</tr>
				<tr style="display:none">
					<td ></td>
					<td class="width_routebridge3"><table><tr>
						<td></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Order</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_pbittxt' maxlength='2' size='2' name="Proto_Order" id="id_Proto_Order" value=""></td>
				</tr>

<!-- Filter -->
				<tr>
					<td></td>
					<td class="width_routebridge3"><table><tr>
					   <td><div class="overview_title2" ctrlflip="right" ctrlid="367"><U>Filter :</U></div></td>
					</tr></table></td>
				</tr>
<!-- Destination Mac -->
				<tr>
					<td></td>
					<td class="width_routebridge3"><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Destination Mac</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<script language="javascript" type="text/javascript">
						document.write("<td><input name=\"Proto_Dmac\" id=\"id_Proto_Dmac\" value='' type=\"hidden\">");
						var mac = document.getElementById("id_Proto_Dmac").value;
						if (mac != '')
							var mac_split = mac.split(":");
						else
						{
							var mac_split = new Array();
							mac_split[0] = '';
							mac_split[1] = '';
							mac_split[2] = '';
							mac_split[3] = '';
							mac_split[4] = '';
							mac_split[5] = '';
						}
						document.write("<input id=\"id_Proto_Dmac1\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[0]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac2\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[1]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac3\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[2]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac4\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[3]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac5\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[4]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac6\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[5]+"' type=\"text\"></td>");
					</script>
				</tr>
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox">&nbsp;</td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Destination Mac Mask</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<script language="javascript" type="text/javascript">
						document.write("<td><input name=\"Proto_Dmac_Mask\" id=\"id_Proto_Dmac_Mask\" value='' type=\"hidden\">");
						var mac = document.getElementById("id_Proto_Dmac_Mask").value;
						if (mac != '')
							var mac_split = mac.split(":");
						else
						{
							var mac_split = new Array();
							mac_split[0] = '';
							mac_split[1] = '';
							mac_split[2] = '';
							mac_split[3] = '';
							mac_split[4] = '';
							mac_split[5] = '';
						}
						document.write("<input id=\"id_Proto_Dmac_Mask1\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[0]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac_Mask2\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[1]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac_Mask3\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[2]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac_Mask4\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[3]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac_Mask5\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[4]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Dmac_Mask6\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[5]+"' type=\"text\"></td>");
					</script>
				</tr>

<!-- Source Mac -->
				<tr>
					<td></td>
					<td class="width_routebridge3"><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Source Mac</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<script language="javascript" type="text/javascript">
						document.write("<td><input name=\"Proto_Smac\" id=\"id_Proto_Smac\" value='' type=\"hidden\">");
						var mac = document.getElementById("id_Proto_Smac").value;
						if (mac != '')
							var mac_split = mac.split(":");
						else
						{
							var mac_split = new Array();
							mac_split[0] = '';
							mac_split[1] = '';
							mac_split[2] = '';
							mac_split[3] = '';
							mac_split[4] = '';
							mac_split[5] = '';
						}
						document.write("<input id=\"id_Proto_Smac1\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[0]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac2\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[1]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac3\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[2]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac4\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[3]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac5\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[4]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac6\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[5]+"' type=\"text\"></td>");
					</script>
				</tr>
				<tr>
					<td ></td>
					<td class="width_routebridge3"><table><tr>
						<td class="width_withcheckbox">&nbsp;</td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Source Mac Mask</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<script>
						document.write("<td><input name=\"Proto_Smac_Mask\" id=\"id_Proto_Smac_Mask\" value='' type=\"hidden\">");
						var mac = document.getElementById("id_Proto_Smac_Mask").value;
						if (mac != '')
							var mac_split = mac.split(":");
						else
						{
							var mac_split = new Array();
							mac_split[0] = '';
							mac_split[1] = '';
							mac_split[2] = '';
							mac_split[3] = '';
							mac_split[4] = '';
							mac_split[5] = '';
						}
						document.write("<input id=\"id_Proto_Smac_Mask1\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[0]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac_Mask2\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[1]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac_Mask3\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[2]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac_Mask4\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[3]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac_Mask5\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[4]+"' type=\"text\"> :&nbsp;");
						document.write("<input id=\"id_Proto_Smac_Mask6\" class=\"width_mac\" size=\"2\" maxlength=\"2\" value='"+mac_split[5]+"' type=\"text\"></td>");
					</script>
				</tr>

<!-- Vlan Tag -->
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">VLan Enable</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><select ctrlflip="etc" name="Proto_TagEn" id="id_Proto_TagEn" onchange="changeVlanTag()" class="width_select80">
						<option value=0>Disable</option>
						<option value=1>Enable</option>
					</select>
					</td>
				</tr>

				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">VLan ID</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_alwaysid' maxlength='4' size='4' name="Proto_TagID" id="id_Proto_TagID" value=""></td>
				</tr>
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">VLan Pbit</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_pbittxt' maxlength='2' size='2' name="Proto_TagPB" id="id_Proto_TagPB" value=""></td>
				</tr>

<!-- Eth Type -->
				<tr>
					<td></td>
					<td class="width_routebridge3"><table><tr>
					    <!--
						<td class="width_withcheckbox"><input type="checkbox" id="id_check_Proto_EthType" onclick="options_disable();" checked></td>
						-->
						<td class="width_withcheckbox"><input type="Hidden" id="id_check_Proto_EthType" onclick="options_disable();" checked></td>

						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">EtherType</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td>0x<input type="text" class='width_routebridge_port' maxlength='4' size='4' name="Proto_EthType" id="id_Proto_EthType" value="">
						<!--<input type="button"  id="id_ethTypeBtn" onclick="showEthType()" value="Select Ethertype">-->
						<a onclick="showEthType()" href="javascript:void(0)">Select Ethertype</a>
					</td>
				</tr>

<!-- Protocol -->
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Protocol</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><select class='width_select80'  name="Proto_Protocol" id="id_Proto_Protocol" >
						<option value="">NONE</option>
						<option value="6">TCP</option>
						<option value="17">UDP</option>
					</td>
				</tr>

<!-- Destination IP -->
				<tr>
					<td></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Destination IP</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<script language="javascript" type="text/javascript">
						document.write("<td><input name=\"Proto_Dip\" id=\"id_Proto_Dip\" value='' type=\"hidden\">");
						var ip = document.getElementById("id_Proto_Dip").value;
						if (ip != '')
							var ip_split = ip.split(".");
						else
						{
							var ip_split = new Array();
							ip_split[0] = '';
							ip_split[1] = '';
							ip_split[2] = '';
							ip_split[3] = '';
						}
						document.write("<input id=\"id_Proto_Dip1\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[0]+"' type=\"text\"> .&nbsp;");
						document.write("<input id=\"id_Proto_Dip2\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[1]+"' type=\"text\"> .&nbsp;");
						document.write("<input id=\"id_Proto_Dip3\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[2]+"' type=\"text\"> .&nbsp;");
						document.write("<input id=\"id_Proto_Dip4\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[3]+"' type=\"text\">");
						document.write("</td>");
					</script>
				</tr>
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox">&nbsp;</td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Destination IP Mask</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><select width="120" name="Proto_Dip_Mask" id="id_Proto_Dip_Mask" >
					<script>
						IPNetMask();
					</script>
					</td>
				</tr>

<!-- Source IP -->
				<tr>
					<td></td>
					<td class="width_routebridge3"><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Source IP</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<script language="javascript" type="text/javascript">
						document.write("<td><input name=\"Proto_Sip\" id=\"id_Proto_Sip\" value='' type=\"hidden\">");
						var ip = document.getElementById("id_Proto_Sip").value;
						if (ip != '')
							var ip_split = ip.split(".");
						else
						{
							var ip_split = new Array();
							ip_split[0] = '';
							ip_split[1] = '';
							ip_split[2] = '';
							ip_split[3] = '';
						}
						document.write("<input id=\"id_Proto_Sip1\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[0]+"' type=\"text\"> .&nbsp;");
						document.write("<input id=\"id_Proto_Sip2\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[1]+"' type=\"text\"> .&nbsp;");
						document.write("<input id=\"id_Proto_Sip3\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[2]+"' type=\"text\"> .&nbsp;");
						document.write("<input id=\"id_Proto_Sip4\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+ip_split[3]+"' type=\"text\">");
						document.write("</td>");
					</script>
				</tr>
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox">&nbsp;</td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Source IP Mask</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><select width="120" name="Proto_Sip_Mask" id="id_Proto_Sip_Mask" >
					<script>
						IPNetMask();
					</script>
					</td>
				</tr>

<!-- Source Port -->
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Source Port</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_port' maxlength='5' size='5' name="Proto_SPort" id="id_Proto_SPort" value=""></td>
				</tr>

<!-- Destination Port -->
				<tr>
					<td ></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Destination Port</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_port' maxlength='5' size='5' name="Proto_DPort" id="id_Proto_DPort" value=""></td>
				</tr>

				<tr></tr>
<!-- Action -->
				<tr>
					<td></td>
					<td class="width_routebridge3"><table><tr>
					   <td><div class="overview_title2" ctrlflip="right" ctrlid="367"><U>Action :</U></div></td>
					</tr></table></td>
				</tr>

				<tr>
					<td></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">VLAN ID</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td ><input type="text" class='width_routebridge_alwaysid' maxlength='4' size='4' name="Proto_SVLANID" id="id_Proto_SVLANID" value=""></td>
				</tr>
				<tr>
					<td></td>
					<td><table><tr>
						<td class="width_withcheckbox"></td>
						<td><div class="lv2_new" ctrlflip="right" ctrlid="367">Pbit (Priority bit)</div></td>
						<td><div class="size_gt lv2_new">></div></td>
					</tr></table></td>
					<td><input type="text" class='width_routebridge_pbittxt' maxlength='2' size='2' name="Proto_Pbit" id="id_Proto_Pbit" value=""></td>
				</tr>
			</table>
		</div>
	</div>
<!-- DHCP end -->
	<div class="top_cwmp2">
		<table align="center" border="0" cellpadding="0" cellspacing="0">
		    <tr>
				<td class="button_center">
					<input ctrlflip="etc" type="button" value="Save" class="width_routebridge_save" onClick="setBridge();">
					<input ctrlflip="etc" type="button" value='Back' class="width_routebridge_back" onClick="Back();">
				</td>
		    </tr>
		 </table>
	</div>
	<div><hr class="hr2"></div>
</div>
</form>
</td></tr>
</tbody></table>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>


<script language="javascript" type="text/javascript">
function changeMode()
{
	var val;
	if (document.getElementById('SNMP_Agent').value==0)
		val=true;
	else
		val=false;
	document.getElementById("snmp_read_comm").disabled = val;
	document.getElementById("snmp_write_comm").disabled = val;
	document.getElementById("snmp_trap_comm").disabled = val;
	document.getElementById("snmp_sys_name").disabled = val;
	document.getElementById("snmp_sys_locat").disabled = val;
	document.getElementById("snmp_sys_contact").disabled = val;
	document.getElementById("snmp_trap_ip").disabled = val;
}
function fvt_form_init(form_name)
{
	if (form_name=='snmpd_form' || form_name=='*') {
		{
			fvt_form_obj_set("snmpd_form", "SNMP_Agent", fvt_meta_config('snmpd_enable'));
			fvt_form_obj_set("snmpd_form", "snmp_read_comm", fvt_meta_config('snmpd_read_community'));
			fvt_form_obj_set("snmpd_form", "snmp_write_comm", fvt_meta_config('snmpd_write_community'));
			fvt_form_obj_set("snmpd_form", "snmp_trap_comm", fvt_meta_config('snmpd_trap_community'));
			fvt_form_obj_set("snmpd_form", "snmp_sys_name", fvt_meta_config('snmpd_sysname'));
			fvt_form_obj_set("snmpd_form", "snmp_sys_locat", fvt_meta_config('snmpd_syslocation'));
			fvt_form_obj_set("snmpd_form", "snmp_sys_contact", fvt_meta_config('snmpd_syscontact'));
			fvt_form_obj_set("snmpd_form", "snmp_trap_ip", fvt_meta_config('snmpd_trap_host'));
			changeMode();
		}
	}
}

function fvt_form_submit(form_name) 	{

	fvt_paramlist_clear();

	if (form_name=='snmpd_form' || form_name=='*') {

		fvt_paramlist_cat_str('snmpd_enable',          fvt_form_obj_get("snmpd_form", "SNMP_Agent"));
		fvt_paramlist_cat_str('snmpd_read_community',  fvt_form_obj_get("snmpd_form", "snmp_read_comm"));
		fvt_paramlist_cat_str('snmpd_write_community', fvt_form_obj_get("snmpd_form", "snmp_write_comm"));
		fvt_paramlist_cat_str('snmpd_trap_community',  fvt_form_obj_get("snmpd_form", "snmp_trap_comm"));
		fvt_paramlist_cat_str('snmpd_syslocation',     fvt_form_obj_get("snmpd_form", "snmp_sys_locat"));
		fvt_paramlist_cat_str('snmpd_syscontact',      fvt_form_obj_get("snmpd_form", "snmp_sys_contact"));
		fvt_paramlist_cat_str('snmpd_sysname',         fvt_form_obj_get("snmpd_form", "snmp_sys_name"));
		fvt_paramlist_cat_str('snmpd_trap_host',       fvt_form_obj_get("snmpd_form", "snmp_trap_ip"));
	}
	fvt_paramlist_presubmit(form_name);

}

function applychange()
{
//	if(document.getElementById('SNMP_Agent').value==1)
//	{
		if (!check_ip(document.getElementById("snmp_trap_ip").value))
		{
			fvt_form_obj_set("snmpd_form", "snmp_trap_ip", fvt_meta_config('snmpd_trap_host'));
			alert("The Trap Manager IP is invalid!");
			return false;
		}
//	}
	fvt_form_submit('snmpd_form');
	document.getElementById('snmpd_form').submit();
}

</script>
</head>

<body align="left" onload="fvt_form_init('snmpd_form');">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="snmpd_form" name="snmpd_form" method="post">
	<fieldset>
		<div class="lv1_title">Advanced Setup&nbsp;&gt;&nbsp;SNMP Configuration</div>
	</fieldset>
<div class="div1_indent">
	<div class="lv2_new">

	<table>
			<tr><td class="widthddns1"><div ctrlflip="right" ctrlid="260">SNMP Agent</div></td>
				<td><select ctrlflip="etc" name="SNMP_Agent" id="SNMP_Agent" onchange="changeMode()" class="width_select80">
						<option value="0">Disable</option>
						<option value="1">Enable</option>
					</select>
				</td>
			</tr>

			<tr><td><div ctrlflip="right" ctrlid="261">Read Community:</div></td>
				<td><input ctrlflip="etc" type="text" name="snmp_read_comm" id="snmp_read_comm" class="width_text80" maxlength="16"></td>
			</tr>
			<tr><td><div ctrlflip="right" ctrlid="261">Write Community:</div></td>
				<td><input ctrlflip="etc" type="text" name="snmp_write_comm" id="snmp_write_comm" class="width_text80" maxlength="16"></td>
			</tr>
			<tr><td><div ctrlflip="right" ctrlid="261">Trap Community:</div></td>
				<td><input ctrlflip="etc" type="text" name="snmp_trap_comm" id="snmp_trap_comm" class="width_text80" maxlength="16"></td>
			</tr>
			<tr><td><div ctrlflip="right" ctrlid="261">System Name:</div></td>
				<td><input ctrlflip="etc" type="text" name="snmp_sys_name" id="snmp_sys_name" class="width_text80"></td>
			</tr>
			<tr><td><div ctrlflip="right" ctrlid="261">System Location:</div></td>
				<td><input ctrlflip="etc" type="text" name="snmp_sys_locat" id="snmp_sys_locat" class="width_text80"></td>
			</tr>
			<tr><td><div ctrlflip="right" ctrlid="261">System Contact:</div></td>
				<td><input ctrlflip="etc" type="text" name="snmp_sys_contact" id="snmp_sys_contact" class="width_text80"></td>
			</tr>
			<tr><td><div ctrlflip="right" ctrlid="42">Trap Manager IP:</div></td>
				<td><input ctrlflip="etc" type="text" name="snmp_trap_ip" id="snmp_trap_ip" class="width_text80"></td>
			</tr>
		</table>
	</div>
	<div><hr class="hr2"></div>

	<div class="top_cwmp2">
	<table><tbody>
		<tr>
			<td></td>
			<td class="button_center">
				<input ctrlflip="etc" type="button" name="applybtn" value="Apply Changes" onclick="applychange();" class="width_apply">
			</td>
		</tr>
	</tbody></table>
	</div>
</div>
</form>
</td></tr>
</tbody></table>
</div>

<br>
</body>
</html>





<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../css/common.css" media="all">
<link href="../css/zycss.css" rel="stylesheet" type="text/css" />
<script language="javascript" type="text/javascript" src="../js/menu_base.js"></script>
<script language="javascript" type="text/javascript" src="../js/menu.js"></script>
<script language="javascript" type="text/javascript" src="../js/common.js"></script>
<script language="javascript" type="text/javascript" src="../js/fvt.js"></script>
<script language="javascript" type="text/javascript" src="../js/md5.js"></script>
<script language="javascript" type="text/javascript" src="../js/rc4.js"></script>
<style type="text/css">
tr.rowt{background-color:#E0E0E0}
tr.rowh{background-color:#F0F0F0}
/* DarkBlue */
div.rowh{color:#00008B}
div.cellt{color:DarkGray}
/* DarkSlateGrey */
div.cells{color:#2F4F4F}
</style>
<script language="javascript" type="text/javascript">
var NavLang=GetNavLang();

if (NavLang == "ZH")
{
var vRegSLID = "註冊ID\(SLID\)值";
var vEnterLN = "請輸入專線編號後10碼";
var vNotice = "請注意：";
var vRegInfo = "SLID格式最多為10個ASCII字元或是以0x開頭的20個16進位字元所組成";
var vWarningRestart = "警告： 改變SLID將會導致重新啟動設備";
var vWanMode = "WAN端模式";
var vEnPPPoE = "請輸入中華電信所提供之使用者名稱與密碼以建立網路連線";
var vSetup = "設定";
var vSSIDName = "名稱\(SSID\)";
var vOpen = "開放系統";
var vShared = "共用金鑰";
var vAppSave = "儲存";
var vTRSucess = "供裝成功";
var vTRFail = "供裝失敗";
var vNetFail = "網路異常";
var vWlanpw = "<br>\(8~63個ASCII字元. 預設值為 \"00000000\"\)"
var vWlanweppw = "\(預設值為 \"1234567890\"\)"
var vradiuskey = "\(預設值為 \"123456\"\)"
}
else
{
var vRegSLID = "Registration ID\(SLID\)";
var vEnterLN = "";
var vNotice = "Notice :";
var vRegInfo = "Registration ID is composed by 10 ASCII characters or 20 hex characters";
var vWarningRestart = "Warning : It will reboot device if changing Registration ID";
var vWanMode = "WAN Mode";
var vEnPPPoE = "Please enter PPPoE username and password to enable network connection";
var vSetup = "Setup";
var vSSIDName = "Name\(SSID\)";
var vOpen = "OPEN";
var vShared = "WEP";
var vAppSave = "Save";
var vTRSucess = "Apply Successful";
var vTRfail = "Alpply Fail";
var vNetFail = "Network Fail";
var vWlanpw = "<br>\(8~63 ASCII characters, default: \"00000000\"\)"
var vWlanweppw = "\(default: \"1234567890\"\)"
var vradiuskey = "\(default: \"123456\"\)"
}

var authtype_flag=0;
var security_flag=0;
var rc4Key = "27885vt8118";
var ency_set = 1;
var show_802_1x = 0;
var show_wep = 0;

var wan_max = 8;
var lan_max = 8;
var cpe_deviceid_str_old;
function faceinter()
{
	var ifname;
	for (var k=0;k<wan_max;k++)
	{
		if(fvt_meta_config("wan"+k+"_if_name") != '')
		{
			ifname = fvt_meta_config("wan"+k+"_if_name");
			ifinter = fvt_meta_config("dev_wan"+k+"_interface");
			document.write("<option value='"+ifinter+"'>"+ifinter+"("+ifname+")</option>");
		}
	}
	for (var l=0;l<lan_max;l++)
	{
		if(fvt_meta_config("dev_lan"+l+"_interface") != '')
		{
			//ifname = fvt_meta_config("wan"+l+"_if_name");
			ifinter = fvt_meta_config("dev_lan"+l+"_interface");
			document.write("<option value='"+ifinter+"'>"+ifinter+"</option>");
		}
	}
}

function check_WAN()
{
	if(document.getElementById("id_WANUsername").value == "")
	{
			warn_not_empty("WAN User Name");
			return false;
	}
	if(document.getElementById("id_WANPassword").value == "")
	{
			warn_not_empty("WAN Password");
			return false;
	}
	return true;
}

function changedhcpIP(index)
{
	document.getElementById("id_DHCPSIPStart"+index).value = document.getElementById("id_LanIPAddr"+index).value;
	document.getElementById("id_DHCPSIPEnd"+index).value = document.getElementById("id_LanIPAddr"+index).value;
}
/*
function check_LAN()
{
	merge_ip("id_LanIPAddr","id_LanIPAddr1","id_LanIPAddr2","id_LanIPAddr3","id_LanIPAddr4");
	merge_ip("id_LanNetmask","id_LanNetmask1","id_LanNetmask2","id_LanNetmask3","id_LanNetmask4");
	merge_ip("id_DHCPSIPStart","id_DHCPSIPStart1","id_DHCPSIPStart2","id_DHCPSIPStart3","id_DHCPSIPStart4");
	merge_ip("id_DHCPSIPEnd","id_DHCPSIPEnd1","id_DHCPSIPEnd2","id_DHCPSIPEnd3","id_DHCPSIPEnd4");
	if (document.quick_setup.LanIPAddr.value=="")
	{
		msg="IP Address";
		no="";
		warn_invalid(msg);
		//alert(msg +" " +no + " is invalid");
		return false;
	}

	if ((document.quick_setup.LanNetmask.value == "")||(!check_netmask(document.quick_setup.LanNetmask.value)))
	{
		warn_invalid("Subnet Mask");
		//alert("Subnet Mask is invalid!");
		return false ;
	}
	if (!check_ip(document.quick_setup.LanIPAddr.value,document.quick_setup.LanNetmask.value))
		{
				msg="IP Address";
				no="";
				warn_invalid(msg);
				//alert(msg +" " +no + " is invalid");
				return false;
		}
	if ( document.quick_setup.DHCPSEnable.selectedIndex == 1)
	{
		if (! check_ip(document.getElementById("id_DHCPSIPStart").value,document.quick_setup.LanNetmask.value))
		{
			warn_invalid("DHCP Starting IP Address1");
			//alert("DHCP Starting IP Address is invalid!");
			return false;
		}

		if ( !checkSubnet(document.quick_setup.LanIPAddr.value,document.quick_setup.LanNetmask.value,document.getElementById("id_DHCPSIPStart").value))
		{
			warn_invalid("DHCP Starting IP Address2");
		//	alert("DHCP Starting IP Address is invalid!");
			document.getElementById("id_DHCPSIPStart").value = document.getElementById("id_DHCPSIPStart").defaultValue;
			return false;
		}

			if ( !check_ip(document.quick_setup.DHCPSIPEnd.value,document.quick_setup.LanNetmask.value))
			{
				warn_invalid("DHCP Ending IP Address");
				//alert("DHCP Ending IP Address is invalid!");
				return false;
			}

			if ( !checkSubnet(document.quick_setup.LanIPAddr.value,document.quick_setup.LanNetmask.value,document.quick_setup.DHCPSIPEnd.value))
			{
				warn_invalid("DHCP Ending IP Address");
				//alert("DHCP Ending IP Address is invalid!");
				document.quick_setup.DHCPSIPEnd.value = document.quick_setup.DHCPSIPEnd.defaultValue;
				return false;
			}
			if ( !checkClientRange(document.quick_setup.LanIPAddr.value,document.getElementById("id_DHCPSIPStart").value,document.quick_setup.DHCPSIPEnd.value) )
			{
				warn_ipdhcp();
				//alert("Invalid DHCP range value! Please check IP address and DHCP Address!");
				return false;

			}
	}
	return true;
}*/
function checkClientRange(gw,start,end)
{
	var gw_d,start_d,end_d;

	gw_d = getDigit(gw,4);
	gw_d +=	getDigit(gw,3)*256;
	gw_d +=	getDigit(gw,2)*256;
	gw_d +=	getDigit(gw,1)*256;

	start_d	= getDigit(start,4);
	start_d	+= getDigit(start,3)*256;
	start_d	+= getDigit(start,2)*256;
	start_d	+= getDigit(start,1)*256;

	end_d =	getDigit(end,4);
	end_d += getDigit(end,3)*256;
	end_d += getDigit(end,2)*256;
	end_d += getDigit(end,1)*256;
	if( start_d <= end_d ){
		if((start_d <= gw_d) &&	(gw_d <= end_d))
			return false;
		else
			return true;
	}

	return false;
}

function dhcpChange()
{
/*	var i;
	if ( document.quick_setup.DHCPSEnable.value == 0 )
	{
			document.getElementById("id_DHCPSIPStart1").disabled=true;
			document.getElementById("id_DHCPSIPStart2").disabled=true;
			document.getElementById("id_DHCPSIPStart3").disabled=true;
			document.getElementById("id_DHCPSIPStart4").disabled=true;
			document.getElementById("id_DHCPSIPEnd1").disabled=true;
			document.getElementById("id_DHCPSIPEnd2").disabled=true;
			document.getElementById("id_DHCPSIPEnd3").disabled=true;
			document.getElementById("id_DHCPSIPEnd4").disabled=true;
	}else
	{
			document.getElementById("id_DHCPSIPStart1").disabled=false;
			document.getElementById("id_DHCPSIPStart2").disabled=false;
			document.getElementById("id_DHCPSIPStart3").disabled=false;
			document.getElementById("id_DHCPSIPStart4").disabled=false;
			document.getElementById("id_DHCPSIPEnd1").disabled=false;
			document.getElementById("id_DHCPSIPEnd2").disabled=false;
			document.getElementById("id_DHCPSIPEnd3").disabled=false;
			document.getElementById("id_DHCPSIPEnd4").disabled=false;
	}*/
}

function Authen(val)
{
	var item1=document.getElementById("id_WIFIAuthType" + val).value;
	var item2=document.getElementsByName("WIFIEncrypType" + val);
	var nvram;
	nvram=item1;
	document.getElementById("id_sercurityNon" + val).disabled= true;
	document.getElementById("id_sercurityWep" + val).disabled= true;
	document.getElementById("id_sercurityTkip" + val).disabled= true;
	document.getElementById("id_sercurityAes" + val).disabled= true;
	document.getElementById("id_sercurityTkipAes" + val).disabled= true;

	if (val==1)
	{
		document.getElementById("id_WIFIRadiusWanif").disabled=true;
		document.getElementById("id_WIFIRadiusServer_item1").disabled=true;
		document.getElementById("id_WIFIRadiusServer_item2").disabled=true;
		document.getElementById("id_WIFIRadiusServer_item3").disabled=true;
		document.getElementById("id_WIFIRadiusServer_item4").disabled=true;
		document.getElementById("id_WIFIRadiusServer").disabled=true;
		document.getElementById("id_WIFIRadiusPort").disabled=true;
		document.getElementById("id_WIFIRadiusKey").disabled=true;
	}

	if (item1=="OPEN")
	{
		document.getElementById("id_sercurityNon" + val).disabled= false;
		document.getElementById("id_sercurityWep" + val).disabled= false;
		set_auth_flag(0,val);
		encryptNone(val);
	}

	if (item1=="SHARED")
	{
		document.getElementById("id_sercurityWep" + val).disabled= false;
		set_auth_flag(1,val);
	}
	if (item1=="WPAPSK")
	{
		document.getElementById("id_sercurityTkip" + val).disabled= false;
		document.getElementById("id_sercurityAes" + val).disabled= false;
		document.getElementById("id_sercurityTkipAes" + val).disabled= false;
		set_auth_flag(2,val);
	}
	if (item1=="WPA2PSK")
	{
		document.getElementById("id_sercurityTkip" + val).disabled= false;
		document.getElementById("id_sercurityAes" + val).disabled= false;
		document.getElementById("id_sercurityTkipAes" + val).disabled= false;
		set_auth_flag(3,val);
	}
	if (item1=="WPAPSKWPA2PSK")
	{
		document.getElementById("id_sercurityTkip" + val).disabled= false;
		document.getElementById("id_sercurityAes" + val).disabled= false;
		document.getElementById("id_sercurityTkipAes" + val).disabled= false;
		set_auth_flag(4,val);
	}
		if (item1=="WPA")
		{
			document.getElementById("id_sercurityTkip" + val).disabled= false;
			document.getElementById("id_sercurityAes" + val).disabled= false;
			document.getElementById("id_sercurityTkipAes" + val).disabled= false;
			set_auth_flag(5,val);
		}
		if (item1=="WPA2")
		{
			document.getElementById("id_sercurityTkip" + val).disabled= false;
			document.getElementById("id_sercurityAes" + val).disabled= false;
			document.getElementById("id_sercurityTkipAes" + val).disabled= false;
			set_auth_flag(6,val);
		}
	if (nvram=="SHARED" || nvram=="WPA" || nvram=="WPA2")

	if (item2[0].checked)
		encryptNone(val);

	if (item2[1].checked)
		encryptWep(val);

	if (item2[2].checked)
		encryptTkip(val);

	if (item2[3].checked)
		encryptAes(val);

	if (item2[4].checked)
		encryptTkipAes(val);
}

function change_auth(val)
{
	var item1=document.getElementById("id_WIFIAuthType" + val).value;
	var item2=document.getElementsByName("WIFIEncrypType" + val);

	if (item1=="OPEN")
	{
		document.getElementById("id_sercurityNon" + val).checked= true;
		set_auth_flag(0,val);
		encryptNone(val);
	}

	if (item1=="SHARED")
	{
		document.getElementById("id_sercurityWep" + val).checked= true;
		set_auth_flag(1,val);
	}
	if (item1=="WPAPSK")
	{
		document.getElementById("id_sercurityTkip" + val).checked= true;
		set_auth_flag(2,val);
	}
	if (item1=="WPA2PSK")
	{
		document.getElementById("id_sercurityAes" + val).checked= true;
		set_auth_flag(3,val);
	}
	if (item1=="WPAPSKWPA2PSK")
	{
		document.getElementById("id_sercurityTkipAes" + val).checked= true;
		set_auth_flag(4,val);
	}
		if (item1=="WPA")
		{
			document.getElementById("id_sercurityAes" + val).checked= true;
			set_auth_flag(5,val);
		}
		if (item1=="WPA2")
		{
			document.getElementById("id_sercurityAes" + val).checked= true;
			set_auth_flag(6,val);
		}

	if (item2[0].checked)
		encryptNone(val);

	if (item2[1].checked)
		encryptWep(val);

	if (item2[2].checked)
		encryptTkip(val);

	if (item2[3].checked)
		encryptAes(val);

	if (item2[4].checked)
		encryptTkipAes(val);
}

function set_auth_flag(index,tag)
{
	switch (tag) {
		case 1:
			authtype_flag=index;
			break;
		case 2:
			authtype_flag2=index;
			break;
		case 3:
			authtype_flag3=index;
			break;
		case 4:
			authtype_flag4=index;
			break;
		case 5:
			authtype_flag5=index;
			break;
		case 6:
			authtype_flag6=index;
			break;
		case 7:
			authtype_flag7=index;
			break;
		case 8:
			authtype_flag8=index;
			break;

	}
}
function set_security_flag(index,tag)
{
	switch (tag) {
		case 1:
			security_flag=index;
			break;
		case 2:
			security_flag2=index;
			break;
		case 3:
			security_flag3=index;
			break;
		case 4:
			security_flag4=index;
			break;
		case 5:
			security_flag5=index;
			break;
		case 6:
			security_flag6=index;
			break;
		case 7:
			security_flag7=index;
			break;
		case 8:
			security_flag8=index;
			break;
	}
}

function encryptNone(val)
{
	set_security_flag(0,val);
	document.getElementById("id_WIFIWPAPSK" + val).disabled=true;
	document.getElementById("id_WIFIWEPKeyIndex" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey1_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey2_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey3_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey4_S" + val).disabled=true;
	document.getElementById("id_weplLength" + val).disabled=true;
	document.getElementById("id_Passphrase" + val).disabled=true;
	document.getElementById("id_genBtn" + val).disabled=true;
}

function encryptWep(val)
{
	set_security_flag(1,val);
	document.getElementById("id_WIFIWPAPSK" + val).disabled=true;
	document.getElementById("id_WIFIWEPKeyIndex" + val).disabled=false;
	document.getElementById("id_WIFIWEPKey1_S" + val).disabled=false;
	document.getElementById("id_WIFIWEPKey2_S" + val).disabled=false;
	document.getElementById("id_WIFIWEPKey3_S" + val).disabled=false;
	document.getElementById("id_WIFIWEPKey4_S" + val).disabled=false;
	document.getElementById("id_weplLength" + val).disabled=false;
	document.getElementById("id_Passphrase" + val).disabled=false;
	document.getElementById("id_genBtn" + val).disabled=false;
}

function encryptTkip(val)
{
	set_security_flag(2,val);
	document.getElementById("id_WIFIWPAPSK" + val).disabled=false;
	document.getElementById("id_WIFIWEPKeyIndex" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey1_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey2_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey3_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey4_S" + val).disabled=true;
	document.getElementById("id_weplLength" + val).disabled=true;
	document.getElementById("id_Passphrase" + val).disabled=true;
	document.getElementById("id_genBtn" + val).disabled=true;
	if (val==1 && authtype_flag>4)
	{
	document.getElementById("id_WIFIRadiusWanif").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item1").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item2").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item3").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item4").disabled=false;
	document.getElementById("id_WIFIRadiusServer").disabled=false;
	document.getElementById("id_WIFIRadiusPort").disabled=false;
	document.getElementById("id_WIFIRadiusKey").disabled=false;
	document.getElementById("id_WIFIWPAPSK" + val).disabled=true;
	}
}

function encryptAes(val)
{
	set_security_flag(3,val);
	document.getElementById("id_WIFIWPAPSK" + val).disabled=false;
	document.getElementById("id_WIFIWEPKeyIndex" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey1_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey2_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey3_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey4_S" + val).disabled=true;
	document.getElementById("id_weplLength" + val).disabled=true;
	document.getElementById("id_Passphrase" + val).disabled=true;
	document.getElementById("id_genBtn" + val).disabled=true;
	if (val==1 && authtype_flag>4)
	{
	document.getElementById("id_WIFIRadiusWanif").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item1").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item2").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item3").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item4").disabled=false;
	document.getElementById("id_WIFIRadiusServer").disabled=false;
	document.getElementById("id_WIFIRadiusPort").disabled=false;
	document.getElementById("id_WIFIRadiusKey").disabled=false;
	document.getElementById("id_WIFIWPAPSK" + val).disabled=true;
	}
}

function encryptTkipAes(val)
{
	set_security_flag(4,val);
	document.getElementById("id_WIFIWPAPSK" + val).disabled=false;
	document.getElementById("id_WIFIWEPKeyIndex" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey1_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey2_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey3_S" + val).disabled=true;
	document.getElementById("id_WIFIWEPKey4_S" + val).disabled=true;
	document.getElementById("id_weplLength" + val).disabled=true;
	document.getElementById("id_Passphrase" + val).disabled=true;
	document.getElementById("id_genBtn" + val).disabled=true;
	if (val==1 && authtype_flag>4)
	{
	document.getElementById("id_WIFIRadiusWanif").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item1").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item2").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item3").disabled=false;
	document.getElementById("id_WIFIRadiusServer_item4").disabled=false;
	document.getElementById("id_WIFIRadiusServer").disabled=false;
	document.getElementById("id_WIFIRadiusPort").disabled=false;
	document.getElementById("id_WIFIRadiusKey").disabled=false;
	document.getElementById("id_WIFIWPAPSK" + val).disabled=true;
	}
}
function genPassphraseKey(tag)
{
	var text_item=document.getElementById("id_Passphrase" + tag);
	var wep_index_item=document.getElementById("id_WIFIWEPKeyIndex" + tag);
	var index=wep_index_item.selectedIndex+1;
	var wep_text_item=document.getElementById("id_WIFIWEPKey" + index + "_S" + tag);

	if (text_item.value.length==0 || isBlank(text_item.value))
	{

		document.getElementById("id_WIFIWEPKey1_S" + tag).value='';
		document.getElementById("id_WIFIWEPKey2_S" + tag).value='';
		document.getElementById("id_WIFIWEPKey3_S" + tag).value='';
		document.getElementById("id_WIFIWEPKey4_S" + tag).value='';
		return false;
	}

	if (document.getElementById("id_weplLength" + tag).value==64)
	{
		document.getElementById("id_WIFIWEPKey1_S" + tag).value=Get64bitkey(text_item.value,1);
		document.getElementById("id_WIFIWEPKey2_S" + tag).value=Get64bitkey(text_item.value,2);
		document.getElementById("id_WIFIWEPKey3_S" + tag).value=Get64bitkey(text_item.value,3);
		document.getElementById("id_WIFIWEPKey4_S" + tag).value=Get64bitkey(text_item.value,4);
	}
	else
	{
		document.getElementById("id_WIFIWEPKey1_S" + tag).value=Get128bitkey(text_item.value+1);
		document.getElementById("id_WIFIWEPKey2_S" + tag).value=Get128bitkey(text_item.value+2);
		document.getElementById("id_WIFIWEPKey3_S" + tag).value=Get128bitkey(text_item.value+3);
		document.getElementById("id_WIFIWEPKey4_S" + tag).value=Get128bitkey(text_item.value+4);
		//wep_text_item.value=Get128bitkey(text_item.value);
	}
}
function checkRadius()
{
	var item1=document.getElementById("id_WIFIRadiusServer");
	var item2=document.getElementById("id_WIFIRadiusPort");
	var item3=document.getElementById("id_WIFIRadiusKey");

	//merge radius server ip to hidden item
	merge_ip("id_WIFIRadiusServer", "id_WIFIRadiusServer_item1", "id_WIFIRadiusServer_item2", "id_WIFIRadiusServer_item3", "id_WIFIRadiusServer_item4");

	if (item1.value.length==0 && item2.value.length==0 && item3.value.length==0)
	{
		warn_invalid("8021x Setting");
		//alert("8021x Setting is invalid!!");
		return false;
	}
	if (item3.value.length==0)
	{
		var item ="Radius Key";
		warn_invalid(item);
		//alert(item + " is invalid!!");
		return false;
	}
	if ((item2.value.length==0)||(!check_port(item2.value)))
	{
		var item ="Radius Port"
		warn_int_between(item,1,65535);
		//alert("The Radius port should be an integer between 1 and 65535");
		return false;
	}
	if ((item1.value.length==0)||(!check_ip(item1.value)))
	{
		var item ="Radius Server"
		warn_invalid(item);
		//alert(item + " is invalid!!");
		return false;
	}
	return true;
}
function checkSpecSymbol(s,index)
{
	for(i=0;i<s.length;i++)
	{
	c=s.charAt(i);
	if (index==1)
		{
		if((c==';')||(c=='\\'))
		return false;
		}
	else
		{
		if(c==';')
		return false;
		}
	}
	return true;
}

function check_ssidname()
{
	var temp_ssid= document.getElementById("id_ssid1").value;

	if (temp_ssid.length==0)
	{
		warn_not_empty("SSID1 SSID");
		//alert("SSID1 SSID can not be empty!!");
		return false;
	}
	else if (!checkSpecSymbol(temp_ssid,0))
	{
		warn_ssid_illegal("SSID1");
		//alert("SSID1 contains illegal characters, like" + " \";\"");
		return false;
	}
	else if (isChinese(temp_ssid))
	{
		warn_ssid_illegal2("SSID1 SSID");
		//alert("SSID1 SSID contains illegal characters.");
		return false;
	}

	return true;
}

function wifi_init(val)
{
	if (document.quick_setup.WIFIModuleEnable.value == '0')					//all disable
	{
		document.quick_setup.WIFISsid1.disabled = true;
		document.quick_setup.WIFIAuthType1.disabled = true;
		document.getElementById("id_sercurityNon1").disabled = true;
		document.getElementById("id_sercurityWep1").disabled = true;
		document.getElementById("id_sercurityTkip1").disabled = true;
		document.getElementById("id_sercurityAes1").disabled = true;
		document.getElementById("id_sercurityTkipAes1").disabled = true;
		document.quick_setup.WIFIWEPPassphraseLen1.disabled = true;
		document.quick_setup.WIFIWEPPassphraseKey1.disabled = true;
		document.quick_setup.WIFIWEPKeyIndex1.disabled = true;
		document.quick_setup.WIFIWPAPSK1.disabled = true;
		document.quick_setup.WIFIRadiusWanif.disabled = true;
		document.getElementById("id_WIFIRadiusServer_item1").disabled = true;
		document.getElementById("id_WIFIRadiusServer_item2").disabled = true;
		document.getElementById("id_WIFIRadiusServer_item3").disabled = true;
		document.getElementById("id_WIFIRadiusServer_item4").disabled = true;
		document.quick_setup.WIFIRadiusPort.disabled = true;
		document.quick_setup.WIFIRadiusKey.disabled = true;
	}
	else //all enable first
	{
		document.quick_setup.WIFISsid1.disabled = false;
		document.quick_setup.WIFIAuthType1.disabled = false;
		document.getElementById("id_sercurityNon1").disabled = false;
		document.getElementById("id_sercurityWep1").disabled = false;
		document.getElementById("id_sercurityTkip1").disabled = false;
		document.getElementById("id_sercurityAes1").disabled = false;
		document.getElementById("id_sercurityTkipAes1").disabled = false;
		document.quick_setup.WIFIWEPPassphraseLen1.disabled = false;
		document.quick_setup.WIFIWEPPassphraseKey1.disabled = false;
		document.quick_setup.WIFIWEPKeyIndex1.disabled = false;
		document.quick_setup.WIFIWPAPSK1.disabled = false;
		document.quick_setup.WIFIRadiusWanif.disabled = false;
		document.getElementById("id_WIFIRadiusServer_item1").disabled = false;
		document.getElementById("id_WIFIRadiusServer_item2").disabled = false;
		document.getElementById("id_WIFIRadiusServer_item3").disabled = false;
		document.getElementById("id_WIFIRadiusServer_item4").disabled = false;
		document.quick_setup.WIFIRadiusPort.disabled = false;
		document.quick_setup.WIFIRadiusKey.disabled = false;
		Authen(1);
	}
}


function wifi_set1()
{
	var temp=new Array(4);
	var temp_preshared;
	temp[0] = document.getElementById("id_WIFIWEPKey1_S1").value;
	temp[1] = document.getElementById("id_WIFIWEPKey2_S1").value;
	temp[2] = document.getElementById("id_WIFIWEPKey3_S1").value;
	temp[3] = document.getElementById("id_WIFIWEPKey4_S1").value;
	temp_preshared = document.getElementById("id_WIFIWPAPSK1").value;

	if ((authtype_flag==0)&&((security_flag==2)||(security_flag==3)||(security_flag==4)))
	{
		warn_wifi_not_match2("Authentication","Security Type","SSID1");
		//alert("Authentication and Security Type don't match!!");
		return false;
	}
	if ((authtype_flag==1)&&((security_flag==2)||(security_flag==3)||(security_flag==0)||(security_flag==4)))
	{
		warn_wifi_not_match2("Authentication","Security Type","SSID1");
		//alert("Authentication and Security Type don't match!!");
		return false;
	}
	if (((authtype_flag==2)||(authtype_flag==3)||(authtype_flag==4))&&
			((security_flag==0)||(security_flag==1)))
	{
		warn_wifi_not_match2("Authentication","Security Type","SSID1");
		//alert("Authentication and Security Type don't match!!");
		return false;
	}
	if (((authtype_flag==5)||(authtype_flag==6))&&
		((security_flag==0)||(security_flag==1)))
	{
			warn_wifi_not_match2("Authentication","Security Type","SSID1");
			//alert("Authentication and Security Type don't match!!");
			return false;
	}
	if(document.getElementById("id_Passphrase1").disabled==false && document.quick_setup.WIFIWEPPassphraseKey1.value.length==0)
	{
		warn_not_empty2("Passphrase Key","SSID1");
		return false;
	}
	if(security_flag==1)
	{
		var i;
		for (i=0;i<4;i++)
		{
			if (temp[i].length== 0)
			{
					if (document.wifisetup_form.WIFIWEPKeyIndex1.value==(i+1))
					{
						warn_invalid2("Key"+(i+1),"SSID1");
						//alert("WEP Key" + (i+1) + " is invalid!!");
						return false;
					}
					else
						continue;
			}
			else if(((temp[i].length== 5)||(temp[i].length== 10))&&(checkSpecSymbol(temp[i],0)))/*ASCII*/
			{
				if(document.getElementById("id_weplLength1").value=="64")
					continue;
				else
				{
					warn_invalid2("Key"+(i+1),"SSID1");
					return false;
				}

			}
			else if ((temp[i].length== 13)||(temp[i].length== 26))/*HEX*/
			{
				if(document.getElementById("id_weplLength1").value=="128")
				{
					for (j=0;(j<temp[i].length);j++)
					{
						c=temp[i].charAt(j);

						if((c != '0') && (c != '1')&& (c != '2')&& (c != '3')&& (c != '4')&& (c != '5')&& (c != '6')
							&& (c != '7')&& (c != '8')&& (c!= '9')&& (c != 'a')&& (c != 'b')&& (c != 'c')
							&& (c != 'd')&& (c != 'e')&& (c != 'f')&& (c != 'A')&& (c != 'B')
							&& (c != 'C')&& (c != 'D')&& (c != 'E')&& (c != 'F'))
						{
							warn_invalid2("Key"+(i+1),"SSID1");
							//alert("WEP Key" + (i+1) + " is invalid!!");
							return false;
						}
					}
				}
				else
				{
					warn_invalid2("Key"+(i+1),"SSID1");
					return false;
				}
			}
			else
			{
				warn_invalid2("Key"+(i+1),"SSID1");
				//alert("WEP Key" + (i+1) + " is invalid!!");
				return false;
			}
		}
	}

	if(((security_flag==2)||(security_flag==3)||(security_flag==4))&& !((authtype_flag==5)||(authtype_flag==6)))
	{
		if (temp_preshared.length==0)
		{
			warn_not_empty2("Preshared Key",'SSID1');
			//alert("Preshared Key is empty!!");
			return false;
		}
		else if ((8>temp_preshared.length)||(temp_preshared.length>63)||!((temp_preshared.length!=0)&&
			(checkSpecSymbol(temp_preshared,0)&&isChinese(temp_preshared)==0)))
		{
			var item="Preshared Key";
			warn_invalid2("Preshared Key","SSID1");
			//alert(item + " is invalid!!");
			return false;
		}
	}

	if ((authtype_flag==5)||(authtype_flag==6))
	{
		if (!checkRadius())
			return false;
	}
	return true;
}

function changeEnable()
{
	if ( fvt_meta_config('pon_status') == 'O5') {
		//document.getElementById("apply_btn").disabled = true;
		//document.getElementById("clean_btn").disabled = true;
		document.getElementById("id_hint").style.display ="";
		/*
		if ( fvt_meta_config('slid_enable') == '0') {
			document.getElementById("onu_password").disabled = true;
			document.getElementById("enableSLID").checked = false;
		} else {
			if( document.getElementById("enableSLID").checked ) {
				document.getElementById("onu_password").disabled = false;
			} else {
				document.getElementById("onu_password").disabled = true;
			}
		}
			*/
		document.getElementById("onu_password").disabled = true;
	}
	else {
		document.getElementById("id_hint").style.display ="none";
		document.getElementById("onu_password").disabled = false;
		/*
		if( document.getElementById("enableSLID").checked ) {
			document.getElementById("onu_password").disabled = false;
		} else {
			document.getElementById("onu_password").disabled = true;
		}
		*/
	}
}

function checkRegID() {
	var regId = document.getElementById("onu_password").value;
	if (regId.substring(0,2) == "0x" ) {
		/* Hex input case */
		/* Check length first */
		if( regId.length > 22 ) {
			showErrMsg("Error: Register ID(SLID) value exceed maximum length: 20 ");
			return false;
		} else {

			if( regId.length % 2 != 0 ) {
				showErrMsg("Error: Wrong Register ID(SLID) format, please input correct hex value");
				return false;
			}

			/* Check HEX format */
			var regu = /^[0-9a-fA-F]+$/;
			if( regu.test(regId.substring(2, regId.length)) ){
				document.getElementById("onu_password").value="0x"+regId.substring(2, regId.length).toUpperCase();
				return true;
			} else {
				showErrMsg("Error: Wrong Register ID(SLID) format, please input correct hex value");
				return false;
			}
		}
	} else {
		/* ASCII case */
		if ( regId.length > 10 ) {
			alert("SLID value exceed maximum length: 10");
			return false;
		} else {
			return true;
		}
	}
	return true;
}

function save_change()
{
	if(!check_WAN())
	{
		return false;
	}
	/*if(!check_LAN())
	{
		return false;
	}*/
	if(!check_ssidname())
		return false;
	if(!wifi_set1())
		return false;

	/* if (!check_integer_range(document.quick_setup.WIFITxPower.value,1,100))
	{
		item = "Tx Power";
		min = "1";
		max = "100";
		warn_int_between(item,min,max);
		return false;
	}*/

	if ((authtype_flag==5)||(authtype_flag==6))
	{
		if (!checkRadius())
			return false;
	}
	if( !checkRegID() )
		return false;

	fvt_form_submit('quick_setup');
	document.getElementById('id_wait_progress').style.display="";
	document.quick_setup.submit();
}

function fvt_form_init(form_name)
{
	if(fvt_meta_config("ont_mode")==0)
	{
		document.getElementById("id_wifi_11n_setup").style.display="none";
		document.getElementById("id_wan_label").style.display="none";
		document.getElementById("id_wan_content").style.display="none";
		document.getElementById("id_tr069_label").style.display="none";
		document.getElementById("id_tr069_content").style.display="none";
		document.getElementById("id_lan_label").style.display="none";
		document.getElementById("id_lan_content").style.display="none";
	}
	else
	{
		if(fvt_meta_config('sess_level')=='user')
		{
			if(fvt_meta_config("wlan_enable")=='1')
			{
				document.getElementById("id_wifi_11n_setup").style.display="inline";
				document.getElementById("WIFIModuleEnable").style.display="none";
				Authen(1);
			}
			else
			{
				document.getElementById("id_wifi_11n_setup").style.display="none";
			}
		}
		else{
			document.getElementById("id_wifi_11n_setup").style.display="inline";
			document.getElementById("WIFIModuleEnable").style.display="inline";
		}
	}
	if(fvt_meta_config('sess_level')=='user')
	{
		document.getElementById("slid_setup").style.display="none";
		document.getElementById("tr069_setup").style.display="none";
	}else
	{
		document.getElementById("slid_setup").style.display="inline";
		document.getElementById("tr069_setup").style.display="inline";
	}

	if (form_name=='quick_setup' || form_name=='*') {
		fvt_form_obj_set(form_name, "onu_password", fvt_meta_config('kv_onu_password'));
		/*
		if(meta_config['slid_enable']=='1') {
			fvt_form_checkbox_set(form_name, 'enableSLID', '1');
		}
		changeEnable();
		*/
		fvt_form_obj_set(form_name, "WANUsername", fvt_meta_config('wan0_pppoe_username'));
		fvt_form_obj_set(form_name, "WANPassword", fvt_meta_config('wan0_pppoe_password'));
		fvt_form_obj_set(form_name, "DHCPSEnable", fvt_meta_config('dhcp0_enable'));

		fvt_form_obj_set(form_name, "WIFIModuleEnable", fvt_meta_config('wlan_enable'));
		fvt_form_obj_set(form_name, "WIFISsid1", fvt_meta_config('wlan_ssid'));
		fvt_form_obj_set(form_name, "WIFIHideSSID1", fvt_meta_config('wlan_hiddenAP'));
		fvt_form_obj_set(form_name, "WIFIHTBW", fvt_meta_config('wlan_use40M'));
		fvt_form_obj_set(form_name, "WIFITxPower", fvt_meta_config('wlan_tx_power'));
		fvt_form_obj_set(form_name, "WIFIAuthType1", fvt_meta_config("wlan_auth_type"));
		fvt_form_obj_set(form_name, "WIFIEncrypType1", fvt_meta_config("wlan_security_type"));
		fvt_form_obj_set(form_name, "WIFIWEPPassphraseLen1", fvt_meta_config("wlan_wep_passphrase_len"));
		fvt_form_obj_set(form_name, "WIFIWEPPassphraseKey1", fvt_meta_config("wlan_wep_passphrase"));
		fvt_form_obj_set(form_name, "WIFIWEPKeyIndex1", fvt_meta_config("wlan_wepindex"));
		fvt_form_obj_set(form_name, "WIFIWEPKey1_S1", fvt_meta_config("wlan_wepkey1"));
		fvt_form_obj_set(form_name, "WIFIWEPKey2_S1", fvt_meta_config("wlan_wepkey2"));
		fvt_form_obj_set(form_name, "WIFIWEPKey3_S1", fvt_meta_config("wlan_wepkey3"));
		fvt_form_obj_set(form_name, "WIFIWEPKey4_S1", fvt_meta_config("wlan_wepkey4"));
		fvt_form_obj_set(form_name, "WIFIWPAPSK1", fvt_meta_config("wlan_wpawpa2_presharedkey"));
		fvt_form_obj_set(form_name, "WIFIRadiusWanif", fvt_meta_config('wlan_802_1x_server_dev'));
		fvt_form_obj_set(form_name, "WIFIRadiusServer", fvt_meta_config('wlan_802_1x_server'));
		fvt_form_obj_set(form_name, "WIFIRadiusPort", fvt_meta_config('wlan_802_1x_port'));
		fvt_form_obj_set(form_name, "WIFIRadiusKey", fvt_meta_config('wlan_802_1x_key'));
		wifi_init(1);
	}
	if (show_802_1x == 1)
		{document.getElementById("id_802_1x_table").style.display ="inline";}
	else
		{document.getElementById("id_802_1x_table").style.display ="none";}

	if (show_wep == 1)
		{
		document.getElementById("id_wep_table").style.display ="inline";
		}
	else
		{
		document.getElementById("id_wep_table").style.display ="none";
		document.getElementById("id_weptd1").style.display ="none";
		document.getElementById("id_weptd2").style.display ="none";
		}
}

function fvt_form_submit(form_name)		{
	fvt_paramlist_clear();
	if (form_name=='quick_setup' || form_name=='*') {
		if(fvt_meta_config('sess_level')=='admin'){

			var old_onu_password = fvt_meta_config('kv_onu_password');
			var onu_password = fvt_form_obj_get(form_name,"onu_password");
			fvt_paramlist_cat_str ("slid_enable", fvt_form_checkbox_get(form_name, "enableSLID"));

			if( onu_password != old_onu_password)
			{
				fvt_paramlist_cat_str ("onu_password", onu_password);
				document.getElementById('quick_setup').action="wwwctrl.cgi?action=wait_restart";
				document.getElementById('quick_setup').target = "contentfrm";
			}

		}
		fvt_paramlist_cat_str('wan0_pppoe_username', fvt_form_obj_get(form_name, "WANUsername"));
		var password;
		if(fvt_form_obj_get(form_name, "WANPassword") != fvt_meta_config('wan0_pppoe_password'))
		{
			password = rc4_encrypt(rc4Key, fvt_form_obj_get(form_name, "WANPassword"));
		}
		else
		{
			password =fvt_meta_config('wan0_pppoe_password');
		}
		fvt_paramlist_cat_str('wan0_pppoe_password', password);
		fvt_paramlist_cat_str('dhcp0_enable', fvt_form_obj_get(form_name, "DHCPSEnable"));
		//fvt_paramlist_cat_str('dhcp0_number_start', fvt_form_obj_get(form_name, "DHCPSIPStart4"));
		//fvt_paramlist_cat_str('dhcp0_number_end', fvt_form_obj_get(form_name, "DHCPSIPEnd4"));
		//fvt_paramlist_cat_str('lan0_ip', fvt_form_obj_get(form_name, "LanIPAddr"));
		//fvt_paramlist_cat_str('lan0_netmask', fvt_form_obj_get(form_name, "LanNetmask"));

		fvt_paramlist_cat_str('wlan_enable', fvt_form_obj_get(form_name, "WIFIModuleEnable"));
		fvt_paramlist_cat_str('wlan_ssid', fvt_form_obj_get(form_name, "WIFISsid1"));
		//fvt_paramlist_cat_str('wlan_hiddenAP', fvt_form_obj_get(form_name, "WIFIHideSSID1"));
		//fvt_paramlist_cat_str('wlan_use40M', fvt_form_obj_get(form_name, "WIFIHTBW"));
		//fvt_paramlist_cat_str('wlan_tx_power', fvt_form_obj_get(form_name, "WIFITxPower"));
		fvt_paramlist_cat_str("wlan_auth_type", fvt_form_obj_get(form_name, "WIFIAuthType1"));
		fvt_paramlist_cat_str("wlan_security_type", fvt_form_obj_get(form_name, "WIFIEncrypType1"));
		fvt_paramlist_cat_str("wlan_wep_passphrase_len", fvt_form_obj_get(form_name, "WIFIWEPPassphraseLen1"));
		//fvt_paramlist_cat_str("wlan_wep_passphrase", fvt_form_obj_get(form_name, "WIFIWEPPassphraseKey1"));
		var wlan_weppw;
		if(fvt_form_obj_get(form_name, "WIFIWEPPassphraseKey1") != fvt_meta_config("wlan_wep_passphrase"))
		{
			if (ency_set=="1")
			wlan_weppw = rc4_encrypt(rc4Key, fvt_form_obj_get(form_name, "WIFIWEPPassphraseKey1"));
			else
			wlan_weppw = fvt_form_obj_get(form_name, "WIFIWEPPassphraseKey1");
		}
		else
		{
			wlan_weppw = fvt_meta_config("wlan_wep_passphrase");
		}
		fvt_paramlist_cat_str("wlan_wep_passphrase", wlan_weppw);

		fvt_paramlist_cat_str("wlan_wepindex", fvt_form_obj_get(form_name, "WIFIWEPKeyIndex1"));
		fvt_paramlist_cat_str("wlan_wepkey1", fvt_form_obj_get(form_name, "WIFIWEPKey1_S1"));
		fvt_paramlist_cat_str("wlan_wepkey2", fvt_form_obj_get(form_name, "WIFIWEPKey2_S1"));
		fvt_paramlist_cat_str("wlan_wepkey3", fvt_form_obj_get(form_name, "WIFIWEPKey3_S1"));
		fvt_paramlist_cat_str("wlan_wepkey4", fvt_form_obj_get(form_name, "WIFIWEPKey4_S1"));

		var wlan_pw;
		if (document.quick_setup.WIFIAuthType1.value == "OPEN")
			fvt_paramlist_cat_str("wlan_wpawpa2_presharedkey", "");
		else
		{
			//fvt_paramlist_cat_str("wlan_wpawpa2_presharedkey", fvt_form_obj_get(form_name, "WIFIWPAPSK1"));
			if(fvt_form_obj_get(form_name, "WIFIWPAPSK1") != fvt_meta_config('wlan_wpawpa2_presharedkey'))
			{
				if (ency_set=="1")
				wlan_pw = rc4_encrypt(rc4Key, fvt_form_obj_get(form_name, "WIFIWPAPSK1"));
				else
				wlan_pw = fvt_form_obj_get(form_name, "WIFIWPAPSK1");
			}
			else
			{
				wlan_pw = fvt_meta_config('wlan_wpawpa2_presharedkey');
			}
			fvt_paramlist_cat_str('wlan_wpawpa2_presharedkey', wlan_pw);
		}

		fvt_paramlist_cat_str('wlan_802_1x_server_dev', fvt_form_obj_get(form_name, "WIFIRadiusWanif"));
		fvt_paramlist_cat_str('wlan_802_1x_server', fvt_form_obj_get(form_name, "WIFIRadiusServer"));
		fvt_paramlist_cat_str('wlan_802_1x_port', fvt_form_obj_get(form_name, "WIFIRadiusPort"));

		//fvt_paramlist_cat_str('wlan_802_1x_key', fvt_form_obj_get(form_name, "WIFIRadiusKey"));
		var radiuskey_pw;
		if(fvt_form_obj_get(form_name, "WIFIRadiusKey") != fvt_meta_config('wlan_802_1x_key'))
		{
			if (ency_set=="1")
			radiuskey_pw = rc4_encrypt(rc4Key, fvt_form_obj_get(form_name, "WIFIRadiusKey"));
			else
			radiuskey_pw = fvt_form_obj_get(form_name, "WIFIRadiusKey");
		}
		else
		{
			radiuskey_pw = fvt_meta_config('wlan_802_1x_key');
		}
		fvt_paramlist_cat_str('wlan_802_1x_key', radiuskey_pw);

			//TR-069
		cpe_deviceid_str = fvt_form_obj_get(form_name, "CWMPCpeID1") +'-'+cpeid[1]+'-'+ fvt_form_obj_get(form_name, "CWMPCpeID2");
		if (cpe_deviceid_str != cpe_deviceid_str_old)
			{
			//alert( cpe_deviceid_str+" ID diff "+cpe_deviceid_str_old);
			fvt_paramlist_cat_str("cwmp_cpe_device_id", cpe_deviceid_str);
			//fvt_paramlist_cat_str("cwmp_bootstrap", "1");
			}
	}
	fvt_paramlist_presubmit(form_name);
}

function bootstrap()
{
	var cpe_deviceid_str;
	cpe_deviceid_str = fvt_form_obj_get("quick_setup", "CWMPCpeID1") +'-'+cpeid[1]+'-'+ fvt_form_obj_get("quick_setup", "CWMPCpeID2");
	fvt_paramlist_clear();
	fvt_paramlist_cat_str("cwmp_cpe_device_id", cpe_deviceid_str);
	if (cpe_deviceid_str != cpe_deviceid_str_old)
		{
		//alert(cpe_deviceid_str+" ID diff "+cpe_deviceid_str_old);
		fvt_paramlist_cat_str("cwmp_cpe_device_id", cpe_deviceid_str);
		//fvt_paramlist_cat_str("cwmp_bootstrap", "1");
		}
	else
		{
		//alert(" cwmp_bootstrap ");
		fvt_paramlist_cat_str("cwmp_bootstrap", "1");
		}
	fvt_paramlist_presubmit("quick_setup");
	document.quick_setup.submit();
}

function bootstrap_init()
{
	var bootmsg=fvt_meta_config('cwmp_boottrap_status');
	if(bootmsg=='0'){
		document.getElementById("id_boot_notice").value=vTRSucess;
	}else if(bootmsg=='1'){
		document.getElementById("id_boot_notice").value=vTRfail;
	}else if(bootmsg=='2'){
		document.getElementById("id_boot_notice").value=vNetFail;
	}else {
		document.getElementById("id_boot_notice").value="";
	}
	document.getElementById("id_boot_notice1").innerHTML = document.getElementById("id_boot_notice").value;
	document.getElementById("id_boot_notice1").style.visibility="visible"
	cpe_deviceid_str_old=fvt_meta_config("cwmp_cpe_device_id");
}

</script>
</head>

<body align="left" onload="fvt_form_init('quick_setup');bootstrap_init();dhcpChange();changeEnable();">
<div id="container">
<table align="center" width="90%"><tbody>
<tr><td valign="top">
<form id="quick_setup" name="quick_setup" method="post">
	<fieldset>
		<div class="lv1_title"> Quick Setup </div>
	</fieldset>
<div class="div1_indent lv3_new">
<!-- SLID -->
	<div name="slid_setup" id="slid_setup">
	<div><hr class="hr2"></div>
	<div class="lv1_new topbottom_usage1 rowh">SLID</div>
	<div><hr class="hr5"></div>
	<div>
	<table><tbody>
		<tr id="id_hint" style="display:none">
			<!--<input type="checkbox" name="enableSLID" id="enableSLID" value="1" onchange="changeEnable();" />-->
			<td class="width_connectSetup2" colspan="2">
				<div><font color="red"><b>Can not modify this setting ! Please disconnect the PON fiber firstly.</b></font></div>
			</td>
		</tr>
		<tr>
			<td class="width_connectSetup2" width="25%" nowrap="nowrap">
				<script language="javascript" type="text/javascript">
					document.write(vRegSLID);
				</script>
			</td>
			<td>
				<input name="onu_password" id="onu_password" size="30" maxlength="22" value="" type="text">
				<script language="javascript" type="text/javascript">
					document.write(vEnterLN);
				</script>
			</td>
		</tr>
		<tr>
			<td class="width_connectSetup2" colspan="2"><br/><p>
			<script language="javascript" type="text/javascript">
				document.write("<strong>"+vNotice+"</strong>");
				document.write(vRegInfo);
			</script>
			</p></td>
		</tr>
		<tr>
			<td class="width_connectSetup2" colspan="2"><div class="title warning">
				<script language="javascript" type="text/javascript">
					document.write(vWarningRestart);
				</script>
			</div></td>
		</tr>

	</tbody></table>
	</div>
	</div>

<!-- WAN -->
	<div name="wan_setup" id="wan_setup">
	<div><hr class="hr2"></div>
	<div id="id_wan_label" class="lv1_new topbottom_usage1 rowh">WAN Setup</div>
	<div id="id_wan_content">
	<table><tbody>
	<div><hr class="hr5"></div>
		<tr>
			<td class="width_connectSetup1"><div>
				<script language="javascript" type="text/javascript">
					document.write(vWanMode);
				</script>
			</div></td>
		</tr>
		<tr>
			<td style="padding-left:20px;" colspan="2"><div>
				<script language="javascript" type="text/javascript">
					document.write(vEnPPPoE);
				</script>
			</div></td>
		</tr>
		<tr>
			<td class="width_connectSetup2"><div>User Name</div></td>
			<td>
				<input type="text" name="WANUsername" id="id_WANUsername" size="30" maxlength="30" value=''>
			</td>
		</tr>
		<tr>
			<td class="width_connectSetup2"><div>Password</div></td>
			<td>
				<input type="password" name="WANPassword" class="width_routePpoe_password" id="id_WANPassword" maxlength="30" value='' >
			</td>
		</tr>
	</tbody></table>
	</div>
	</div>

<!-- LAN -->
	<div name="lan_setup" id="lan_setup">
	<div><hr class="hr2"></div>
	<div id="id_lan_label" class="lv1_new topbottom_usage1 rowh">LAN Setup</div>
	<div id="id_lan_content">
	<table><tbody>
		<tr>
			<td class="width_connectSetup1"><div>
				<script language="javascript" type="text/javascript">
					document.write("DHCP "+vSetup);
				</script>
			</div></td>
		</tr>
		<div><hr class="hr5"></div>
		<tr>
			<input name="nosave_DHCPSEnable" id="mm_DHCPSEnable" type="hidden">
			<td class="width_connectSetup2"><div>DHCP Server</div></td>
			<td>
				<select ar='1' name="DHCPSEnable" id="id_DHCPSEnable" style="width:128px" onchange="dhcpChange();">
					<option value='0'>Disable</option>
					<option value='1'>Enable</option>
				</select>
			</td>
		</tr>
<!--
		<td class="width_connectSetup2"><div>DHCP&nbsp;Starting&nbsp;IP&nbsp;Address</div></td>
		<tr>
			<input name="DHCPSIPStart" id="id_DHCPSIPStart" type="hidden">

			<script language="javascript" type="text/javascript">
				var IP_Address = fvt_meta_config('lan0_ip');
				var IP_Address_split = IP_Address.split(".");
				var DHCP_Start_IP_Address = fvt_meta_config('dhcp0_number_start');
				document.write("<td ><div dir=\"ltr\">");
				document.write("<input id=\"id_DHCPSIPStart1\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[0]+"' type=\"text\">.");
				document.write("<input id=\"id_DHCPSIPStart2\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[1]+"' type=\"text\">.");
				document.write("<input id=\"id_DHCPSIPStart3\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[2]+"' type=\"text\">.");
				document.write("<input id=\"id_DHCPSIPStart4\" name=\"DHCPSIPStart4\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+DHCP_Start_IP_Address+"' type=\"text\">");
				document.write("</div></td>");
			</script>
		</tr>
		<td class="width_connectSetup2"><div>DHCP&nbsp;Ending&nbsp;IP&nbsp;Address</div></td>
		<tr>
		<input name="DHCPSIPEnd" id="id_DHCPSIPEnd" type="hidden">

		<script language="javascript" type="text/javascript">
			var IP_Address = fvt_meta_config('lan0_ip');
			var IP_Address_split = IP_Address.split(".");
			var DHCP_End_IP_Address = fvt_meta_config('dhcp0_number_end');
			document.write("<td><div dir=\"ltr\">");
			document.write("<input id=\"id_DHCPSIPEnd1\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[0]+"' type=\"text\">.");
			document.write("<input id=\"id_DHCPSIPEnd2\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[1]+"' type=\"text\">.");
			document.write("<input id=\"id_DHCPSIPEnd3\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[2]+"' type=\"text\">.");
			document.write("<input id=\"id_DHCPSIPEnd4\" name=\"DHCPSIPEnd4\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+DHCP_End_IP_Address+"' type=\"text\">");
			document.write("</div></td>");
		</script>
		</tr>
		<tr></tr>
		<tr>
			<td class="width_connectSetup1"><div>區域網路 TCP/IP</div></td>
		</tr>
		<tr>
			<input name="lan_gateway" value="0.0.0.0" type="hidden">
			<input name="LanIPAddr" id="id_LanIPAddr" type="hidden">
			<td class="width_connectSetup2"><div>IP Address</div></td>
			<script language="javascript" type="text/javascript">
				var IP_Address = fvt_meta_config('lan0_ip');
				var IP_Address_split = IP_Address.split(".");
				document.write("<td><div dir=\"ltr\">");
				document.write("<input id=\"id_LanIPAddr1\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[0]+"' onkeyup=\"changedhcpIP(1)\" type=\"text\"> . ");
				document.write("<input id=\"id_LanIPAddr2\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[1]+"' onkeyup=\"changedhcpIP(2)\" type=\"text\"> . ");
				document.write("<input id=\"id_LanIPAddr3\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[2]+"' onkeyup=\"changedhcpIP(3)\" type=\"text\"> . ");
				document.write("<input id=\"id_LanIPAddr4\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+IP_Address_split[3]+"' type=\"text\">");
				document.write("</div></td>");
			</script>
		</tr>
		<tr>
			<input name="LanNetmask" id="id_LanNetmask" type="hidden">
			<td class="width_connectSetup2"><div>Subnet Mask</div></td>
			<script language="javascript" type="text/javascript">
				var Sub_Mask = fvt_meta_config('lan0_netmask');
				var Sub_Mask_split = Sub_Mask.split(".");
				document.write("<td><div dir=\"ltr\">");
				document.write("<input id=\"id_LanNetmask1\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+Sub_Mask_split[0]+"' type=\"text\"> . ");
				document.write("<input id=\"id_LanNetmask2\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+Sub_Mask_split[1]+"' type=\"text\"> . ");
				document.write("<input id=\"id_LanNetmask3\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+Sub_Mask_split[2]+"' type=\"text\"> . ");
				document.write("<input id=\"id_LanNetmask4\" class=\"width_ip\" size=\"3\" maxlength=\"3\" value='"+Sub_Mask_split[3]+"' type=\"text\">");
				document.write("</div></td>");
			</script>
		</tr>	-->
	</tbody></table>
	</div>
	</div>

<!-- TR069 -->
	<div name="tr069_setup" id="tr069_setup">
	<div><hr class="hr2"></div>
	<div id="id_tr069_label" class="lv1_new topbottom_usage1 rowh">
		<script language="javascript" type="text/javascript">
			document.write("TR-069 "+vSetup);
		</script>
	</div>
	<div><hr class="hr5"></div>
	<div id="id_tr069_content">
	<table><tbody>
		<tr><td class="width_connectSetup2"><div>CHT&nbsp;CPE&nbsp;ID:</div></td>
			<td>
				<script>
				cpe_deviceid_str=fvt_meta_config("cwmp_cpe_device_id");
				if (cpe_deviceid_str != '')
				{
					var cpeid = cpe_deviceid_str.split("-");
				}
				else
				{
					var cpeid = new Array();
					cpeid[0] = '';
					cpeid[1] = '';
					cpeid[2] = '';
				}
				document.write("<input type='text' size='9' maxlength='9' name='CWMPCpeID1' value='"+cpeid[0]+"'>-"+cpeid[1]+"-");
				document.write("<input type='text' size='4' maxlength='4' name='CWMPCpeID2' value='"+cpeid[2]+"'>");
				</script>
			</td>
		</tr>
		<tr><td class="width_connectSetup2"><div>Bootstrap:</div></td>
			<td><input type="button" class="width_cwmp" name="CWMPBootTrap" value="Bootstrap" onclick="bootstrap();"></td>
		</tr>

		<tr>
			<td class="width_connectSetup2"></td>
			<td>
				<input type="hidden" name="boot_notice" id="id_boot_notice" value="">
				<font size="5"	color="red">
				<div name="boot_notice1" id="id_boot_notice1" style="visibility:hidden">test</div>
				</font>
			</td>
		</tr>
	</tbody></table>
	</div>
	</div>

<!-- 11n -->
	<div name="wifi_11n_setup" id="id_wifi_11n_setup">
	<div><hr class="hr2"></div>
	<div class="lv1_new topbottom_usage1 rowh">Wireless 11n Setup</div>
	<div>
	<table><tbody>
	<div><hr class="hr5"></div>
		<tr>
			<td class="width_connectSetup2">Wi-Fi 11n</td>
			<td>
				<select ar='1' name="WIFIModuleEnable" id="WIFIModuleEnable" onchange="wifi_init(1);" class="width_select80">
					<option value="0">Disable</option>
					<option value="1">Enable</option>
				</select>
			</td>
		</tr>
		<tr>
			<td class="width_connectSetup2"><div>
				<script language="javascript" type="text/javascript">
					document.write(vSSIDName);
				</script>
			</div></td>
			<td><input class="width_text150" id="id_ssid1" name="WIFISsid1" type="text" maxlength="32"></input></td>
		</tr>
<!--		<tr>
			<td class="width_connectSetup2"><div>隱藏SSID</div></td>
			<td>
			<select ar='1' name="WIFIHideSSID1" class="width_select80">
				<option value="1">隱藏</option>
				<option value="0">不隱藏</option>
			</select>
			</td>
		</tr>
		<tr>
			<td class="width_connectSetup2"><div>Bandwidth</div></td>
			<td>
			<select ar='1' name="WIFIHTBW" id="id_WIFIHTBW" class="width_select80" ">
				<option value="0">20Mhz</option>
				<option value="1">20/40Mhz</option>
			</select>
			</td>
		</tr>
		<tr>
			<td class="width_connectSetup2"><div>Tx Power</div></td>
			<td><input name="WIFITxPower" class="width_text80" type="text">%(1-100)</input></td>
		</tr>
-->
	</tbody></table>
	<table><tbody>
	<div><hr class="hr5"></div>
		<tr>
			<td class="width_connectSetup2">Authentication</td>
			<td>
				<select ar='1' id="id_WIFIAuthType1" name="WIFIAuthType1" onchange="Authen(1);change_auth(1);" width="170px">
				<option value="OPEN">
					<script language="javascript" type="text/javascript">
						document.write(vOpen);
					</script>
				</option>
				<script language="javascript" type="text/javascript">
					if (show_wep == 1)
					{
						document.write("<option value=\"SHARED\">");
						document.write(vShared);
						document.write("</option>");
					}
				</script>
				<option value="WPAPSK">WPA-PSK</option>
				<option value="WPA2PSK">WPA2-PSK</option>
				<option value="WPAPSKWPA2PSK">WPA-PSK/WPA2-PSK Mixed</option>

				<script language="javascript" type="text/javascript">
					if (show_802_1x == 1)
					{
						document.write("<option value=\"WPA\">WPA(802.1x)</option>");
						document.write("<option value=\"WPA2\">WPA2(802.1x)</option>");
					}
				</script>

				</select>
			</td>
		</tr>
		<tr>
			<td class="width_connectSetup2">Security</td>
			<td>
				<table><tr>
					<td><input id="id_sercurityNon1" name="WIFIEncrypType1" value="NONE" onclick="encryptNone(1)" type="radio" class="radio"></td>
					<td class="width_wifiSe_n"><div>NONE</div></td>
					<td id=id_weptd1><input id="id_sercurityWep1" name="WIFIEncrypType1" value="WEP" onclick="encryptWep(1)" type="radio" class="radio"></td>
					<td id=id_weptd2 class="width_wifiSe_wep"><div>WEP</div></td>
					<td><input id="id_sercurityTkip1" name="WIFIEncrypType1" value="TKIP" onclick="encryptTkip(1)" type="radio" class="radio"></td>
					<td class="width_wifiSe_tkip"><div>TKIP</div></td>
					<td><input id="id_sercurityAes1" name="WIFIEncrypType1" value="AES" onclick="encryptAes(1)" type="radio" class="radio"></td>
					<td class="width_wifiSe_aes"><div>AES</div></td>
					<td><input id="id_sercurityTkipAes1" name="WIFIEncrypType1" value="TKIPAES" onclick="encryptAes(1)" type="radio" class="radio"></td>
					<td><div>TKIP/AES Mixed</div></td>
				</tr></table>
			</td>
		</tr>
	</tbody></table>

	<table><tbody>
		<tr>
			<td class="width_connectSetup2" valign="top">WPA-PSK/WPA2-PSK</td>
			<td valign="top">Preshared Key:</td>
			<td width="5px"></td>
			<td valign="top">
				<input disabled="disabled" id="id_WIFIWPAPSK1" name="WIFIWPAPSK1" class="width_wifiSe_pkey" size="32" maxlength="63" type="password">
				<script language="javascript" type="text/javascript">
					document.write(vWlanpw);
				</script>
			</td>
		</tr>
	</tbody></table>

	<table id="id_wep_table"><tbody>
		<tr>
			<td class="width_connectSetup2"><div class="">WEP</div></td>
			<td>
				<table><tr>
					<td>Passphrase Key:</td>
				</tr></table>
			</td>
			<td class="width_wifisecurity3">
				<select ar='1' disabled="disabled" name="WIFIWEPPassphraseLen1" id="id_weplLength1" class="width_wifiSe_bits">
					<option value="64">64 Bits</option>
					<option value="128">128 Bits</option>
				</select>
			</td>
			<td>
				<input disabled="disabled" id="id_Passphrase1" name="WIFIWEPPassphraseKey1" class="width_text200" size="32" maxlength="32" type="password">
				<script language="javascript" type="text/javascript">
					document.write(vWlanweppw);
				</script>
			</td>
		</tr>
		<tr>
			<td></td>
			<td></td>
			<td></td>
			<td>
				<input disabled="disabled" name="genBtn1" id="id_genBtn1" class="width_buttoncreate" value="Generate" onclick="genPassphraseKey(1)" type="button">
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<select ar='1' disabled="disabled" name="WIFIWEPKeyIndex1" id="id_WIFIWEPKeyIndex1" class="width_wifiSe_keys">
					<option value="1">Key1</option>
					<option value="2">Key2</option>
					<option value="3">Key3</option>
					<option value="4">Key4</option>
				</select>
			</td>
			<td>Key1</td>
			<td>
				<input disabled="disabled" id="id_WIFIWEPKey1_S1" name="WIFIWEPKey1_S1" class="width_text200" size="26" maxlength="26" type="text">
			</td>
		</tr>
		<tr>
			<td></td>
			<td></td>
			<td>Key2</td>
			<td>
				<input disabled="disabled" id="id_WIFIWEPKey2_S1" name="WIFIWEPKey2_S1" class="width_text200" size="26" maxlength="26" type="text">
			</td>
		</tr>
		<tr>
			<td></td>
			<td></td>
			<td>Key3</td>
			<td>
				<input disabled="disabled" id="id_WIFIWEPKey3_S1" name="WIFIWEPKey3_S1" class="width_text200" size="26" maxlength="26" type="text">
			</td>
		</tr>
		<tr>
			<td></td>
			<td></td>
			<td>Key4</td>
			<td>
				<input disabled="disabled" id="id_WIFIWEPKey4_S1" name="WIFIWEPKey4_S1" class="width_text200" size="26" maxlength="26" type="text">
			</td>
		</tr>
	</tbody></table>

	<table id="id_802_1x_table"><tbody>
		<tr>
			<td class="width_connectSetup2">802.1X</td>
			<td><div>Interface</div></td>
			<td><select class='width_routeS_selectif' name="WIFIRadiusWanif" id="id_WIFIRadiusWanif" value='' class='width_select80'>
					<script>
						faceinter();
					</script>
			</select>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>Radius Server</td>
			<td dir='ltr'>
				<script language="javascript" type="text/javascript">
					var radiusIP = new Array();
					var RadiusServerAddress = fvt_meta_config('wlan_802_1x_server');
					radiusIP = RadiusServerAddress.split(".");
					document.write("<input type='text' id='id_WIFIRadiusServer_item1' class='width_ip1' size='2' value='"+radiusIP[0]+"' maxlength='3'/>.");
					document.write("<input type='text' id='id_WIFIRadiusServer_item2' class='width_ip1' size='2' value='"+radiusIP[1]+"' maxlength='3'/>.");
					document.write("<input type='text' id='id_WIFIRadiusServer_item3' class='width_ip1' size='2' value='"+radiusIP[2]+"' maxlength='3'/>.");
					document.write("<input type='text' id='id_WIFIRadiusServer_item4' class='width_ip1' size='2' value='"+radiusIP[3]+"' maxlength='3'/>");
					document.write("<input type='hidden' id='id_WIFIRadiusServer' name='WIFIRadiusServer' value='"+RadiusServerAddress+"'>");
				</script>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>Radius Port</td>
			<td>
				<input disabled="disabled" id="id_WIFIRadiusPort" name="WIFIRadiusPort" class="width_textip2" size="15" maxlength="5" type="text">
			</td>
		</tr>
		<tr>
			<td></td>
			<td>Radius Key</td>
			<td>
				<input disabled="disabled" id="id_WIFIRadiusKey" name="WIFIRadiusKey" class="width_textip2" size="15" value="12345" maxlength="64" type="password">
				<script language="javascript" type="text/javascript">
					document.write(vradiuskey);
				</script>
			</td>
		</tr>
	</tbody></table>
	</div>
	</div>
</div>

<div class="div1_indent">
	<div class="top_cwmp2">
	<div><hr class="hr2"></div>
		<table><tbody>
			<tr>
				<td class="button_center">
				<script language="javascript" type="text/javascript">
				document.write("<input type='submit' onclick='save_change()' ");
				document.write("name='applybtn' value='"+ vAppSave +"' ");
				document.write("class='btnstyle'>");
				</script>
				</td>
			</tr>
			<tr id="id_wait_progress" style="display:none;position:fixed;top:0px;left:0px;width:100%;height:100%;opacity:0.3;background-color:rgb(0,0,0);">
				<td class="button_center">
					<img src="../images/progress1.gif" style="position:fixed;display:block;top:50%;left:50%;transform:translate(-50%,-50%);">
				</td>
			</tr>
		</tbody></table>
	</div>
</div>
</form>
</td></tr>
</tbody></table>
</div>
<br>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>.:: Welcome to the Web-Based Configurator::.</title>
<link href="../css/zycss.css" rel="stylesheet" type="text/css" />
<!--[if lte IE 8]><script src="../js/excanvas.js"></script><![endif]-->
<script type="text/javascript" src="../js/fvt.js" ></script>
<script type="text/javascript" src="../js/na_verify.js"></script>
<style type="text/css">
<!--
.style1 {
	font-size:14px;
	color:#990000;
	font-weight:bold;
	valign:middle;
}
#Disabled {
	position:absolute;
	top:0;
	left:0;
	right:0;
	margin:0 auto;
}
td.namepwd {
	text-align:right;valign:middle;color:#00008B;font-weight:bold;height:30px;font-size:14px;
}
table {
	margin:0 auto; /* or margin: 0 auto 0 auto */
 }
td.input_f{width:150px;text-align:left;margin:0px;padding:0px;}
tr.input_tr{height:35px;}
.input_w{width:150px;height:25px;font-size:14px;}
img {
	vertical-align:middle;
}
 -->
</style>
<script type="text/javascript">
var verify_code_enable=1;
var VerifyCode=fvt_meta_config('VerifyCode');
if (VerifyCode=="1"){verify_code_enable=1;}else{verify_code_enable=0}

var count_down_time=60;
var wait_time=180;
//var count_down_time=15;
//var wait_time=20;
var timeout_flag=0;
var timeout_restart=0;
var verify_error=0;
var Fail_time;

function checkPassword()
{
	if(getObj("pwd")){
		if(getObj("pwd").value == 1){
			getObj("passwd").style.display = "";
		}
		else{
			getObj("passwd").style.display = "none";
		}
	}
}

function getObj(id)
{
	return(document.getElementById(id));
}

function dosubmit()
{
	if (getObj("Frm_Username").value == "")
	{
		getObj("err_msg").innerHTML = "Error : Wrong password or username";
		getObj("err_msg").style.display = "" ;
		return;
	}
	else
	{
		getObj("Frm_Logintoken").value = "189515";
		localStorage.clear();
		document.fLogin.submit();
	}
}

if (top != self) { top.location = location; }

function checkJavaScriptValidity()
{
	getObj("Enabled").style.visibility = 'visible';
	getObj("Disabled").style.visibility = 'hidden';
}
function auto_redirect() {
	//alert("Url="+location.hostname);
	var idx = location.hostname.indexOf(":");
	if ( idx > 0 )
		{
		window.location.replace("/nullpage.html");
		}
}
</script>

</head>

<body onload="loadinit();checkJavaScriptValidity();checkPassword();checktimeout(count_down_time);" >
<div id="Enabled" style="visibility: hidden">

<!--<form id="form1" name="form1" method="post" action="index.cgi" enctype="multipart/form-data">-->
<form id="fLogin" onsubmit="return false;" name="fLogin" method="post" action="" autocomplete="off">
	<input id=_lang disabled type=hidden name=_lang>
	<input id=frashnum type=hidden name=frashnum>
	<input id=Frm_Logintoken type=hidden name=Frm_Logintoken>
<div class="login-wrap">
	<div class="bluetop"></div>
	<!--<div class="redline"><img src="../images/dotspacer.gif" width="1" height="1" /></div>-->
	<div class="login-content">
		<p>&nbsp;</p>
		<h1>
			<script language="javascript" type="text/javascript">
				var version=fvt_meta_config('version');
				if (version.substr(4,2)=="WP")
					{document.write(version.substr(0,1)+"-"+version.substr(1,4)+"-"+version.substr(5,1));}
				else
					{document.write(version.substr(0,1)+"-"+version.substr(1,5));}
			</script>
		</h1>
		<p>&nbsp;</p>
		<p>Welcome to your router Configuration Interface ! <br>
		Please enter your password and press enter or click "Login"</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>

		<table>
		<tr height="3">
			<td></td>
		</tr>
		<tr>
			<td class="namepwd">
				<span class="strong">Username:&nbsp;</span>
			</td>
			<td class="input_f">
				<input name="login_username" id="Frm_Username" class="input_w" type="text" maxlength="32"/>
				<!--
				<input name="login_username" id="Frm_Username" class="input_w" type="text" maxlength="32"
					autocomplete="off" readonly onfocus="this.removeAttribute('readonly');"/>
				-->
			</td>
		</tr>
		<tr class="input_tr">
			<td class="namepwd">
				<img src="../images/i_key.gif" width="12" height="13" /> <span class="strong">Password:&nbsp;</span>
			</td>
			<td class="input_f">
				<input name="login_password" id="Frm_Password" class="input_w" type="password" maxlength="32"/>
				<!--
				<input name="login_password" id="Frm_Password" class="input_w" type="password" maxlength="32"
					autocomplete="off" readonly onfocus="this.removeAttribute('readonly');"/>
				-->
			</td>
		</tr>
		<tr id="id_verify" style="display:none">
			<td class="namepwd"></td>
			<td>
				<div id="v_container" valign="center"></div>
			</td>
			<td align="left" valign="middle">
			<img src="../images/refreshcode.png" id="reflash_button" width="27" height="27"/>
			</td>
		</tr>
		<tr class="input_tr" id="id_verifycode" style="display:none">
			<td class="namepwd" id="id_vcode">Verify Code:&nbsp;</td>
			<td class="input_f">
			<input type="text" id="code_input" class="input_w" value="" placeholder="Enter Verify Code"/>
			<!-- <button id="my_button">Verify</button> -->
			</td>
			<td id="id_tleft" valign="middle">..</td>
		</tr>
		<tr class="input_tr" id="id_timeout" style="display:none">
			<td colspan="3">
				<p align="center" class="style1 hint" id="timeoutmsg">
				Timeout! Please login within 60 second.<br>
				Press refresh icon for login again.
				</p>
			</td>
		</tr>
		</table>

	<p>&nbsp;</p>
	<div align="center">
		<table border="0" cellspacing="0" cellpadding="0">
		<tr><td colspan="2">
			<p align="center" class="style1 hint" id="err_msg" style="display:none"></p>
		</td>
		</tr>
		</table>
	</div>
	<div id="passwd">
		<div align="center">
			<table border="0" cellspacing="0" cellpadding="0">
			<tr>
			<td colspan="2">
				<p align="center" class="style1 hint" id="errmsg" style="display:none">Error : Wrong password or username </p>
			</td>
			</tr>
			</table>
		</div>
	</div>

		<p>&nbsp;</p>
		<p id="id_apply">
			<input type="submit" id="LoginId" class="btnstyle" value="Login" style="font-size:12px" />
			<input type="reset" class="btnstyle" name="Submit2" value="Cancel" style="font-size:12px" />
			<input type="hidden" id="pwd" value="0" />
		</p>
		<p>&nbsp;</p>
	</div>
</div>
</form>
</div>

<div id="Disabled">
	<div class="login-wrap">
	<div class="login-content">
	<h1><font color="red">
	<br>
	Browser JavaScript is disabled.<br>
	Please enable javascript in your browser and try again.
	<br><br>
	</font></h1>
	</div>
	</div>
</div>
</body>

<script type="text/javascript">
document.createElement('header');
document.createElement('nav');
document.createElement('menu');
document.createElement('section');
document.createElement('article');
document.createElement('aside');
document.createElement('footer');
var verifyCode = new na_verify("v_container");
function loadinit()
{
	getObj("code_input").placeholder = vEnterVerify;
	getObj("id_vcode").innerHTML = vVerifyCode;
	if ( verify_code_enable == "1" )
		{
		getObj("id_verify").style.display = "" ;
		getObj("id_verifycode").style.display = "" ;
		verifyCode.refresh();
		}
	else
		{
		getObj("id_verify").style.display = "none" ;
		getObj("id_verifycode").style.display = "none" ;
		localStorage.clear();
		}
}
	//getObj("my_button").onclick = function(){
	getObj("LoginId").onclick = function()
		{
		var res = verifyCode.validate(getObj("code_input").value);
		if( res || verify_code_enable == "0" )
			{
			//alert("The verify code correct.");
			dosubmit();
			}
		else
			{
			getObj("id_timeout").style.display = "";
			getObj("timeoutmsg").innerHTML = vVCodeError;
			verify_error=1;
			document.getElementById("code_input").value = "";
			}
		}

	getObj("reflash_button").onclick = function(){
		if (Number(localStorage.getItem("Fail_count"))<3)
			{
			timeout_restart=1;
			verifyCode.refresh();
			document.getElementById("code_input").value = "";
			if (timeout_flag=="1")
				{
				timeout_flag=0;
				checktimeout(count_down_time);
				}
			}
		}

function inhibit_login(flag)
{
	if (flag==true)
		{
		getObj("id_verifycode").style.display = "none";
		getObj("id_apply").style.display = "none";
		getObj("id_timeout").style.display = "";
		}
	else
		{
		getObj("id_verifycode").style.display = "";
		getObj("id_apply").style.display = "";
		getObj("id_timeout").style.display = "none";
		}
}

function checktimeout(timeout)
{
	if(verify_code_enable == "1")
	{
		if (Number(localStorage.getItem("Fail_count"))>=3)
			countclear(wait_time);
		else
			countdown(timeout);
	}
	return;
}

var timesRun;
function countdown(CTime) {
	var timesRun=CTime;
	var timerId = setInterval(function() {
		if (timeout_restart=="1")
			{
			inhibit_login(false);
			timesRun=CTime;
			}
		else if (verify_error=="1")
			{
			timesRun=CTime;
			}
		else
			{
			if (timesRun <= 0)
				timesRun=-1;
			else
				timesRun--;
			}
		//console.log(timesRun+" v="+verify_error);
		getObj("id_tleft").innerHTML = timesRun;
		getObj("id_tleft").style.color = "#686868";
		//if(timesRun == 0 || verify_error=="1")
		if(verify_error=="1")
			{
			Fail_time=Number(localStorage.getItem("Fail_count"))+1;
			localStorage.setItem("Fail_count", Fail_time);
			//console.log("F="+Fail_time);
			}

		if (Number(localStorage.getItem("Fail_count"))>=3)
			{
			verify_error=0;
			timeout_restart=0;
			//console.log("Fail_count=3");
			countclear(wait_time);
			clearInterval(timerId);
			return;
			}

		if(timesRun == 0)
			{
			inhibit_login(true);
			timeout_flag=1;
			clearInterval(timerId);
			getObj("timeoutmsg").innerHTML = vVerifyTimeout;
			return;
			}

		verify_error=0;
		timeout_restart=0;
	}, 1000);
}

function countclear(count) {
	inhibit_login(true);
	var timerCId = setInterval(function() {
		count--;
		getObj("timeoutmsg").innerHTML = vWaitRelogin+count+vSecond;
		//console.log("T="+count);
		if(count == 0)
		{
			localStorage.clear();
			verifyCode.refresh();
			document.getElementById("code_input").value = "";
			inhibit_login(false);
			checktimeout(count_down_time);
			clearInterval(timerCId);
			return;
		}
	}, 1000);
}

</script>

</html>
